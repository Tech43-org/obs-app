import{Q as oe}from"./QHeader.2b025289.js";import{a as le,Q as ne}from"./QBanner.048d5fd6.js";import{L as F,a as A,u as W,y as Q,w as fe,F as U,G as h,H as l,P as a,I as e,Q as d,U as T,a4 as O,R as m,K as V,aO as ue,e as ve,M as R,O as Y,N as q,_ as pe,a5 as k,aP as be,aQ as Ve,h as G,a0 as Te,a3 as Ne,aR as ee,aS as de,aT as H,a1 as xe,a2 as Ie,T as ke}from"./index.6cbc1c32.js";import{Q as K,a as ge}from"./QToolbar.9858aa28.js";import{b as S,c as C,Q as D,a as J}from"./QCardActions.fdb521cd.js";import{Q as De}from"./QPage.cf5438ca.js";import{c as w,a as te,b as M,Q as $e}from"./QList.f87a6b82.js";import{b as ie,Q as L,d as $,a as j}from"./QSeparator.902ea310.js";import{Q as Qe}from"./QBadge.3170b65d.js";import{u as Me,n as me,s as Fe,d as Z,I as ce,Q as B,a as X,b as Ae,c as E,e as ze,f as Be,g as Ee}from"./utils.2039f302.js";import"./QResizeObserver.f26565c9.js";import"./QBtnGroup.95ab99ad.js";import"./QCheckbox.675d2b2a.js";const Oe=V("br",null,null,-1),Re=F({__name:"UserCreateDrawer",setup(N){const t=A(),_=W(),u=Q({subject:"",body:""});fe(()=>({givenName:t.user.givenName,surname:t.user.surname}),p=>{u.value.subject=`Onboarding ${p.givenName} ${p.surname}`,u.value.body=`Please add ${p.givenName} to the Active Directory.
Name: ${p.givenName}
Surname: ${p.surname}

Thanks

This email has been sent from FileMaker by ${_.user.fullName}`},{immediate:!0});const y=()=>{t.user={givenName:"",surname:"",status:"Pending",groupId:null}};return(p,i)=>(U(),h(le,{modelValue:a(t).createMode,"onUpdate:modelValue":i[5]||(i[5]=b=>a(t).createMode=b),onBeforeShow:i[6]||(i[6]=b=>y()),width:384,bordered:"",overlay:"",side:"right"},{default:l(()=>[e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[e(K,null,{default:l(()=>[d(" Create User ")]),_:1}),e(w,{class:"text-body2"},{default:l(()=>[d(" A new User will be created and, an email request to add him/her to Active Directory will be send ")]),_:1}),Oe,e(T,{dense:"",label:"Create User and Send Request",icon:"person_add",color:"primary",onClick:i[0]||(i[0]=b=>a(t).createUser(u.value)),disable:!a(t).user.givenName||!a(t).user.surname},null,8,["disable"])]),_:1}),e(S,null,{default:l(()=>[e(C,{modelValue:a(t).user.givenName,"onUpdate:modelValue":i[1]||(i[1]=b=>a(t).user.givenName=b),label:"Name",rules:[b=>!!b||"Name is required"]},null,8,["modelValue","rules"]),e(C,{modelValue:a(t).user.surname,"onUpdate:modelValue":i[2]||(i[2]=b=>a(t).user.surname=b),label:"Surname",rules:[b=>!!b||"Surname is required"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(D,{class:"bg-blue-2"},{default:l(()=>[e(S,null,{default:l(()=>[e(te,{style:{"background-color":"hsl(200, 50%, 90%)"}},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(O,{name:"mail"})]),_:1}),e(M,null,{default:l(()=>[d(m(a(_).userCreationNotification),1)]),_:1})]),_:1}),e(C,{modelValue:u.value.subject,"onUpdate:modelValue":i[3]||(i[3]=b=>u.value.subject=b),label:"Subject"},null,8,["modelValue"]),e(C,{modelValue:u.value.body,"onUpdate:modelValue":i[4]||(i[4]=b=>u.value.body=b),label:"Body",type:"textarea",autogrow:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),qe=F({__name:"UserUpdateDrawer",setup(N){const t=A(),_=W(),u=Q({subject:"",body:""}),y=Q(320),p=()=>{t.user=JSON.parse(JSON.stringify(t.selectedUser))},i=()=>{if(t.selectedUser.status!=="Inactive"&&t.user.status==="Inactive"){t.user.groupId=null;const b=t.user.email;t.user.email=null,y.value=720,u.value.subject=`Deauthorize ${t.user.givenName} ${t.user.surname}`,u.value.body=`Please remove ${t.user.givenName} from the Active Directory.
Name: ${t.user.givenName}
Surname: ${t.user.surname}
Email: ${b}
 
Thanks
 
This email has been sent from FileMaker by ${_.user.fullName}`}else y.value=320};return(b,f)=>(U(),h(le,{modelValue:a(t).editMode,"onUpdate:modelValue":f[11]||(f[11]=v=>a(t).editMode=v),onBeforeShow:f[12]||(f[12]=v=>p()),onBeforeHide:f[13]||(f[13]=v=>y.value=320),width:y.value,bordered:"",overlay:"",side:"right",class:"row"},{default:l(()=>[e(D,{class:"col"},{default:l(()=>[e(S,{horizontal:""},{default:l(()=>[e(K,null,{default:l(()=>[d(" Edit User ")]),_:1}),e(T,{dense:"",label:"Save Changes",icon:"save",color:"primary",onClick:f[0]||(f[0]=v=>a(t).updateUser(u.value)),disable:a(t).user.status==="Active"&&!a(t).user.groupId},null,8,["disable"])]),_:1}),e(S,null,{default:l(()=>[e(C,{modelValue:a(t).user.givenName,"onUpdate:modelValue":f[1]||(f[1]=v=>a(t).user.givenName=v),label:"Name"},null,8,["modelValue"]),e(C,{modelValue:a(t).user.surname,"onUpdate:modelValue":f[2]||(f[2]=v=>a(t).user.surname=v),label:"Surname"},null,8,["modelValue"]),e(C,{modelValue:a(t).user.loginName,"onUpdate:modelValue":f[3]||(f[3]=v=>a(t).user.loginName=v),label:"Login"},null,8,["modelValue"]),e(C,{modelValue:a(t).user.email,"onUpdate:modelValue":f[4]||(f[4]=v=>a(t).user.email=v),label:"Email",type:"email",rules:[v=>!v||/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(v)||"Invalid email"]},null,8,["modelValue","rules"]),e(C,{modelValue:a(t).user.note,"onUpdate:modelValue":f[5]||(f[5]=v=>a(t).user.note=v),label:"Note",type:"textarea"},null,8,["modelValue"])]),_:1}),e(S,{style:{"background-color":"rgb(197, 198, 198)","border-radius":"4%"}},{default:l(()=>[e(ie,{modelValue:a(t).user.status,"onUpdate:modelValue":[f[6]||(f[6]=v=>a(t).user.status=v),f[7]||(f[7]=v=>i())],label:"Status",options:a(t).statusOptions},null,8,["modelValue","options"]),e(ie,{modelValue:a(t).user.groupId,"onUpdate:modelValue":f[8]||(f[8]=v=>a(t).user.groupId=v),"emit-value":"","map-options":"",label:"Group",clearable:"",disable:a(t).user.status!=="Active",options:a(_).groupsOptions},null,8,["modelValue","disable","options"])]),_:1}),a(t).user.status==="Active"&&(a(t).user.groupId===null||a(t).user.groupId==="")?(U(),h(S,{key:0},{default:l(()=>[e(ne,{class:"bg-orange text-white",rounded:""},{avatar:l(()=>[e(O,{name:"warning"})]),default:l(()=>[d(" Select a Group before saving changes ")]),_:1})]),_:1})):ue("",!0)]),_:1}),a(t).selectedUser.status!=="Inactive"&&a(t).user.status==="Inactive"?(U(),h(D,{key:0,class:"col"},{default:l(()=>[e(S,null,{default:l(()=>[e(ne,{class:"bg-red text-white",rounded:""},{avatar:l(()=>[e(O,{name:"warning"})]),default:l(()=>[d(" You are going to inactivate this user, the email and the group associated will be removed and an email to unauthorized the user will be sent. ")]),_:1})]),_:1}),e(D,{class:"bg-blue-2"},{default:l(()=>[e(S,null,{default:l(()=>[e(te,{style:{"background-color":"hsl(200, 50%, 90%)"}},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(O,{name:"mail"})]),_:1}),e(M,null,{default:l(()=>[d(m(a(_).userCreationNotification),1)]),_:1})]),_:1}),e(C,{modelValue:u.value.subject,"onUpdate:modelValue":f[9]||(f[9]=v=>u.value.subject=v),label:"Subject"},null,8,["modelValue"]),e(C,{modelValue:u.value.body,"onUpdate:modelValue":f[10]||(f[10]=v=>u.value.body=v),label:"Body",type:"textarea",autogrow:"",hint:"The email can be personalized before sending it."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):ue("",!0)]),_:1},8,["modelValue","width"]))}});const Pe=F({__name:"UsersList",setup(N){const t=A(),_=ve(),u=y=>{t.selectedUser=y,t.editMode=!1,t.createMode=!1,_.readActivity(Me.value)};return(y,p)=>(U(),h(D,{style:{width:"100%"}},{default:l(()=>[e($e,{style:{"margin-top":"76px"}},{default:l(()=>[(U(!0),R(q,null,Y(a(t).filterUsers,i=>(U(),h(te,{key:i.userId,clickable:"",onClick:b=>u(i),class:"bg-grey-2 menu",active:a(t).selectedUser===i,"active-class":"menu-active"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(k,{style:be({backgroundColor:i.color}),class:"text-white"},{default:l(()=>[d(m(i.initials),1)]),_:2},1032,["style"])]),_:2},1024),e(M,null,{default:l(()=>[e(w,{class:"text-h4"},{default:l(()=>[d(m(i.givenName),1)]),_:2},1024),e(w,{class:"text-h5"},{default:l(()=>[d(m(i.surname),1)]),_:2},1024)]),_:2},1024),e(M,{side:"",top:""},{default:l(()=>[e(Qe,{rounded:"",color:i.status==="Active"?"green":i.status==="Pending"?"orange":"grey"},null,8,["color"])]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}))}});var je=pe(Pe,[["__scopeId","data-v-d8b8b4e8"]]);const Ye=F({__name:"UserAvatar",setup(N){const t=A();return(_,u)=>(U(),h(k,Ve({style:{backgroundColor:a(t).selectedUser.color},class:"text-white"},_.$attrs),{default:l(()=>[d(m(a(t).selectedUser.initials),1)]),_:1},16,["style"]))}}),Le=F({__name:"UserInfoCard",setup(N){const t=A(),_=W();return(u,y)=>(U(),h(D,{style:{width:"16rem"}},{default:l(()=>[e(S,{class:"row"},{default:l(()=>[e(L),e($,{dark:"",size:"md",label:a(t).selectedUser.status,color:a(t).selectedUser.status==="Active"?"green":a(t).selectedUser.status==="Pending"?"orange":"grey"},null,8,["label","color"])]),_:1}),e(S,{class:"column items-center q-pa-none"},{default:l(()=>[e(Ye,{size:"100px"})]),_:1}),e(S,null,{default:l(()=>[e(w,{class:"text-h3 text-center"},{default:l(()=>{var p;return[d(m((p=a(t).selectedUser)==null?void 0:p.givenName),1)]}),_:1}),e(w,{class:"text-h4 text-center"},{default:l(()=>{var p;return[d(m((p=a(t).selectedUser)==null?void 0:p.surname),1)]}),_:1})]),_:1}),e(S,{class:"bg-blue-2"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(w,null,{default:l(()=>[d("Group")]),_:1}),e(w,{class:"text-h4"},{default:l(()=>[d(m(a(t).selectedUser.groupId?a(_).groups[a(t).selectedUser.groupId].name:"No Group"),1)]),_:1})]),_:1})]),_:1})]),_:1}))}});const P=N=>(xe("data-v-4fc96e38"),N=N(),Ie(),N),Ge=P(()=>V("span",{style:{"font-weight":"bold"}},"Timeframe:",-1)),He=P(()=>V("span",{style:{"font-weight":"bold"}},"Performer Users:",-1)),Ze=P(()=>V("span",{style:{"font-weight":"bold"}},"Related Users:",-1)),Je=P(()=>V("span",{style:{"font-weight":"bold"}},"Actions:",-1)),We=P(()=>V("span",{style:{"font-weight":"bold"}},"Decription Filter:",-1)),Ke=P(()=>V("span",{style:{"font-weight":"bold"}},"Size:",-1)),Xe={class:"q-ma-md column",style:{gap:"0.6rem"}},el={class:"q-ma-md column",style:{gap:"0.6rem"}},ll={class:"q-mx-md"},tl=F({__name:"UserActivityTable",setup(N){const t=ve(),_=A(),u=Q(null),y=Q([{name:"rowNumber",label:"rowNumber",align:"right",field:"",sortable:!1},{name:"activityId",label:"ID",align:"left",field:"activityId",sortable:!1},{name:"date",label:"Date",align:"left",field:"date",sortable:!1},{name:"time",label:"Time",align:"left",field:"time",sortable:!1},{name:"performerUserFullName",label:"Performer User",align:"left",field:"performerUserFullName",sortable:!1},{name:"relatedUserFullName",label:"Related User",align:"left",field:"relatedUserFullName",sortable:!1},{name:"action",label:"Action",align:"left",field:"action",sortable:!1},{name:"description",label:"Description",align:"left",field:"description",sortable:!1}]),p=["rowNumber","date","time","performerUserFullName","relatedUserFullName","action","description"],i=me(),b=Fe(i),f=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"monthToDate",label:"Month to Date"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}],v=Q(!1),o=Q({term:"",timeframe:"monthToDate",dateStart:Z(b),dateEnd:Z(i),searchColumns:["description"],performerUserId:[],relatedUserId:[],actions:[]}),Ue=G(()=>[...new Set(t.activity.map(g=>g.action))]),_e=G(()=>t.activity.map(g=>({value:g.performerUserId,label:g.performerUserFullName})).filter((g,n,r)=>n===r.findIndex(s=>s.label===g.label&&s.value===g.value))),ye=G(()=>t.activity.map(g=>({value:g.relatedUserId,label:g.relatedUserFullName})).filter((g,n,r)=>n===r.findIndex(s=>s.label===g.label&&s.value===g.value))),we=g=>{o.value.timeframe=g;const n=me(),r=Ee(n);let s=new Date,c=new Date;switch(g){case"today":s=r,c=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),23,59,59));break;case"yesterday":s=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()-1)),c=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()-1,23,59,59));break;case"monthToDate":s=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),1)),c=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),23,59,59));break;case"lastMonth":s=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth()-1,1)),c=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),0));break;case"custom":s=new Date(o.value.dateStart),c=new Date(o.value.dateEnd),isNaN(s.getTime())||isNaN(c.getTime())?H({message:"Invalid custom date range",color:"negative",icon:"warning"}):c<s&&H({message:"End date cannot be before start date",color:"negative",icon:"warning"});break}o.value.dateStart=Z(s),o.value.dateEnd=Z(c)},Ce=G(()=>{const g=ce(o.value.dateStart),n=ce(o.value.dateEnd);return t.activity.filter(r=>{var ae,se,re;const s=new Date(r.createdAt),c=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate())),x=c>=g&&c<=n,I=!((ae=o.value.performerUserId)!=null&&ae.length)||o.value.performerUserId.includes(r.performerUserId),z=!((se=o.value.relatedUserId)!=null&&se.length)||o.value.relatedUserId.includes(r.relatedUserId),Se=!((re=o.value.actions)!=null&&re.length)||o.value.actions.includes(r.action);return x&&I&&z&&Se})}),he=()=>{if(!u.value)return;const g=u.value.filteredSortedRows,n=[y.value.map(I=>de(I.label))].concat(g.map(I=>y.value.map(z=>de(typeof z.field=="function"?z.field(I):I[z.field===void 0?z.name:z.field])).join(","))).join(`\r
`),r=new Date,c=`User Activity ${`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()} ${r.getHours()}-${r.getMinutes()}-${r.getSeconds()}`}.csv`;Be(c,n,"text/csv")!==!0?H({message:"Browser denied file download...",color:"negative",icon:"warning"}):H({message:"File downloaded successfully...",color:"positive",icon:"download"})};return fe(()=>_.selectedUser,()=>{o.value.performerUserId=[],o.value.relatedUserId=[],o.value.actions=[],o.value.term=""}),(g,n)=>(U(),h(D,null,{default:l(()=>[e(ze,{ref_key:"tableRef",ref:u,rows:Ce.value,columns:y.value,"row-key":"activityId","rows-per-page-options":[-1],"visible-columns":p,filter:o.value.term,dense:"","hide-pagination":"","virtual-scroll":"",class:"header-table",style:{"min-height":"90vh",overflow:"auto",margin:"0.4rem"}},{top:l(r=>[e(w,{class:"text-h3"},{default:l(()=>[d(" Activity ")]),_:1}),e(L),e($,{class:"bg-blue text-white q-ma-md"},{default:l(()=>[e(k,{icon:"priority_high"}),d(" Dates in UTC ")]),_:1}),e(T,{color:"primary",icon:"download",label:"Download",onClick:he}),e(T,{dense:"",icon:r.inFullscreen?"fullscreen_exit":"fullscreen",onClick:r.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"]),e(T,{dense:"",icon:v.value?"more_vert":"more_horiz",onClick:n[0]||(n[0]=s=>v.value=!v.value),class:"q-ml-md"},null,8,["icon"]),Te(e(ge,null,{default:l(()=>[e(D,{class:"col"},{default:l(()=>[e(S,{class:"q-pa-md",style:{"background-color":"var(--primary-white)"}},{default:l(()=>[e(K,null,{default:l(()=>[d(" Summary ")]),_:1}),e(w,null,{default:l(()=>[Ge,e($,{color:"orange-3"},{default:l(()=>{var s;return[d(m(((s=f.find(c=>c.value===o.value.timeframe))==null?void 0:s.label)||""),1)]}),_:1}),d("from "+m(o.value.dateStart)+" to "+m(o.value.dateEnd),1)]),_:1}),e(w,null,{default:l(()=>{var s;return[He,(U(!0),R(q,null,Y([...new Set((s=u.value)==null?void 0:s.computedRows.map(c=>c.performerUserFullName))],(c,x)=>(U(),h($,{key:x},{default:l(()=>[d(m(c),1)]),_:2},1024))),128))]}),_:1}),e(w,null,{default:l(()=>{var s;return[Ze,(U(!0),R(q,null,Y([...new Set((s=u.value)==null?void 0:s.computedRows.map(c=>c.relatedUserFullName).filter(Boolean))],(c,x)=>(U(),h($,{key:x},{default:l(()=>[d(m(c),1)]),_:2},1024))),128))]}),_:1}),e(w,null,{default:l(()=>{var s;return[Je,(U(!0),R(q,null,Y([...new Set((s=u.value)==null?void 0:s.computedRows.map(c=>c.action))],(c,x)=>(U(),h($,{color:"blue-3",key:x},{default:l(()=>[d(m(c),1)]),_:2},1024))),128))]}),_:1}),e(w,null,{default:l(()=>{var s;return[We,d(" "+m(((s=o.value.term)==null?void 0:s.length)>0?o.value.term:"None"),1)]}),_:1}),e(w,null,{default:l(()=>{var s;return[Ke,d(" Showing "+m((s=u.value)==null?void 0:s.computedRowsNumber)+" of "+m(a(t).activity.length)+" Rows where ",1),e($,{color:"green-3"},{default:l(()=>[d(m(a(_).selectedUser.fullName),1)]),_:1}),d("was involved")]}),_:1})]),_:1})]),_:1})]),_:1},512),[[Ne,v.value]])]),"header-cell-rowNumber":l(r=>[e(B,{props:r},{default:l(()=>[e(O,{size:"sm",name:"tag"})]),_:2},1032,["props"])]),"header-cell-date":l(r=>[e(B,{props:r},{default:l(()=>[e(j,{dense:"",round:""},{label:l(()=>[e(k,{icon:"filter_list",size:"sm","text-color":"primary"}),d(" "+m(r.col.label),1)]),default:l(()=>[V("div",Xe,[(U(),R(q,null,Y(f,s=>e(T,{key:s.value,outline:"",label:s.label,color:o.value.timeframe===s.value?"primary":"",onClick:c=>we(s.value)},null,8,["label","color","onClick"])),64))]),V("div",el,[e(C,{outlined:"",debounce:"300",modelValue:o.value.dateStart,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value.dateStart=s),label:"Date Start",type:"date",disable:o.value.timeframe!=="custom"},null,8,["modelValue","disable"]),e(C,{outlined:"",debounce:"300",modelValue:o.value.dateEnd,"onUpdate:modelValue":n[2]||(n[2]=s=>o.value.dateEnd=s),label:"Date End",type:"date",disable:o.value.timeframe!=="custom"},null,8,["modelValue","disable"])])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-time":l(r=>[e(B,{props:r},{default:l(()=>[e(w,{style:{"font-size":"16px"}},{default:l(()=>[d(m(r.col.label),1)]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserFullName":l(r=>[e(B,{props:r},{default:l(()=>[e(j,{dense:"",round:""},{label:l(()=>[e(k,{icon:"filter_list",size:"sm","text-color":o.value.performerUserId&&o.value.performerUserId.length>0?"primary":""},null,8,["text-color"]),d(" "+m(r.col.label),1)]),default:l(()=>[e(J,{style:{width:"256px"}},{default:l(()=>[e(L),e(T,{dense:"",label:"Clear",onClick:n[3]||(n[3]=s=>o.value.performerUserId=[])})]),_:1}),e(X,{modelValue:o.value.performerUserId,"onUpdate:modelValue":n[4]||(n[4]=s=>o.value.performerUserId=s),options:_e.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-relatedUserFullName":l(r=>[e(B,{props:r},{default:l(()=>[e(j,{dense:"",round:""},{label:l(()=>[e(k,{icon:"filter_list",size:"sm","text-color":o.value.relatedUserId&&o.value.relatedUserId.length>0?"primary":""},null,8,["text-color"]),d(" "+m(r.col.label),1)]),default:l(()=>[e(J,{style:{width:"256px"}},{default:l(()=>[e(L),e(T,{dense:"",label:"Clear",onClick:n[5]||(n[5]=s=>o.value.relatedUserId=[])})]),_:1}),e(X,{modelValue:o.value.relatedUserId,"onUpdate:modelValue":n[6]||(n[6]=s=>o.value.relatedUserId=s),options:ye.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-action":l(r=>[e(B,{props:r},{default:l(()=>[e(j,{dense:"",round:""},{label:l(()=>[e(k,{icon:"filter_list",size:"sm","text-color":o.value.actions&&o.value.actions.length>0?"primary":""},null,8,["text-color"]),d(" "+m(r.col.label),1)]),default:l(()=>[e(J,{style:{width:"192px"}},{default:l(()=>[e(L),e(T,{dense:"",label:"Clear",onClick:n[7]||(n[7]=s=>o.value.actions=[])})]),_:1}),e(X,{modelValue:o.value.actions,"onUpdate:modelValue":n[8]||(n[8]=s=>o.value.actions=s),options:Ue.value.map(s=>({label:s,value:s})),type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-description":l(r=>[e(B,{props:r},{default:l(()=>[e(j,{dense:"",round:""},{label:l(()=>[e(k,{icon:"search",size:"sm","text-color":o.value.term!==""?"primary":""},null,8,["text-color"]),d(" "+m(r.col.label),1)]),default:l(()=>[V("div",ll,[e(C,{outlined:"",dense:"",debounce:"300",modelValue:o.value.term,"onUpdate:modelValue":n[10]||(n[10]=s=>o.value.term=s),type:"search",placeholder:"Description search\u2026",style:{"align-self":"center"}},{append:l(()=>[e(O,{name:o.value.term?"close":"search",class:ee({"cursor-pointer":o.value.term}),onClick:n[9]||(n[9]=s=>o.value.term?o.value.term="":null)},null,8,["name","class"])]),_:1},8,["modelValue"])])]),_:2},1024)]),_:2},1032,["props"])]),body:l(r=>[e(Ae,{props:r},{default:l(()=>[e(E,{class:"text-grey"},{default:l(()=>[d(m(r.rowIndex+1),1)]),_:2},1024),e(E,{key:"date",props:r},{default:l(()=>[d(m(r.row.date),1)]),_:2},1032,["props"]),e(E,{key:"time",props:r},{default:l(()=>[d(m(r.row.time),1)]),_:2},1032,["props"]),e(E,{key:"performerUserFullName",props:r},{default:l(()=>[d(m(r.row.performerUserFullName),1)]),_:2},1032,["props"]),e(E,{key:"relatedUserFullName",props:r},{default:l(()=>[V("span",{class:ee({"text-grey":!r.row.relatedUserFullName})},m(r.row.relatedUserFullName||"No one"),3)]),_:2},1032,["props"]),e(E,{key:"action",props:r},{default:l(()=>{var s;return[e($,{"text-color":"white",color:((s=a(t).activityActions.find(c=>c.action===r.row.action))==null?void 0:s.color)||"grey"},{default:l(()=>{var c,x;return[e(k,{size:"sm","text-color":"white",icon:((c=a(t).activityActions.find(I=>I.action===r.row.action))==null?void 0:c.icon)||"question_mark",color:((x=a(t).activityActions.find(I=>I.action===r.row.action))==null?void 0:x.color)||"grey"},null,8,["icon","color"]),d(" "+m(r.row.action),1)]}),_:2},1032,["color"])]}),_:2},1032,["props"]),e(E,{key:"description",props:r},{default:l(()=>[d(m(r.row.description),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1}))}});var al=pe(tl,[["__scopeId","data-v-4fc96e38"]]);const sl=F({__name:"UsersSearch",setup(N){const t=A();return(_,u)=>(U(),h(C,{modelValue:a(t).searchTerm,"onUpdate:modelValue":u[1]||(u[1]=y=>a(t).searchTerm=y),type:"search",placeholder:"Search\u2026",filled:""},{append:l(()=>[e(O,{name:a(t).searchTerm?"close":"search",class:ee({"cursor-pointer":a(t).searchTerm}),onClick:u[0]||(u[0]=y=>a(t).searchTerm?a(t).searchTerm="":null)},null,8,["name","class"])]),_:1},8,["modelValue"]))}}),rl={class:"row items-start"},ol={style:{width:"300px"}},nl={class:"col"},wl=F({__name:"UsersPage",setup(N){const t=A(),_=W(),u=Q(!0);return ke(()=>{_.readSettings(),t.readAllUsers()}),(y,p)=>(U(),R(q,null,[e(Re),e(qe),e(le,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=i=>u.value=i),side:"left",width:320,class:"row"},{default:l(()=>[e(oe,{class:"q-pa-md",style:be({backgroundColor:"var(--primary-light)"})},{default:l(()=>[e(sl)]),_:1},8,["style"]),e(je)]),_:1},8,["modelValue"]),e(De,{class:"row-container"},{default:l(()=>[e(oe,null,{default:l(()=>[e(ge,null,{default:l(()=>[u.value?(U(),h(T,{key:1,onClick:p[2]||(p[2]=i=>u.value=!u.value),icon:"menu"})):(U(),h(T,{key:0,onClick:p[1]||(p[1]=i=>u.value=!u.value),icon:"menu"})),e(K,null,{default:l(()=>[d("Users \xBB "+m(a(t).selectedUser.givenName)+" "+m(a(t).selectedUser.surname),1)]),_:1}),e(J,null,{default:l(()=>[e(T,{icon:a(t).createMode?"close":"add",label:a(t).createMode?"Cancel Create":"Create User",onClick:p[3]||(p[3]=i=>{(a(t).createMode=!a(t).createMode)&&(a(t).editMode=!1)})},null,8,["icon","label"]),e(T,{icon:a(t).editMode?"close":"edit",label:a(t).editMode?"Cancel Edit":"Edit User",onClick:p[4]||(p[4]=i=>{(a(t).editMode=!a(t).editMode)&&(a(t).createMode=!1)})},null,8,["icon","label"])]),_:1})]),_:1})]),_:1}),V("div",rl,[V("div",ol,[e(Le)]),V("div",nl,[e(al)])])]),_:1})],64))}});export{wl as default};
