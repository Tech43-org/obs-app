import{Q as Ue,a as ot}from"./QToolbar.01f012b8.js";import{g as b,e as De,x as V,w,n as Le,h as A,ak as st,j as Pe,aj as it,M as W,a as H,E as q,F as N,G as d,O as u,a0 as Y,H as n,K as je,W as dt,V as Fe,_ as ct,aF as ue,X as k,Y as C,aG as ft,aH as vt,aI as mt,u as se,J as j,a2 as gt,am as Z,q as ht,aJ as bt,ao as re,aK as ye,ai as xe,a1 as pe,aw as ke,ap as _e,T as yt,i as pt,f as Se,o as _t,I as Te,a3 as St,ay as Me,l as wt,k as Ct,Q as oe,aL as Ae,N as kt}from"./index.dd68167e.js";import{e as I,d as Ut,i as qt,j as Vt,k as $t,l as Bt,m as Nt,n as xt,o as Tt,p as ne,q as Mt,h as Ie,f as Ee,b as At}from"./QSelect.49f57ca5.js";import{Q as It,a as Et}from"./QBadge.a130ca0d.js";import{Q as Qt}from"./QPage.9d9d1f99.js";import{b as zt,a as ie,Q as L,c as P,u as Ot,d as Dt}from"./QList.93f4dc69.js";import{Q as F,a as T}from"./QCard.04a6aa20.js";import"./QResizeObserver.7c08f174.js";const Lt={ratio:[String,Number]};function Pt(t,e){return b(()=>{const c=Number(t.ratio||(e!==void 0?e.value:void 0));return isNaN(c)!==!0&&c>0?{paddingBottom:`${100/c}%`}:null})}const jt=16/9;var We=De({name:"QImg",props:{...Lt,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:jt},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:e,emit:c}){const m=V(t.initialRatio),a=Pt(t,m);let l=null,f=!1;const v=[V(null),V(U())],s=V(0),o=V(!1),i=V(!1),x=b(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),_=b(()=>({width:t.width,height:t.height})),S=b(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition`),y=b(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));w(()=>E(),p);function E(){return t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null}function U(){return t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null}function p(h){l!==null&&(clearTimeout(l),l=null),i.value=!1,h===null?(o.value=!1,v[s.value^1].value=U()):o.value=!0,v[s.value].value=h}function ee({target:h}){f!==!0&&(l!==null&&(clearTimeout(l),l=null),m.value=h.naturalHeight===0?.5:h.naturalWidth/h.naturalHeight,G(h,1))}function G(h,Q){f===!0||Q===1e3||(h.complete===!0?te(h):l=setTimeout(()=>{l=null,G(h,Q+1)},50))}function te(h){f!==!0&&(s.value=s.value^1,v[s.value].value=null,o.value=!1,i.value=!1,c("load",h.currentSrc||h.src))}function K(h){l!==null&&(clearTimeout(l),l=null),o.value=!1,i.value=!0,v[s.value].value=null,v[s.value^1].value=U(),c("error",h)}function z(h){const Q=v[h].value,$={key:"img_"+h,class:S.value,style:y.value,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...Q};return s.value===h?($.class+=" q-img__image--waiting",Object.assign($,{onLoad:ee,onError:K})):$.class+=" q-img__image--loaded",A("div",{class:"q-img__container absolute-full",key:"img"+h},A("img",$))}function de(){return o.value!==!0?A("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Pe(e[i.value===!0?"error":"default"])):A("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},e.loading!==void 0?e.loading():t.noSpinner===!0?void 0:[A(it,{color:t.spinnerColor,size:t.spinnerSize})])}return p(E()),Le(()=>{f=!0,l!==null&&(clearTimeout(l),l=null)}),()=>{const h=[];return a.value!==null&&h.push(A("div",{key:"filler",style:a.value})),i.value!==!0&&(v[0].value!==null&&h.push(z(0)),v[1].value!==null&&h.push(z(1))),h.push(A(st,{name:"q-transition--fade"},de)),A("div",{class:x.value,style:_.value,role:"img","aria-label":t.alt},h)}}});const Ft=W({__name:"UsersSearch",setup(t){const e=H();return(c,m)=>(q(),N(I,{modelValue:u(e).searchTerm,"onUpdate:modelValue":m[1]||(m[1]=a=>u(e).searchTerm=a),type:"search",for:"search",placeholder:"Search\u2026",class:"q-ml-md",clearable:""},{append:d(()=>[u(e).searchTerm?(q(),N(Y,{key:0,name:"close",class:"cursor-pointer",onClick:m[0]||(m[0]=a=>u(e).searchTerm="")})):(q(),N(Y,{key:1,name:"search"}))]),_:1},8,["modelValue"]))}});const Wt=W({__name:"UsersList",setup(t){const e=H(),c=m=>{e.selectedUser=m,e.editMode=!1,e.createMode=!1};return(m,a)=>(q(),N(F,{style:{width:"20rem"}},{default:d(()=>[n(Ft),n(zt,null,{default:d(()=>[(q(!0),je(Fe,null,dt(u(e).filterUsers,l=>(q(),N(ie,{key:l.userId,clickable:"",onClick:f=>c(l),class:"bg-grey-2 menu",active:u(e).selectedUser===l,"active-class":"menu-active"},{default:d(()=>[n(L,{avatar:""},{default:d(()=>[l.avatar?(q(),N(ue,{key:0},{default:d(()=>[n(We,{src:l.avatar,fit:"contain",ratio:1},null,8,["src"])]),_:2},1024)):(q(),N(ue,{key:1,style:{"background-color":"rgb(43, 189, 226)"}},{default:d(()=>{var f,v;return[k(C((((f=l.givenName)==null?void 0:f.charAt(0))||"").toUpperCase())+C((((v=l.surname)==null?void 0:v.charAt(0))||"").toUpperCase()),1)]}),_:2},1024))]),_:2},1024),n(L,null,{default:d(()=>[n(P,{class:"text-h4"},{default:d(()=>[k(C(l.givenName),1)]),_:2},1024),n(P,{class:"text-h5"},{default:d(()=>[k(C(l.surname),1)]),_:2},1024)]),_:2},1024),n(L,{side:"",top:""},{default:d(()=>[n(It,{rounded:"",color:l.status==="Active"?"green":l.status==="Pending"?"orange":"grey"},null,8,["color"])]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}))}});var Ht=ct(Wt,[["__scopeId","data-v-341e6be0"]]);const Rt=W({__name:"UserAvatar",setup(t){const e=H();return(c,m)=>u(e).selectedUser.avatar?(q(),N(ue,ft(vt({key:0},c.$attrs)),{default:d(()=>[mt(c.$slots,"img"),n(We,{src:u(e).selectedUser.avatar,fit:"contain",ratio:1},null,8,["src"])]),_:3},16)):(q(),N(ue,{key:1,style:{"background-color":"rgb(43, 189, 226)"}},{default:d(()=>{var a,l;return[k(C((((a=u(e).selectedUser.givenName)==null?void 0:a.charAt(0))||"").toUpperCase())+C((((l=u(e).selectedUser.surname)==null?void 0:l.charAt(0))||"").toUpperCase()),1)]}),_:1}))}}),Xt=W({__name:"UserInfoCard",setup(t){const e=H(),c=se();return(m,a)=>(q(),N(F,{style:{width:"20rem"}},{default:d(()=>[n(T,{class:"row"},{default:d(()=>[n(Ut),n(qt,{dark:"",size:"md",label:u(e).selectedUser.status,color:u(e).selectedUser.status==="Active"?"green":u(e).selectedUser.status==="Pending"?"orange":"grey"},null,8,["label","color"])]),_:1}),n(T,{class:"column items-center"},{default:d(()=>[n(Rt,{size:"120px"})]),_:1}),n(T,null,{default:d(()=>[n(P,{class:"text-h3 text-center"},{default:d(()=>{var l;return[k(C((l=u(e).selectedUser)==null?void 0:l.givenName),1)]}),_:1}),n(P,{class:"text-h4 text-center"},{default:d(()=>{var l;return[k(C((l=u(e).selectedUser)==null?void 0:l.surname),1)]}),_:1})]),_:1}),n(T,{class:"bg-blue-2"},{default:d(()=>[n(ie,null,{default:d(()=>[n(L,{avatar:""},{default:d(()=>[n(P,null,{default:d(()=>[k("Group")]),_:1}),n(P,{class:"text-h4"},{default:d(()=>[k(C(u(e).selectedUser.groupId?u(c).groups[u(e).selectedUser.groupId].name:"No Group"),1)]),_:1})]),_:1})]),_:1})]),_:1}),j("pre",null,"userStore.statusOptions: "+C(u(e).statusOptions),1),j("pre",null,"userStore.user: "+C(u(e).user)+" ",1),j("pre",null,`userStore.selectedUser:
    `+C(u(e).selectedUser),1)]),_:1}))}}),qe={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Yt=Object.keys(qe);qe.all=!0;function Qe(t){const e={};for(const c of Yt)t[c]===!0&&(e[c]=!0);return Object.keys(e).length===0?qe:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}const Gt=["INPUT","TEXTAREA"];function ze(t,e){return e.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof e.handler=="function"&&Gt.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(e.uid)===-1)}function we(t,e,c){const m=ke(t);let a,l=m.left-e.event.x,f=m.top-e.event.y,v=Math.abs(l),s=Math.abs(f);const o=e.direction;o.horizontal===!0&&o.vertical!==!0?a=l<0?"left":"right":o.horizontal!==!0&&o.vertical===!0?a=f<0?"up":"down":o.up===!0&&f<0?(a="up",v>s&&(o.left===!0&&l<0?a="left":o.right===!0&&l>0&&(a="right"))):o.down===!0&&f>0?(a="down",v>s&&(o.left===!0&&l<0?a="left":o.right===!0&&l>0&&(a="right"))):o.left===!0&&l<0?(a="left",v<s&&(o.up===!0&&f<0?a="up":o.down===!0&&f>0&&(a="down"))):o.right===!0&&l>0&&(a="right",v<s&&(o.up===!0&&f<0?a="up":o.down===!0&&f>0&&(a="down")));let i=!1;if(a===void 0&&c===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};a=e.event.lastDir,i=!0,a==="left"||a==="right"?(m.left-=l,v=0,l=0):(m.top-=f,s=0,f=0)}return{synthetic:i,payload:{evt:t,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:m,direction:a,isFirst:e.event.isFirst,isFinal:c===!0,duration:Date.now()-e.event.time,distance:{x:v,y:s},offset:{x:l,y:f},delta:{x:m.left-e.event.lastX,y:m.top-e.event.lastY}}}}let Kt=0;var Ce=gt({name:"touch-pan",beforeMount(t,{value:e,modifiers:c}){if(c.mouse!==!0&&Z.has.touch!==!0)return;function m(l,f){c.mouse===!0&&f===!0?yt(l):(c.stop===!0&&pe(l),c.prevent===!0&&xe(l))}const a={uid:"qvtp_"+Kt++,handler:e,modifiers:c,direction:Qe(c),noop:ht,mouseStart(l){ze(l,a)&&bt(l)&&(re(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(l,!0))},touchStart(l){if(ze(l,a)){const f=l.target;re(a,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","passiveCapture"],[f,"touchend","end","passiveCapture"]]),a.start(l)}},start(l,f){if(Z.is.firefox===!0&&ye(t,!0),a.lastEvt=l,f===!0||c.stop===!0){if(a.direction.all!==!0&&(f!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const o=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&xe(o),l.cancelBubble===!0&&pe(o),Object.assign(o,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[a.uid]:l.qClonedBy.concat(a.uid)}),a.initialEvent={target:l.target,event:o}}pe(l)}const{left:v,top:s}=ke(l);a.event={x:v,y:s,time:Date.now(),mouse:f===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:v,lastY:s}},move(l){if(a.event===void 0)return;const f=ke(l),v=f.left-a.event.x,s=f.top-a.event.y;if(v===0&&s===0)return;a.lastEvt=l;const o=a.event.mouse===!0,i=()=>{m(l,o);let S;c.preserveCursor!==!0&&c.preservecursor!==!0&&(S=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),o===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Vt(),a.styleCleanup=y=>{if(a.styleCleanup=void 0,S!==void 0&&(document.documentElement.style.cursor=S),document.body.classList.remove("non-selectable"),o===!0){const E=()=>{document.body.classList.remove("no-pointer-events--children")};y!==void 0?setTimeout(()=>{E(),y()},50):E()}else y!==void 0&&y()}};if(a.event.detected===!0){a.event.isFirst!==!0&&m(l,a.event.mouse);const{payload:S,synthetic:y}=we(l,a,!1);S!==void 0&&(a.handler(S)===!1?a.end(l):(a.styleCleanup===void 0&&a.event.isFirst===!0&&i(),a.event.lastX=S.position.left,a.event.lastY=S.position.top,a.event.lastDir=y===!0?void 0:S.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||o===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){i(),a.event.detected=!0,a.move(l);return}const x=Math.abs(v),_=Math.abs(s);x!==_&&(a.direction.horizontal===!0&&x>_||a.direction.vertical===!0&&x<_||a.direction.up===!0&&x<_&&s<0||a.direction.down===!0&&x<_&&s>0||a.direction.left===!0&&x>_&&v<0||a.direction.right===!0&&x>_&&v>0?(a.event.detected=!0,a.move(l)):a.end(l,!0))},end(l,f){if(a.event!==void 0){if(_e(a,"temp"),Z.is.firefox===!0&&ye(t,!1),f===!0)a.styleCleanup!==void 0&&a.styleCleanup(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(we(l===void 0?a.lastEvt:l,a).payload);const{payload:v}=we(l===void 0?a.lastEvt:l,a,!0),s=()=>{a.handler(v)};a.styleCleanup!==void 0?a.styleCleanup(s):s()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(t.__qtouchpan=a,c.mouse===!0){const l=c.mouseCapture===!0||c.mousecapture===!0?"Capture":"";re(a,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}Z.has.touch===!0&&re(a,"main",[[t,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const c=t.__qtouchpan;c!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&c.end(),c.handler=e.value),c.direction=Qe(e.modifiers))},beforeUnmount(t){const e=t.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),_e(e,"main"),_e(e,"temp"),Z.is.firefox===!0&&ye(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchpan)}});const Oe=150;var He=De({name:"QDrawer",inheritAttrs:!1,props:{...$t,...Ot,side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Bt,"onLayout","miniState"],setup(t,{slots:e,emit:c,attrs:m}){const a=Ct(),{proxy:{$q:l}}=a,f=Dt(t,l),{preventBodyScroll:v}=Mt(),{registerTimeout:s,removeTimeout:o}=Nt(),i=pt(wt,Se);if(i===Se)return console.error("QDrawer needs to be child of QLayout"),Se;let x,_=null,S;const y=V(t.behavior==="mobile"||t.behavior!=="desktop"&&i.totalWidth.value<=t.breakpoint),E=b(()=>t.mini===!0&&y.value!==!0),U=b(()=>E.value===!0?t.miniWidth:t.width),p=V(t.showIfAbove===!0&&y.value===!1?!0:t.modelValue===!0),ee=b(()=>t.persistent!==!0&&(y.value===!0||Re.value===!0));function G(r,g){if(de(),r!==!1&&i.animate(),M(0),y.value===!0){const B=i.instances[ae.value];B!==void 0&&B.belowBreakpoint===!0&&B.hide(!1),O(1),i.isContainer.value!==!0&&v(!0)}else O(0),r!==!1&&ge(!1);s(()=>{r!==!1&&ge(!0),g!==!0&&c("show",r)},Oe)}function te(r,g){h(),r!==!1&&i.animate(),O(0),M(R.value*U.value),he(),g!==!0?s(()=>{c("hide",r)},Oe):o()}const{show:K,hide:z}=xt({showing:p,hideOnRouteChange:ee,handleShow:G,handleHide:te}),{addToHistory:de,removeFromHistory:h}=Tt(p,z,ee),Q={belowBreakpoint:y,hide:z},$=b(()=>t.side==="right"),R=b(()=>(l.lang.rtl===!0?-1:1)*($.value===!0?1:-1)),Ve=V(0),X=V(!1),ce=V(!1),$e=V(U.value*R.value),ae=b(()=>$.value===!0?"left":"right"),fe=b(()=>p.value===!0&&y.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:U.value:0),ve=b(()=>t.overlay===!0||t.miniToOverlay===!0||i.view.value.indexOf($.value?"R":"L")>-1||l.platform.is.ios===!0&&i.isContainer.value===!0),J=b(()=>t.overlay===!1&&p.value===!0&&y.value===!1),Re=b(()=>t.overlay===!0&&p.value===!0&&y.value===!1),Xe=b(()=>"fullscreen q-drawer__backdrop"+(p.value===!1&&X.value===!1?" hidden":"")),Ye=b(()=>({backgroundColor:`rgba(0,0,0,${Ve.value*.4})`})),Be=b(()=>$.value===!0?i.rows.value.top[2]==="r":i.rows.value.top[0]==="l"),Ge=b(()=>$.value===!0?i.rows.value.bottom[2]==="r":i.rows.value.bottom[0]==="l"),Ke=b(()=>{const r={};return i.header.space===!0&&Be.value===!1&&(ve.value===!0?r.top=`${i.header.offset}px`:i.header.space===!0&&(r.top=`${i.header.size}px`)),i.footer.space===!0&&Ge.value===!1&&(ve.value===!0?r.bottom=`${i.footer.offset}px`:i.footer.space===!0&&(r.bottom=`${i.footer.size}px`)),r}),Je=b(()=>{const r={width:`${U.value}px`,transform:`translateX(${$e.value}px)`};return y.value===!0?r:Object.assign(r,Ke.value)}),Ze=b(()=>"q-drawer__content fit "+(i.isContainer.value!==!0?"scroll":"overflow-auto")),et=b(()=>`q-drawer q-drawer--${t.side}`+(ce.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(f.value===!0?" q-drawer--dark q-dark":"")+(X.value===!0?" no-transition":p.value===!0?"":" q-layout--prevent-focus")+(y.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${E.value===!0?"mini":"standard"}`+(ve.value===!0||J.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(Be.value===!0?" q-drawer--top-padding":""))),tt=b(()=>{const r=l.lang.rtl===!0?t.side:ae.value;return[[Ce,nt,void 0,{[r]:!0,mouse:!0}]]}),at=b(()=>{const r=l.lang.rtl===!0?ae.value:t.side;return[[Ce,Ne,void 0,{[r]:!0,mouse:!0}]]}),lt=b(()=>{const r=l.lang.rtl===!0?ae.value:t.side;return[[Ce,Ne,void 0,{[r]:!0,mouse:!0,mouseAllDir:!0}]]});function me(){ut(y,t.behavior==="mobile"||t.behavior!=="desktop"&&i.totalWidth.value<=t.breakpoint)}w(y,r=>{r===!0?(x=p.value,p.value===!0&&z(!1)):t.overlay===!1&&t.behavior!=="mobile"&&x!==!1&&(p.value===!0?(M(0),O(0),he()):K(!1))}),w(()=>t.side,(r,g)=>{i.instances[g]===Q&&(i.instances[g]=void 0,i[g].space=!1,i[g].offset=0),i.instances[r]=Q,i[r].size=U.value,i[r].space=J.value,i[r].offset=fe.value}),w(i.totalWidth,()=>{(i.isContainer.value===!0||document.qScrollPrevented!==!0)&&me()}),w(()=>t.behavior+t.breakpoint,me),w(i.isContainer,r=>{p.value===!0&&v(r!==!0),r===!0&&me()}),w(i.scrollbarWidth,()=>{M(p.value===!0?0:void 0)}),w(fe,r=>{D("offset",r)}),w(J,r=>{c("onLayout",r),D("space",r)}),w($,()=>{M()}),w(U,r=>{M(),be(t.miniToOverlay,r)}),w(()=>t.miniToOverlay,r=>{be(r,U.value)}),w(()=>l.lang.rtl,()=>{M()}),w(()=>t.mini,()=>{t.noMiniAnimation||t.modelValue===!0&&(rt(),i.animate())}),w(E,r=>{c("miniState",r)});function M(r){r===void 0?Te(()=>{r=p.value===!0?0:U.value,M(R.value*r)}):(i.isContainer.value===!0&&$.value===!0&&(y.value===!0||Math.abs(r)===U.value)&&(r+=R.value*i.scrollbarWidth.value),$e.value=r)}function O(r){Ve.value=r}function ge(r){const g=r===!0?"remove":i.isContainer.value!==!0?"add":"";g!==""&&document.body.classList[g]("q-body--drawer-toggle")}function rt(){_!==null&&clearTimeout(_),a.proxy&&a.proxy.$el&&a.proxy.$el.classList.add("q-drawer--mini-animate"),ce.value=!0,_=setTimeout(()=>{_=null,ce.value=!1,a&&a.proxy&&a.proxy.$el&&a.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function nt(r){if(p.value!==!1)return;const g=U.value,B=ne(r.distance.x,0,g);if(r.isFinal===!0){B>=Math.min(75,g)===!0?K():(i.animate(),O(0),M(R.value*g)),X.value=!1;return}M((l.lang.rtl===!0?$.value!==!0:$.value)?Math.max(g-B,0):Math.min(0,B-g)),O(ne(B/g,0,1)),r.isFirst===!0&&(X.value=!0)}function Ne(r){if(p.value!==!0)return;const g=U.value,B=r.direction===t.side,le=(l.lang.rtl===!0?B!==!0:B)?ne(r.distance.x,0,g):0;if(r.isFinal===!0){Math.abs(le)<Math.min(75,g)===!0?(i.animate(),O(1),M(0)):z(),X.value=!1;return}M(R.value*le),O(ne(1-le/g,0,1)),r.isFirst===!0&&(X.value=!0)}function he(){v(!1),ge(!0)}function D(r,g){i.update(t.side,r,g)}function ut(r,g){r.value!==g&&(r.value=g)}function be(r,g){D("size",r===!0?t.miniWidth:g)}return i.instances[t.side]=Q,be(t.miniToOverlay,U.value),D("space",J.value),D("offset",fe.value),t.showIfAbove===!0&&t.modelValue!==!0&&p.value===!0&&t["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!0),_t(()=>{c("onLayout",J.value),c("miniState",E.value),x=t.showIfAbove===!0;const r=()=>{(p.value===!0?G:te)(!1,!0)};if(i.totalWidth.value!==0){Te(r);return}S=w(i.totalWidth,()=>{S(),S=void 0,p.value===!1&&t.showIfAbove===!0&&y.value===!1?K(!1):r()})}),Le(()=>{S!==void 0&&S(),_!==null&&(clearTimeout(_),_=null),p.value===!0&&he(),i.instances[t.side]===Q&&(i.instances[t.side]=void 0,D("size",0),D("offset",0),D("space",!1))}),()=>{const r=[];y.value===!0&&(t.noSwipeOpen===!1&&r.push(St(A("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),tt.value)),r.push(Me("div",{ref:"backdrop",class:Xe.value,style:Ye.value,"aria-hidden":"true",onClick:z},void 0,"backdrop",t.noSwipeBackdrop!==!0&&p.value===!0,()=>lt.value)));const g=E.value===!0&&e.mini!==void 0,B=[A("div",{...m,key:""+g,class:[Ze.value,m.class]},g===!0?e.mini():Pe(e.default))];return t.elevated===!0&&p.value===!0&&B.push(A("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),r.push(Me("aside",{ref:"content",class:et.value,style:Je.value},B,"contentclose",t.noSwipeClose!==!0&&y.value===!0,()=>at.value)),A("div",{class:"q-drawer-container"},r)}}});const Jt=j("br",null,null,-1),Zt=W({__name:"UserCreateDrawer",setup(t){const e=H(),c=se(),m=V({subject:"",body:""});w(()=>({givenName:e.user.givenName,surname:e.user.surname}),l=>{m.value.subject=`Onboarding ${l.givenName} ${l.surname}`,m.value.body=`Please add ${l.givenName} to the Active Directory.
Name: ${l.givenName}
Surname: ${l.surname}

Thanks

This email has been sent from FileMaker by ${c.user.fullName}`},{immediate:!0});const a=()=>{e.user={givenName:"",surname:"",status:"Pending",groupId:null}};return(l,f)=>(q(),N(He,{modelValue:u(e).createMode,"onUpdate:modelValue":f[5]||(f[5]=v=>u(e).createMode=v),onBeforeShow:f[6]||(f[6]=v=>a()),width:384,bordered:"",overlay:"",side:"right"},{default:d(()=>[n(F,null,{default:d(()=>[n(T,null,{default:d(()=>[n(Ue,null,{default:d(()=>[k(" Create User ")]),_:1}),n(P,{class:"text-body2"},{default:d(()=>[k(" A new User will be created and, an email request to add him/her to Active Directory will be send ")]),_:1}),Jt,n(oe,{dense:"",label:"Create User and Send Request",icon:"person_add",color:"primary",onClick:f[0]||(f[0]=v=>u(e).createUser(m.value)),disable:!u(e).user.givenName||!u(e).user.surname},null,8,["disable"])]),_:1}),n(T,null,{default:d(()=>[n(I,{modelValue:u(e).user.givenName,"onUpdate:modelValue":f[1]||(f[1]=v=>u(e).user.givenName=v),label:"Name",rules:[v=>!!v||"Name is required"]},null,8,["modelValue","rules"]),n(I,{modelValue:u(e).user.surname,"onUpdate:modelValue":f[2]||(f[2]=v=>u(e).user.surname=v),label:"Surname",rules:[v=>!!v||"Surname is required"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),n(F,{class:"bg-blue-2"},{default:d(()=>[n(T,null,{default:d(()=>[n(ie,{style:{"background-color":"hsl(200, 50%, 90%)"}},{default:d(()=>[n(L,{avatar:""},{default:d(()=>[n(Y,{name:"mail"})]),_:1}),n(L,null,{default:d(()=>[k(C(u(c).bookingsSupportEmail),1)]),_:1})]),_:1}),n(I,{modelValue:m.value.subject,"onUpdate:modelValue":f[3]||(f[3]=v=>m.value.subject=v),label:"Subject"},null,8,["modelValue"]),n(I,{modelValue:m.value.body,"onUpdate:modelValue":f[4]||(f[4]=v=>m.value.body=v),label:"Body",type:"textarea",autogrow:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ea=W({__name:"UserUpdateDrawer",setup(t){const e=H(),c=se(),m=V({subject:"",body:""}),a=V(320),l=()=>{e.user=JSON.parse(JSON.stringify(e.selectedUser))},f=()=>{if(e.selectedUser.status!=="Inactive"&&e.user.status==="Inactive"){e.user.groupId=null;const v=e.user.email;e.user.email=null,a.value=720,m.value.subject=`Deauthorize ${e.user.givenName} ${e.user.surname}`,m.value.body=`Please remove ${e.user.givenName} from the Active Directory.
Name: ${e.user.givenName}
Surname: ${e.user.surname}
Email: ${v}
 
Thanks
 
This email has been sent from FileMaker by ${c.user.fullName}`}else a.value=320};return(v,s)=>(q(),N(He,{modelValue:u(e).editMode,"onUpdate:modelValue":s[11]||(s[11]=o=>u(e).editMode=o),onBeforeShow:s[12]||(s[12]=o=>l()),onBeforeHide:s[13]||(s[13]=o=>a.value=320),width:a.value,bordered:"",overlay:"",side:"right",class:"row"},{default:d(()=>[n(F,{class:"col"},{default:d(()=>[n(T,{horizontal:""},{default:d(()=>[n(Ue,null,{default:d(()=>[k(" Edit User ")]),_:1}),n(oe,{dense:"",label:"Save Changes",icon:"save",color:"primary",onClick:s[0]||(s[0]=o=>u(e).updateUser(m.value)),disable:u(e).user.status==="Active"&&!u(e).user.groupId},null,8,["disable"])]),_:1}),n(T,null,{default:d(()=>[n(I,{modelValue:u(e).user.givenName,"onUpdate:modelValue":s[1]||(s[1]=o=>u(e).user.givenName=o),label:"Name"},null,8,["modelValue"]),n(I,{modelValue:u(e).user.surname,"onUpdate:modelValue":s[2]||(s[2]=o=>u(e).user.surname=o),label:"Surname"},null,8,["modelValue"]),n(I,{modelValue:u(e).user.loginName,"onUpdate:modelValue":s[3]||(s[3]=o=>u(e).user.loginName=o),label:"Login"},null,8,["modelValue"]),n(I,{modelValue:u(e).user.email,"onUpdate:modelValue":s[4]||(s[4]=o=>u(e).user.email=o),label:"Email",type:"email",rules:[o=>!o||/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o)||"Invalid email"]},null,8,["modelValue","rules"]),n(I,{modelValue:u(e).user.note,"onUpdate:modelValue":s[5]||(s[5]=o=>u(e).user.note=o),label:"Note",type:"textarea"},null,8,["modelValue"])]),_:1}),n(T,{style:{"background-color":"rgb(197, 198, 198)","border-radius":"4%"}},{default:d(()=>[n(Ie,{modelValue:u(e).user.status,"onUpdate:modelValue":[s[6]||(s[6]=o=>u(e).user.status=o),s[7]||(s[7]=o=>f())],label:"Status",options:u(e).statusOptions},null,8,["modelValue","options"]),n(Ie,{modelValue:u(e).user.groupId,"onUpdate:modelValue":s[8]||(s[8]=o=>u(e).user.groupId=o),"emit-value":"","map-options":"",label:"Group",clearable:"",disable:u(e).user.status!=="Active",options:u(c).groupsOptions},null,8,["modelValue","disable","options"])]),_:1}),u(e).user.status==="Active"&&(u(e).user.groupId===null||u(e).user.groupId==="")?(q(),N(T,{key:0},{default:d(()=>[n(Ee,{class:"bg-orange text-white",rounded:""},{avatar:d(()=>[n(Y,{name:"warning"})]),default:d(()=>[k(" Select a Group before saving changes ")]),_:1})]),_:1})):Ae("",!0)]),_:1}),u(e).selectedUser.status!=="Inactive"&&u(e).user.status==="Inactive"?(q(),N(F,{key:0,class:"col"},{default:d(()=>[n(T,null,{default:d(()=>[n(Ee,{class:"bg-red text-white",rounded:""},{avatar:d(()=>[n(Y,{name:"warning"})]),default:d(()=>[k(" You are going to inactivate this user, the email and the group associated will be removed and an email to unauthorized the user will be sent. ")]),_:1})]),_:1}),n(F,{class:"bg-blue-2"},{default:d(()=>[n(T,null,{default:d(()=>[n(ie,{style:{"background-color":"hsl(200, 50%, 90%)"}},{default:d(()=>[n(L,{avatar:""},{default:d(()=>[n(Y,{name:"mail"})]),_:1}),n(L,null,{default:d(()=>[k(C(u(c).bookingsSupportEmail),1)]),_:1})]),_:1}),n(I,{modelValue:m.value.subject,"onUpdate:modelValue":s[9]||(s[9]=o=>m.value.subject=o),label:"Subject"},null,8,["modelValue"]),n(I,{modelValue:m.value.body,"onUpdate:modelValue":s[10]||(s[10]=o=>m.value.body=o),label:"Body",type:"textarea",autogrow:"",hint:"The email can be personalized before sending it."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):Ae("",!0)]),_:1},8,["modelValue","width"]))}}),ta={class:"row"},aa={class:"col-3"},la={class:"col-9"},va=W({__name:"UsersPage",setup(t){const e=H(),c=se();return kt(()=>{console.log("Users \xBB onBeforeMount"),c.readSettings(),e.readAllUsers()}),(m,a)=>(q(),je(Fe,null,[n(Zt),n(ea),n(Qt,{class:"row-container"},{default:d(()=>[n(Et,null,{default:d(()=>[n(ot,null,{default:d(()=>[n(Ue,null,{default:d(()=>[k("Users \xBB "+C(u(e).selectedUser.givenName)+" "+C(u(e).selectedUser.surname),1)]),_:1}),n(At,null,{default:d(()=>[n(oe,{icon:u(e).createMode?"close":"add",label:u(e).createMode?"Cancel Create":"Create User",onClick:a[0]||(a[0]=l=>{(u(e).createMode=!u(e).createMode)&&(u(e).editMode=!1)})},null,8,["icon","label"]),n(oe,{icon:u(e).editMode?"close":"edit",label:u(e).editMode?"Cancel Edit":"Edit User",onClick:a[1]||(a[1]=l=>{(u(e).editMode=!u(e).editMode)&&(u(e).createMode=!1)})},null,8,["icon","label"])]),_:1})]),_:1})]),_:1}),j("div",ta,[j("div",aa,[n(Ht)]),j("div",la,[n(Xt),k(" settingsStore.user "+C(u(c).user),1)])])]),_:1})],64))}});export{va as default};
