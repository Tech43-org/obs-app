import{Q as G}from"./QToolbarTitle.dbc85233.js";import{a as P,i as ce,e as z,t as $,d as f,w as S,k as fe,ar as ve,h as v,l as me,j as Z,as as ge,A as be,f as pe,at as he,O as N,au as V,S as ee,_ as ye,ad as _e,u as xe,an as ke,C as I,ah as T,F as s,E as i,aj as F,ae as C,ak as L,af as c,aa as Ve,ai as R,ag as j,ao as D,H as M,D as K}from"./index.f245b6f2.js";import{Q as Ce}from"./QToolbar.dde822e9.js";import{Q as Le}from"./QResizeObserver.6d3a3b5d.js";import{a as qe,u as Se,b as Ie,i as Qe,Q as H,d as q,f as J,g as W,h as X,e as Y}from"./QList.952330e2.js";import{Q as Be}from"./QPage.d085de33.js";var we=P({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(l,{slots:t,emit:e}){const{proxy:{$q:g}}=Z(),a=ce(me,z);if(a===z)return console.error("QHeader needs to be child of QLayout"),z;const d=$(parseInt(l.heightHint,10)),o=$(!0),u=f(()=>l.reveal===!0||a.view.value.indexOf("H")>-1||g.platform.is.ios&&a.isContainer.value===!0),y=f(()=>{if(l.modelValue!==!0)return 0;if(u.value===!0)return o.value===!0?d.value:0;const n=d.value-a.scroll.value.position;return n>0?n:0}),h=f(()=>l.modelValue!==!0||u.value===!0&&o.value!==!0),A=f(()=>l.modelValue===!0&&h.value===!0&&l.reveal===!0),E=f(()=>"q-header q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-top"+(l.bordered===!0?" q-header--bordered":"")+(h.value===!0?" q-header--hidden":"")+(l.modelValue!==!0?" q-layout--prevent-focus":"")),_=f(()=>{const n=a.rows.value.top,p={};return n[0]==="l"&&a.left.space===!0&&(p[g.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),n[2]==="r"&&a.right.space===!0&&(p[g.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),p});function b(n,p){a.update("header",n,p)}function m(n,p){n.value!==p&&(n.value=p)}function k({height:n}){m(d,n),b("size",n)}function B(n){A.value===!0&&m(o,!0),e("focusin",n)}S(()=>l.modelValue,n=>{b("space",n),m(o,!0),a.animate()}),S(y,n=>{b("offset",n)}),S(()=>l.reveal,n=>{n===!1&&m(o,l.modelValue)}),S(o,n=>{a.animate(),e("reveal",n)}),S(a.scroll,n=>{l.reveal===!0&&m(o,n.direction==="up"||n.position<=l.revealOffset||n.position-n.inflectionPoint<100)});const w={};return a.instances.header=w,l.modelValue===!0&&b("size",d.value),b("space",l.modelValue),b("offset",y.value),fe(()=>{a.instances.header===w&&(a.instances.header=void 0,b("size",0),b("offset",0),b("space",!1))}),()=>{const n=ve(t.default,[]);return l.elevated===!0&&n.push(v("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),n.push(v(Le,{debounce:0,onResize:k})),v("header",{class:E.value,style:_.value,onFocusin:B},n)}}});function Ge(l,t){const e=$(null),g=f(()=>l.disable===!0?null:v("span",{ref:e,class:"no-outline",tabindex:-1}));function a(d){const o=t.value;d!==void 0&&d.type.indexOf("key")===0?o!==null&&document.activeElement!==o&&o.contains(document.activeElement)===!0&&o.focus():e.value!==null&&(d===void 0||o!==null&&o.contains(d.target)===!0)&&e.value.focus()}return{refocusTargetEl:g,refocusTarget:a}}var $e={xs:30,sm:35,md:40,lg:50,xl:60};const te={...Se,...he,...Ie,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:l=>l==="tf"||l==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},le=["update:modelValue"];function ae(l,t){const{props:e,slots:g,emit:a,proxy:d}=Z(),{$q:o}=d,u=qe(e,o),y=$(null),{refocusTargetEl:h,refocusTarget:A}=Ge(e,y),E=ge(e,$e),_=f(()=>e.val!==void 0&&Array.isArray(e.modelValue)),b=f(()=>{const r=V(e.val);return _.value===!0?e.modelValue.findIndex(x=>V(x)===r):-1}),m=f(()=>_.value===!0?b.value>-1:V(e.modelValue)===V(e.trueValue)),k=f(()=>_.value===!0?b.value===-1:V(e.modelValue)===V(e.falseValue)),B=f(()=>m.value===!1&&k.value===!1),w=f(()=>e.disable===!0?-1:e.tabindex||0),n=f(()=>`q-${l} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(u.value===!0?` q-${l}--dark`:"")+(e.dense===!0?` q-${l}--dense`:"")+(e.leftLabel===!0?" reverse":"")),p=f(()=>{const r=m.value===!0?"truthy":k.value===!0?"falsy":"indet",x=e.color!==void 0&&(e.keepColor===!0||(l==="toggle"?m.value===!0:k.value!==!0))?` text-${e.color}`:"";return`q-${l}__inner relative-position non-selectable q-${l}__inner--${r}${x}`}),ue=f(()=>{const r={type:"checkbox"};return e.name!==void 0&&Object.assign(r,{".checked":m.value,"^checked":m.value===!0?"checked":void 0,name:e.name,value:_.value===!0?e.val:e.trueValue}),r}),oe=Qe(ue),ne=f(()=>{const r={tabindex:w.value,role:l==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":B.value===!0?"mixed":m.value===!0?"true":"false"};return e.disable===!0&&(r["aria-disabled"]="true"),r});function O(r){r!==void 0&&(N(r),A(r)),e.disable!==!0&&a("update:modelValue",se(),r)}function se(){if(_.value===!0){if(m.value===!0){const r=e.modelValue.slice();return r.splice(b.value,1),r}return e.modelValue.concat([e.val])}if(m.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(k.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function re(r){(r.keyCode===13||r.keyCode===32)&&N(r)}function ie(r){(r.keyCode===13||r.keyCode===32)&&O(r)}const de=t(m,B);return Object.assign(d,{toggle:O}),()=>{const r=de();e.disable!==!0&&oe(r,"unshift",` q-${l}__native absolute q-ma-none q-pa-none`);const x=[v("div",{class:p.value,style:E.value,"aria-hidden":"true"},r)];h.value!==null&&x.push(h.value);const U=e.label!==void 0?be(g.default,[e.label]):pe(g.default);return U!==void 0&&x.push(v("div",{class:`q-${l}__label q-anchor--skip`},U)),v("div",{ref:y,class:n.value,...ne.value,onClick:O,onKeydown:re,onKeyup:ie},x)}}var Ae=P({name:"QToggle",props:{...te,icon:String,iconColor:String},emits:le,setup(l){function t(e,g){const a=f(()=>(e.value===!0?l.checkedIcon:g.value===!0?l.indeterminateIcon:l.uncheckedIcon)||l.icon),d=f(()=>e.value===!0?l.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[v(ee,{name:a.value,color:d.value})]:void 0)]}return ae("toggle",t)}});const Ee=v("div",{key:"svg",class:"q-checkbox__bg absolute"},[v("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[v("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),v("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Q=P({name:"QCheckbox",props:te,emits:le,setup(l){function t(e,g){const a=f(()=>(e.value===!0?l.checkedIcon:g.value===!0?l.indeterminateIcon:l.uncheckedIcon)||null);return()=>a.value!==null?[v("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[v(ee,{class:"q-checkbox__icon",name:a.value})])]:[Ee]}return ae("checkbox",t)}});const Oe=_e({__name:"AccessControlEditorPage",setup(l){const t=xe();ke(()=>{console.log("UAC Editor \xBB onBeforeMount"),t.readSettings(),t.groups&&t.groups.length>0&&(t.selectedGroup=t.groups[0])});const e=d=>{if(t.selectedLayout=d,!t.selectedGroup.layouts.some(u=>u.id===d.id)){const u={id:d.id,hasAccess:!1,create:!1,read:!1,update:!1,delete:!1,finance:!1};t.selectedGroup.layouts.push(u)}},g=d=>{var o;t.selectedGroup=d,(o=t.layouts)==null||o.forEach(u=>{if(!t.selectedGroup.layouts.some(h=>h.id===u.id)){const h={id:u.id,hasAccess:!1,create:!1,read:!1,update:!1,delete:!1,finance:!1};t.selectedGroup.layouts.push(h)}})},a=d=>t.selectedGroup.layouts.find(o=>o.id===d)||{hasAccess:!1,create:!1,read:!1,update:!1,delete:!1,finance:!1};return(d,o)=>(I(),T(F,null,[s(we,null,{default:i(()=>[s(Ce,null,{default:i(()=>[s(G,null,{default:i(()=>{var u;return[C("Access Control Editor \xBB "+L((u=c(t).selectedGroup)==null?void 0:u.name)+" \xBB "+L(c(t).selectedLayout.name),1)]}),_:1}),s(Ve,{dense:"",icon:"save",label:"Save",onClick:o[0]||(o[0]=u=>c(t).saveGroup()),align:"right"})]),_:1})]),_:1}),s(Be,{class:"flex"},{default:i(()=>[s(H,{style:{width:"16rem"}},{default:i(()=>[s(q,null,{default:i(()=>[s(G,null,{default:i(()=>[C("Groups")]),_:1})]),_:1}),s(J,null,{default:i(()=>[(I(!0),T(F,null,R(c(t).groups,u=>(I(),K(W,{key:u.id,clickable:"",onClick:y=>g(u),class:"bg-grey-2 menu",active:c(t).selectedGroup===u,"active-class":"menu-active"},{default:i(()=>[s(X,null,{default:i(()=>[s(Y,{class:"text-h5"},{default:i(()=>[C(L(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}),j(s(H,{style:{width:"16rem"}},{default:i(()=>[s(q,null,{default:i(()=>[s(G,null,{default:i(()=>[C("Layouts")]),_:1})]),_:1}),s(J,null,{default:i(()=>[(I(!0),T(F,null,R(c(t).layouts,u=>(I(),K(W,{key:u.id,class:"bg-grey-2 menu",clickable:"",onClick:y=>e(u),active:c(t).selectedLayout===u,"active-class":"menu-active"},{default:i(()=>[s(X,null,{default:i(()=>[s(Y,{class:"text-h5"},{default:i(()=>[C(L(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1},512),[[D,c(t).selectedGroup.id!==""]]),j(s(H,{style:{width:"16rem"}},{default:i(()=>[s(q,null,{default:i(()=>[s(G,null,{default:i(()=>[C("Options")]),_:1})]),_:1}),s(q,null,{default:i(()=>[s(Ae,{modelValue:a(c(t).selectedLayout.id).hasAccess,"onUpdate:modelValue":o[1]||(o[1]=u=>a(c(t).selectedLayout.id).hasAccess=u),label:"Has Access"},null,8,["modelValue"])]),_:1}),s(q,null,{default:i(()=>[s(Q,{modelValue:a(c(t).selectedLayout.id).create,"onUpdate:modelValue":o[2]||(o[2]=u=>a(c(t).selectedLayout.id).create=u),label:"Create"},null,8,["modelValue"]),s(Q,{modelValue:a(c(t).selectedLayout.id).read,"onUpdate:modelValue":o[3]||(o[3]=u=>a(c(t).selectedLayout.id).read=u),label:"Read"},null,8,["modelValue"]),s(Q,{modelValue:a(c(t).selectedLayout.id).update,"onUpdate:modelValue":o[4]||(o[4]=u=>a(c(t).selectedLayout.id).update=u),label:"Update"},null,8,["modelValue"]),s(Q,{modelValue:a(c(t).selectedLayout.id).delete,"onUpdate:modelValue":o[5]||(o[5]=u=>a(c(t).selectedLayout.id).delete=u),label:"Delete"},null,8,["modelValue"])]),_:1}),s(q,null,{default:i(()=>[s(Q,{modelValue:a(c(t).selectedLayout.id).finance,"onUpdate:modelValue":o[6]||(o[6]=u=>a(c(t).selectedLayout.id).finance=u),label:"Finance"},null,8,["modelValue"])]),_:1})]),_:1},512),[[D,c(t).selectedLayout.id!==""]]),M("pre",null,"Group: "+L(c(t).selectedGroup),1),M("pre",null,"Layout: "+L(c(t).selectedLayout),1)]),_:1})],64))}});var Ne=ye(Oe,[["__scopeId","data-v-4a731702"]]);export{Ne as default};
