import{Q as de,a as A}from"./QToolbar.42478bcf.js";import{a as P,i as fe,e as G,t as w,d as f,w as S,k as ve,ar as me,h as m,l as ge,j as Z,as as be,A as he,f as pe,at as _e,O as N,au as x,S as ee,_ as ye,ad as ke,u as Ve,ao as xe,C as B,ah as T,F as o,E as i,aj as F,ae as C,ak as q,af as v,aa as Ce,ai as R,ag as j,an as D,H as M,D as K}from"./index.c03bf45e.js";import{Q as qe}from"./QResizeObserver.23541667.js";import{a as Ie,u as Se,b as Be,i as Qe,Q as H,d as I,f as J,g as W,h as X,e as Y}from"./QList.af0705c7.js";import{Q as we}from"./QPage.9d5eac18.js";var Le=P({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:l,emit:e}){const{proxy:{$q:c}}=Z(),s=fe(ge,G);if(s===G)return console.error("QHeader needs to be child of QLayout"),G;const d=w(parseInt(t.heightHint,10)),u=w(!0),n=f(()=>t.reveal===!0||s.view.value.indexOf("H")>-1||c.platform.is.ios&&s.isContainer.value===!0),b=f(()=>{if(t.modelValue!==!0)return 0;if(n.value===!0)return u.value===!0?d.value:0;const a=d.value-s.scroll.value.position;return a>0?a:0}),k=f(()=>t.modelValue!==!0||n.value===!0&&u.value!==!0),O=f(()=>t.modelValue===!0&&k.value===!0&&t.reveal===!0),z=f(()=>"q-header q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(k.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),_=f(()=>{const a=s.rows.value.top,p={};return a[0]==="l"&&s.left.space===!0&&(p[c.lang.rtl===!0?"right":"left"]=`${s.left.size}px`),a[2]==="r"&&s.right.space===!0&&(p[c.lang.rtl===!0?"left":"right"]=`${s.right.size}px`),p});function h(a,p){s.update("header",a,p)}function g(a,p){a.value!==p&&(a.value=p)}function V({height:a}){g(d,a),h("size",a)}function L(a){O.value===!0&&g(u,!0),e("focusin",a)}S(()=>t.modelValue,a=>{h("space",a),g(u,!0),s.animate()}),S(b,a=>{h("offset",a)}),S(()=>t.reveal,a=>{a===!1&&g(u,t.modelValue)}),S(u,a=>{s.animate(),e("reveal",a)}),S(s.scroll,a=>{t.reveal===!0&&g(u,a.direction==="up"||a.position<=t.revealOffset||a.position-a.inflectionPoint<100)});const $={};return s.instances.header=$,t.modelValue===!0&&h("size",d.value),h("space",t.modelValue),h("offset",b.value),ve(()=>{s.instances.header===$&&(s.instances.header=void 0,h("size",0),h("offset",0),h("space",!1))}),()=>{const a=me(l.default,[]);return t.elevated===!0&&a.push(m("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),a.push(m(qe,{debounce:0,onResize:V})),m("header",{class:z.value,style:_.value,onFocusin:L},a)}}});function $e(t,l){const e=w(null),c=f(()=>t.disable===!0?null:m("span",{ref:e,class:"no-outline",tabindex:-1}));function s(d){const u=l.value;d!==void 0&&d.type.indexOf("key")===0?u!==null&&document.activeElement!==u&&u.contains(document.activeElement)===!0&&u.focus():e.value!==null&&(d===void 0||u!==null&&u.contains(d.target)===!0)&&e.value.focus()}return{refocusTargetEl:c,refocusTarget:s}}var Ae={xs:30,sm:35,md:40,lg:50,xl:60};const te={...Se,..._e,...Be,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},le=["update:modelValue"];function ae(t,l){const{props:e,slots:c,emit:s,proxy:d}=Z(),{$q:u}=d,n=Ie(e,u),b=w(null),{refocusTargetEl:k,refocusTarget:O}=$e(e,b),z=be(e,Ae),_=f(()=>e.val!==void 0&&Array.isArray(e.modelValue)),h=f(()=>{const r=x(e.val);return _.value===!0?e.modelValue.findIndex(y=>x(y)===r):-1}),g=f(()=>_.value===!0?h.value>-1:x(e.modelValue)===x(e.trueValue)),V=f(()=>_.value===!0?h.value===-1:x(e.modelValue)===x(e.falseValue)),L=f(()=>g.value===!1&&V.value===!1),$=f(()=>e.disable===!0?-1:e.tabindex||0),a=f(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(n.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),p=f(()=>{const r=g.value===!0?"truthy":V.value===!0?"falsy":"indet",y=e.color!==void 0&&(e.keepColor===!0||(t==="toggle"?g.value===!0:V.value!==!0))?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${r}${y}`}),ue=f(()=>{const r={type:"checkbox"};return e.name!==void 0&&Object.assign(r,{".checked":g.value,"^checked":g.value===!0?"checked":void 0,name:e.name,value:_.value===!0?e.val:e.trueValue}),r}),ne=Qe(ue),oe=f(()=>{const r={tabindex:$.value,role:t==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":L.value===!0?"mixed":g.value===!0?"true":"false"};return e.disable===!0&&(r["aria-disabled"]="true"),r});function E(r){r!==void 0&&(N(r),O(r)),e.disable!==!0&&s("update:modelValue",se(),r)}function se(){if(_.value===!0){if(g.value===!0){const r=e.modelValue.slice();return r.splice(h.value,1),r}return e.modelValue.concat([e.val])}if(g.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(V.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function re(r){(r.keyCode===13||r.keyCode===32)&&N(r)}function ce(r){(r.keyCode===13||r.keyCode===32)&&E(r)}const ie=l(g,L);return Object.assign(d,{toggle:E}),()=>{const r=ie();e.disable!==!0&&ne(r,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const y=[m("div",{class:p.value,style:z.value,"aria-hidden":"true"},r)];k.value!==null&&y.push(k.value);const U=e.label!==void 0?he(c.default,[e.label]):pe(c.default);return U!==void 0&&y.push(m("div",{class:`q-${t}__label q-anchor--skip`},U)),m("div",{ref:b,class:a.value,...oe.value,onClick:E,onKeydown:re,onKeyup:ce},y)}}var Oe=P({name:"QToggle",props:{...te,icon:String,iconColor:String},emits:le,setup(t){function l(e,c){const s=f(()=>(e.value===!0?t.checkedIcon:c.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),d=f(()=>e.value===!0?t.iconColor:null);return()=>[m("div",{class:"q-toggle__track"}),m("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[m(ee,{name:s.value,color:d.value})]:void 0)]}return ae("toggle",l)}});const ze=m("div",{key:"svg",class:"q-checkbox__bg absolute"},[m("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[m("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),m("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Q=P({name:"QCheckbox",props:te,emits:le,setup(t){function l(e,c){const s=f(()=>(e.value===!0?t.checkedIcon:c.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>s.value!==null?[m("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[m(ee,{class:"q-checkbox__icon",name:s.value})])]:[ze]}return ae("checkbox",l)}});const Ee=ke({__name:"AccessControlEditorPage",setup(t){const l=Ve();xe(()=>{console.log("Access Control Editor \xBB onBeforeMount"),l.readSettings(),l.groups&&l.groups.length>0&&(l.selectedGroup=l.groups[0])});const e=d=>{l.selectedGroup=d,l.selectedLayout={id:"",name:""}},c=w({hasAccess:!1,create:!1,read:!1,update:!1,delete:!1,finance:!1}),s=(d,u)=>{l.selectedLayout.id=d,l.selectedLayout.name=u;const n=l.selectedGroup.layouts[d];c.value=n};return(d,u)=>(B(),T(F,null,[o(Le,null,{default:i(()=>[o(de,null,{default:i(()=>[o(A,null,{default:i(()=>{var n;return[C("Access Control Editor \xBB "+q((n=v(l).selectedGroup)==null?void 0:n.name)+" \xBB "+q(v(l).selectedLayout.name),1)]}),_:1}),o(Ce,{dense:"",icon:"save",label:"Save",onClick:u[0]||(u[0]=n=>v(l).saveGroup()),align:"right"})]),_:1})]),_:1}),o(we,{class:"flex"},{default:i(()=>[o(H,{style:{width:"16rem"}},{default:i(()=>[o(I,null,{default:i(()=>[o(A,null,{default:i(()=>[C("Groups")]),_:1})]),_:1}),o(J,null,{default:i(()=>[(B(!0),T(F,null,R(v(l).groups,n=>(B(),K(W,{key:n.id,clickable:"",onClick:b=>e(n),class:"bg-grey-2 menu",active:v(l).selectedGroup===n,"active-class":"menu-active"},{default:i(()=>[o(X,null,{default:i(()=>[o(Y,{class:"text-h5"},{default:i(()=>[C(q(n.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}),j(o(H,{style:{width:"16rem"}},{default:i(()=>[o(I,null,{default:i(()=>[o(A,null,{default:i(()=>[C("Layouts")]),_:1})]),_:1}),o(J,null,{default:i(()=>[(B(!0),T(F,null,R(v(l).selectedGroup.layouts,(n,b)=>(B(),K(W,{key:b,class:"bg-grey-2 menu",clickable:"",onClick:k=>s(b,v(l).layouts&&v(l).layouts[b]?v(l).layouts[b].name:""),active:v(l).selectedLayout.id===b,"active-class":"menu-active"},{default:i(()=>[o(X,null,{default:i(()=>[o(Y,{class:"text-h5"},{default:i(()=>[C(q(v(l).layouts&&v(l).layouts[b]?v(l).layouts[b].name:""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1},512),[[D,v(l).selectedGroup.id!==""]]),j(o(H,{style:{width:"16rem"}},{default:i(()=>[o(I,null,{default:i(()=>[o(A,null,{default:i(()=>[C("Options")]),_:1})]),_:1}),o(I,null,{default:i(()=>[o(Oe,{modelValue:c.value.hasAccess,"onUpdate:modelValue":u[1]||(u[1]=n=>c.value.hasAccess=n),label:"Has Access"},null,8,["modelValue"])]),_:1}),o(I,null,{default:i(()=>[o(Q,{modelValue:c.value.create,"onUpdate:modelValue":u[2]||(u[2]=n=>c.value.create=n),label:"Create"},null,8,["modelValue"]),o(Q,{modelValue:c.value.read,"onUpdate:modelValue":u[3]||(u[3]=n=>c.value.read=n),label:"Read"},null,8,["modelValue"]),o(Q,{modelValue:c.value.update,"onUpdate:modelValue":u[4]||(u[4]=n=>c.value.update=n),label:"Update"},null,8,["modelValue"]),o(Q,{modelValue:c.value.delete,"onUpdate:modelValue":u[5]||(u[5]=n=>c.value.delete=n),label:"Delete"},null,8,["modelValue"])]),_:1}),o(I,null,{default:i(()=>[o(Q,{modelValue:c.value.finance,"onUpdate:modelValue":u[6]||(u[6]=n=>c.value.finance=n),label:"Finance"},null,8,["modelValue"])]),_:1})]),_:1},512),[[D,v(l).selectedLayout.id!==""]]),M("pre",null,"selectedGroup: "+q(v(l).selectedGroup),1),M("pre",null,"selectedLayout: "+q(v(l).selectedLayout),1)]),_:1})],64))}});var Ue=ye(Ee,[["__scopeId","data-v-120072aa"]]);export{Ue as default};
