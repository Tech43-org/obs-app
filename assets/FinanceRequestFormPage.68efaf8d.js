import{Q as S}from"./QToolbarTitle.2f434475.js";import{_ as w,k as N,u as C,a as P,f as L,R as Q,$ as k,W as B,B as M,o as D,m as I,w as a,n as e,s as u,Q as V,p as t,a5 as d,t as i,q as v,aU as A,a9 as O,bi as z}from"./index.767d42dd.js";import{Q as g}from"./QSpace.9825bfeb.js";import{Q as R,a as y}from"./QItem.28f3e3b4.js";import{Q as T}from"./QToolbar.7070ef85.js";import{Q as h}from"./QHeader.71120393.js";import{Q as f,b as m,a as o}from"./use-form.6e236c9b.js";import{Q as x}from"./QChip.b32fee40.js";import{Q as p}from"./QInput.85ee0769.js";import{Q as j}from"./QSelect.01923f2c.js";import{Q as H}from"./QPage.4c1a5f72.js";import{Q as $,a as W}from"./QLayout.e331edf2.js";import{Q as E}from"./QFile.24b8ba3c.js";const G={class:"row"},J={class:"row items-center"},K={class:"text-h6"},X={class:"ellipsis"},Y=N({__name:"FinanceRequestFormPage",setup(Z){const _=C(),q=P(),l=L(),c=Q(),r=Q();k(()=>{_.readSettings(),q.readAllUsers(),l.readFinanceRequestData()});async function U(b){r.value&&URL.revokeObjectURL(r.value),r.value=URL.createObjectURL(b);const s=await z(r.value);l.financeRequest.file&&c.value&&(l.financeRequest.file.base64=s,l.financeRequest.file.name=c.value.name)}B(()=>{r.value&&URL.revokeObjectURL(r.value)});const F=M(()=>!l.financeRequest.newValue||!l.financeRequest.userRecipient);return(b,s)=>(D(),I($,{view:"hHh lpR fFf"},{default:a(()=>[e(h,null,{default:a(()=>[e(T,{class:"bg-primary"},{default:a(()=>[e(S,null,{default:a(()=>[u(" Request Finance ")]),_:1}),e(R,null,{default:a(()=>[e(V,{color:"primary",type:"cancel",label:"Cancel",onClick:s[0]||(s[0]=n=>t(l).cancelFinanceRequest())}),e(g),e(V,{color:"primary",type:"submit",label:"Submit Request",onClick:s[1]||(s[1]=n=>t(l).sendFinanceRequest()),disable:F.value},null,8,["disable"])]),_:1})]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(H,null,{default:a(()=>[e(f,null,{default:a(()=>[d("div",G,[e(m,{header:""},{default:a(()=>[u(i(t(l).financeRequest.itemCode),1)]),_:1}),e(g),d("span",null,[e(x,{color:"blue-5","text-color":"white"},{default:a(()=>[u(i(t(l).financeRequest.customerRecipient),1)]),_:1})])]),e(R,null,{default:a(()=>[e(m,null,{default:a(()=>[u(i(t(l).financeRequest.itemDescription),1)]),_:1})]),_:1})]),_:1}),d("div",J,[e(f,{class:"col"},{default:a(()=>[e(o,null,{default:a(()=>[e(m,null,{default:a(()=>[u("Requester")]),_:1}),e(p,{modelValue:t(_).loggedUser.fullName,"onUpdate:modelValue":s[2]||(s[2]=n=>t(_).loggedUser.fullName=n),readonly:"",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{class:"col"},{default:a(()=>[e(o,null,{default:a(()=>[e(m,null,{default:a(()=>[u("Request to")]),_:1}),e(j,{modelValue:t(l).financeRequest.userRecipient,"onUpdate:modelValue":s[3]||(s[3]=n=>t(l).financeRequest.userRecipient=n),options:t(q).userDeptHeads,"option-value":"fullName","option-label":"fullName",dense:""},{option:a(n=>[e(R,null,{default:a(()=>[e(y,{avatar:""},{default:a(()=>[e(v,{size:"sm","text-color":"white",style:A({backgroundColor:n.opt.color})},{default:a(()=>[u(i(n.opt.initials),1)]),_:2},1032,["style"])]),_:2},1024),e(y,null,{default:a(()=>[d("span",K,i(n.opt.fullName),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),e(f,{class:"row items-center"},{default:a(()=>[e(o,{class:"col-8"},{default:a(()=>[e(p,{modelValue:t(l).financeRequest.requestMessage,"onUpdate:modelValue":s[4]||(s[4]=n=>t(l).financeRequest.requestMessage=n),label:"Request Message",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),e(o,{class:"col-4"},{default:a(()=>[e(t(E),{modelValue:c.value,"onUpdate:modelValue":[s[5]||(s[5]=n=>c.value=n),U],label:"Select Attachment",outlined:"",clearable:"",dense:""},{file:a(({file:n})=>[e(x,{size:"sm",color:"primary text-white"},{default:a(()=>[e(v,null,{default:a(()=>[e(O,{name:"sym_o_description"})]),_:1}),d("div",X,i(n.name),1)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,null,{default:a(()=>[e(o,{horizontal:"",class:"items-center"},{default:a(()=>[e(o,{class:"col-4 q-py-md"},{default:a(()=>[e(m,{header:""},{default:a(()=>[u(i(t(l).financeRequest.fieldName==="Finance_Penalty"?"Penalty":t(l).financeRequest.fieldName==="Finance_Price"?"Price":"Discount"),1)]),_:1})]),_:1}),e(o,{class:"col-4 q-py-md"},{default:a(()=>[e(p,{modelValue:t(l).financeRequest.originalValue,"onUpdate:modelValue":s[6]||(s[6]=n=>t(l).financeRequest.originalValue=n),modelModifiers:{number:!0},label:"Original Value",type:"number",outlined:"",dense:"","input-class":"text-right",prefix:t(l).financeRequest.fieldName==="Finance_Price"?"\u20AC":"",suffix:t(l).financeRequest.fieldName!=="Finance_Price"?"%":"",disable:""},null,8,["modelValue","prefix","suffix"])]),_:1}),e(o,{class:"col-4 q-py-md"},{default:a(()=>[e(p,{modelValue:t(l).financeRequest.newValue,"onUpdate:modelValue":s[7]||(s[7]=n=>t(l).financeRequest.newValue=n),modelModifiers:{number:!0},label:"New Value",type:"number",outlined:"",dense:"",prefix:t(l).financeRequest.fieldName==="Finance_Price"?"\u20AC":"",suffix:t(l).financeRequest.fieldName!=="Finance_Price"?"%":"","input-class":"text-right"},null,8,["modelValue","prefix","suffix"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var ce=w(Y,[["__scopeId","data-v-5a21ab46"]]);export{ce as default};
