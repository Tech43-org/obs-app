import{j as el,n as tl,Q as nt,b as G,a as ll,c as He}from"./QInput.a0f519d3.js";import{Q as ie}from"./QSpace.7ae10ad3.js";import{z as c,aU as Ut,N as D,a as ht,s as K,A as u,B as oe,V as al,a6 as ye,C as le,aH as pt,aI as Ct,aP as st,U as Ye,ae as it,F as H,a8 as wt,G as Ke,ag as rl,af as ol,H as kt,J as nl,K as ut,ay as sl,ax as ct,aV as We,aW as dt,aX as il,P as Tt,aY as ul,ac as _e,Q as B,i as cl,e as dl,aZ as vl,a_ as fl,a$ as Re,b0 as vt,b1 as ft,o as V,k as Z,w as m,l as i,p as R,g as ue,$ as ce,a0 as de,aQ as Je,n as ee,Z as ml,a5 as bl,t as E,m as ve,W as Q,aT as mt,_ as _l,b2 as bt,a1 as gl,a2 as yl}from"./index.ad670921.js";import{Q as Sl}from"./QBtnGroup.613bd052.js";import{m as Ul,n as hl,o as qt,Q as pl,a as j}from"./QSelect.f5ecc740.js";import{Q as Cl}from"./QToolbarTitle.2a8ee9eb.js";import{Q as wl}from"./QToolbar.cbe10ffe.js";import{a as kl,Q as fe}from"./QSeparator.e28a5509.js";import{Q as Ee}from"./QCardActions.16b5d6ce.js";import{u as Se,b as Ue,a as Tl}from"./QItem.c206693e.js";import{o as ql,u as Al,a as Ie,Q as xl}from"./QCheckbox.fd1d8324.js";import{Q as Ol}from"./QList.5ffa2c9e.js";const At=[{label:"Activity ID",value:"activityId",table:"z_ACT_Activity",field:"_kplt_Activity",type:"text",sql:"act"},{label:"Created At",value:"createdAt",table:"z_ACT_Activity",field:"CreatedAtUnix",type:"number",sql:"act"},{label:"Performer User ID",value:"performerUserId",table:"z_ACT_Activity",field:"_kflt_User_Performer",type:"text",sql:"act"},{label:"Performer User Name",value:"performerUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use1"},{label:"Performer User Surname",value:"performerUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use1"},{label:"Related User ID",value:"relatedUserId",table:"z_ACT_Activity",field:"_kflt_User_Related",type:"text",sql:"act"},{label:"Related User Name",value:"relatedUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use2"},{label:"Related User Surname",value:"relatedUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use2"},{label:"Performer User Group ID",value:"performerUserGroupId",table:"z_ACT_Activity",field:"PerformerUserGroupId",type:"text",sql:"act"},{label:"Attachment",value:"attachment",table:"z_ACT_Activity",field:"Attachment",type:"text",sql:"act"},{label:"Action",value:"action",table:"z_ACT_Activity",field:"Action",type:"text",sql:"act"},{label:"Description",value:"description",table:"z_ACT_Activity",field:"Description",type:"text",sql:"act"},{label:"Note",value:"note",table:"z_ACT_Activity",field:"Note",type:"text",sql:"act"}],P=c(()=>Ut(At));c(()=>D("SELECT "+P.value.map(l=>l)+" FROM z_ACT_Activity AS act").value);const Rl=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin', 'Login User', 'Logout User', 'Re-Login ServiceScript', 'Login Dev', 'Logout Dev')`,e.value}),La=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin')`,e.value}),za=c(()=>{const l=[0,1,9,10].map(d=>At[d]),o=Ut(l),f=D("SELECT "+o.join(", ")+" FROM  z_ACT_Activity AS act");return f.value+=` WHERE act."Action" IN ('Submit Submission', 'Update Order Status') AND act."_kflt_User_Performer" IS NULL`,f.value}),Va=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" NOT IN ('Login Admin', 'Logout Admin', 'Submit Submission', 'Update Order Status') AND act."_kflt_User_Performer" IS NULL`,e.value}),El=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Create User')`,e.value}),Pl=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Update User Group')`,e.value}),Nl=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" = 'Update User Status' AND act."Description" LIKE '%to Inactive%'`,e.value}),Ba=c(()=>{const e=ht(),l=D("SELECT "+P.value.map(o=>o)+" FROM z_ACT_Activity AS act");return P.value.some(o=>o.indexOf("use1.")!==-1)&&(l.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(o=>o.indexOf("use2.")!==-1)&&(l.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),l.value+=` WHERE act."_kflt_User_Performer" ='${e.selectedUser.userId}' OR act."_kflt_User_Related" ='${e.selectedUser.userId}'`,l.value}),Qa=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=' WHERE act."_kflt_User_Performer" IS NOT NULL',e.value});var Y=K({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:o}){const f=le(),{proxy:{$q:d}}=f,S=v=>{o("click",v)};return()=>{if(e.props===void 0)return u("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:S},oe(l.default));let v,b;const g=f.vnode.key;if(g){if(v=e.props.colsMap[g],v===void 0)return}else v=e.props.col;if(v.sortable===!0){const t=v.align==="right"?"unshift":"push";b=al(l.default,[]),b[t](u(ye,{class:v.__iconClass,name:d.iconSet.table.arrowUp}))}else b=oe(l.default);const y={class:v.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:v.headerStyle,onClick:t=>{v.sortable===!0&&e.props.sort(v),S(t)}};return u("th",y,b)}}});const Il=u("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[u("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),u("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Dl=K({name:"QRadio",props:{...Se,...pt,...el,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:l,emit:o}){const{proxy:f}=le(),d=Ue(e,f.$q),S=Ct(e,ql),v=D(null),{refocusTargetEl:b,refocusTarget:g}=Al(e,v),y=c(()=>st(e.modelValue)===st(e.val)),t=c(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(d.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),U=c(()=>{const s=e.color!==void 0&&(e.keepColor===!0||y.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${y.value===!0?"truthy":"falsy"}${s}`}),q=c(()=>(y.value===!0?e.checkedIcon:e.uncheckedIcon)||null),x=c(()=>e.disable===!0?-1:e.tabindex||0),O=c(()=>{const s={type:"radio"};return e.name!==void 0&&Object.assign(s,{".checked":y.value===!0,"^checked":y.value===!0?"checked":void 0,name:e.name,value:e.val}),s}),k=tl(O);function C(s){s!==void 0&&(it(s),g(s)),e.disable!==!0&&y.value!==!0&&o("update:modelValue",e.val,s)}function F(s){(s.keyCode===13||s.keyCode===32)&&it(s)}function h(s){(s.keyCode===13||s.keyCode===32)&&C(s)}return Object.assign(f,{set:C}),()=>{const s=q.value!==null?[u("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[u(ye,{class:"q-radio__icon",name:q.value})])]:[Il];e.disable!==!0&&k(s,"unshift"," q-radio__native q-ma-none q-pa-none");const r=[u("div",{class:U.value,style:S.value,"aria-hidden":"true"},s)];b.value!==null&&r.push(b.value);const n=e.label!==void 0?Ye(l.default,[e.label]):oe(l.default);return n!==void 0&&r.push(u("div",{class:"q-radio__label q-anchor--skip"},n)),u("div",{ref:v,class:t.value,tabindex:x.value,role:"radio","aria-label":e.label,"aria-checked":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:C,onKeydown:F,onKeyup:h},r)}}});const xt={radio:Dl,checkbox:Ie,toggle:xl},Fl=Object.keys(xt);var Pe=K({name:"QOptionGroup",props:{...Se,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(l=>"value"in l&&"label"in l)},name:String,type:{default:"radio",validator:e=>Fl.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:l,slots:o}){const{proxy:{$q:f}}=le(),d=Array.isArray(e.modelValue);e.type==="radio"?d===!0&&console.error("q-option-group: model should not be array"):d===!1&&console.error("q-option-group: model should be array in your case");const S=Ue(e,f),v=c(()=>xt[e.type]),b=c(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),g=c(()=>{const t={role:"group"};return e.type==="radio"&&(t.role="radiogroup",e.disable===!0&&(t["aria-disabled"]="true")),t});function y(t){l("update:modelValue",t)}return()=>u("div",{class:b.value,...g.value},e.options.map((t,U)=>{const q=o["label-"+U]!==void 0?()=>o["label-"+U](t):o.label!==void 0?()=>o.label(t):void 0;return u("div",[u(v.value,{modelValue:e.modelValue,val:t.value,name:t.name===void 0?e.name:t.name,disable:e.disable||t.disable,label:q===void 0?t.label:null,leftLabel:t.leftLabel===void 0?e.leftLabel:t.leftLabel,color:t.color===void 0?e.color:t.color,checkedIcon:t.checkedIcon,uncheckedIcon:t.uncheckedIcon,dark:t.dark||S.value,size:t.size===void 0?e.size:t.size,dense:e.dense,keepColor:t.keepColor===void 0?e.keepColor:t.keepColor,"onUpdate:modelValue":y},q)])}))}}),te=K({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const o=le(),f=c(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return u("td",{class:f.value},oe(l.default));const d=o.vnode.key,S=(e.props.colsMap!==void 0?e.props.colsMap[d]:null)||e.props.col;if(S===void 0)return;const{row:v}=e.props;return u("td",{class:f.value+S.__tdClass(v),style:S.__tdStyle(v)},oe(l.default))}}}),Ll=K({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const o=c(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>u("tr",{class:o.value},oe(l.default))}});const zl=["horizontal","vertical","cell","none"];var Vl=K({name:"QMarkupTable",props:{...Se,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>zl.includes(e)}},setup(e,{slots:l}){const o=le(),f=Ue(e,o.proxy.$q),d=c(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(f.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>u("div",{class:d.value},[u("table",{class:"q-table"},oe(l.default))])}});function Ot(e,l){return u("div",e,[u("table",{class:"q-table"},l)])}const Bl={list:Ol,table:Vl},Ql=["list","table","__qtable"];var $l=K({name:"QVirtualScroll",props:{...Ul,type:{type:String,default:"list",validator:e=>Ql.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:o}){let f;const d=D(null),S=c(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:v,localResetVirtualScroll:b,padVirtualScroll:g,onVirtualScrollEvt:y}=hl({virtualScrollLength:S,getVirtualScrollTarget:O,getVirtualScrollEl:x}),t=c(()=>{if(S.value===0)return[];const h=(s,r)=>({index:v.value.from+r,item:s});return e.itemsFn===void 0?e.items.slice(v.value.from,v.value.to).map(h):e.itemsFn(v.value.from,v.value.to-v.value.from).map(h)}),U=c(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=c(()=>e.scrollTarget!==void 0?{}:{tabindex:0});H(S,()=>{b()}),H(()=>e.scrollTarget,()=>{C(),k()});function x(){return d.value.$el||d.value}function O(){return f}function k(){f=nl(x(),e.scrollTarget),f.addEventListener("scroll",y,ut.passive)}function C(){f!==void 0&&(f.removeEventListener("scroll",y,ut.passive),f=void 0)}function F(){let h=g(e.type==="list"?"div":"tbody",t.value.map(l.default));return l.before!==void 0&&(h=l.before().concat(h)),Ye(l.after,h)}return wt(()=>{b()}),Ke(()=>{k()}),rl(()=>{k()}),ol(()=>{C()}),kt(()=>{C()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Ot({ref:d,class:"q-table__middle "+U.value},F()):u(Bl[e.type],{...o,ref:d,class:[o.class,U.value],...q.value},F)}}});const Ml={xs:2,sm:4,md:6,lg:10,xl:14};function _t(e,l,o){return{transform:l===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Gl=K({name:"QLinearProgress",props:{...Se,...pt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:o}=le(),f=Ue(e,o.$q),d=Ct(e,Ml),S=c(()=>e.indeterminate===!0||e.query===!0),v=c(()=>e.reverse!==e.query),b=c(()=>({...d.value!==null?d.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),g=c(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=c(()=>_t(e.buffer!==void 0?e.buffer:1,v.value,o.$q)),t=c(()=>`with${e.instantFeedback===!0?"out":""}-transition`),U=c(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${t.value} q-linear-progress__track--${f.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),q=c(()=>_t(S.value===!0?1:e.value,v.value,o.$q)),x=c(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${t.value} q-linear-progress__model--${S.value===!0?"in":""}determinate`),O=c(()=>({width:`${e.value*100}%`})),k=c(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${t.value}`);return()=>{const C=[u("div",{class:U.value,style:y.value}),u("div",{class:x.value,style:q.value})];return e.stripe===!0&&S.value===!1&&C.push(u("div",{class:k.value,style:O.value})),u("div",{class:g.value,style:b.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ye(l.default,C))}}});let ge=0;const jl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Hl=["update:fullscreen","fullscreen"];function Jl(){const e=le(),{props:l,emit:o,proxy:f}=e;let d,S,v;const b=D(!1);sl(e)===!0&&H(()=>f.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&t()}),H(()=>l.fullscreen,U=>{b.value!==U&&g()}),H(b,U=>{o("update:fullscreen",U),o("fullscreen",U)});function g(){b.value===!0?t():y()}function y(){b.value!==!0&&(b.value=!0,v=f.$el.parentNode,v.replaceChild(S,f.$el),document.body.appendChild(f.$el),ge++,ge===1&&document.body.classList.add("q-body--fullscreen-mixin"),d={handler:t},ct.add(d))}function t(){b.value===!0&&(d!==void 0&&(ct.remove(d),d=void 0),v.replaceChild(f.$el,S),b.value=!1,ge=Math.max(0,ge-1),ge===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),f.$el.scrollIntoView!==void 0&&setTimeout(()=>{f.$el.scrollIntoView()})))}return wt(()=>{S=document.createElement("span")}),Ke(()=>{l.fullscreen===!0&&y()}),kt(t),Object.assign(f,{toggleFullscreen:g,setFullscreen:y,exitFullscreen:t}),{inFullscreen:b,toggleFullscreen:g}}function Wl(e,l){return new Date(e)-new Date(l)}const Yl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Kl(e,l,o,f){const d=c(()=>{const{sortBy:b}=l.value;return b&&o.value.find(g=>g.name===b)||null}),S=c(()=>e.sortMethod!==void 0?e.sortMethod:(b,g,y)=>{const t=o.value.find(x=>x.name===g);if(t===void 0||t.field===void 0)return b;const U=y===!0?-1:1,q=typeof t.field=="function"?x=>t.field(x):x=>x[t.field];return b.sort((x,O)=>{let k=q(x),C=q(O);return t.rawSort!==void 0?t.rawSort(k,C,x,O)*U:k==null?-1*U:C==null?1*U:t.sort!==void 0?t.sort(k,C,x,O)*U:We(k)===!0&&We(C)===!0?(k-C)*U:dt(k)===!0&&dt(C)===!0?Wl(k,C)*U:typeof k=="boolean"&&typeof C=="boolean"?(k-C)*U:([k,C]=[k,C].map(F=>(F+"").toLocaleString().toLowerCase()),k<C?-1*U:k===C?0:U)})});function v(b){let g=e.columnSortOrder;if(il(b)===!0)b.sortOrder&&(g=b.sortOrder),b=b.name;else{const U=o.value.find(q=>q.name===b);U!==void 0&&U.sortOrder&&(g=U.sortOrder)}let{sortBy:y,descending:t}=l.value;y!==b?(y=b,t=g==="da"):e.binaryStateSort===!0?t=!t:t===!0?g==="ad"?y=null:t=!1:g==="ad"?t=!0:y=null,f({sortBy:y,descending:t,page:1})}return{columnToSort:d,computedSortMethod:S,sort:v}}const Xl={filter:[String,Object],filterMethod:Function};function Zl(e,l){const o=c(()=>e.filterMethod!==void 0?e.filterMethod:(f,d,S,v)=>{const b=d?d.toLowerCase():"";return f.filter(g=>S.some(y=>{const t=v(y,g)+"";return(t==="undefined"||t==="null"?"":t.toLowerCase()).indexOf(b)!==-1}))});return H(()=>e.filter,()=>{Tt(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function ea(e,l){for(const o in l)if(l[o]!==e[o])return!1;return!0}function gt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const ta={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function la(e,l){const{props:o,emit:f}=e,d=D(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),S=c(()=>{const t=o["onUpdate:pagination"]!==void 0?{...d.value,...o.pagination}:d.value;return gt(t)}),v=c(()=>S.value.rowsNumber!==void 0);function b(t){g({pagination:t,filter:o.filter})}function g(t={}){Tt(()=>{f("request",{pagination:t.pagination||S.value,filter:t.filter||o.filter,getCellValue:l})})}function y(t,U){const q=gt({...S.value,...t});if(ea(S.value,q)===!0){v.value===!0&&U===!0&&b(q);return}if(v.value===!0){b(q);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?f("update:pagination",q):d.value=q}return{innerPagination:d,computedPagination:S,isServerSide:v,requestServerInteraction:g,setPagination:y}}function aa(e,l,o,f,d,S){const{props:v,emit:b,proxy:{$q:g}}=e,y=c(()=>f.value===!0?o.value.rowsNumber||0:S.value),t=c(()=>{const{page:r,rowsPerPage:n}=o.value;return(r-1)*n}),U=c(()=>{const{page:r,rowsPerPage:n}=o.value;return r*n}),q=c(()=>o.value.page===1),x=c(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/o.value.rowsPerPage))),O=c(()=>U.value===0?!0:o.value.page>=x.value),k=c(()=>(v.rowsPerPageOptions.includes(l.value.rowsPerPage)?v.rowsPerPageOptions:[l.value.rowsPerPage].concat(v.rowsPerPageOptions)).map(n=>({label:n===0?g.lang.table.allRows:""+n,value:n})));H(x,(r,n)=>{if(r===n)return;const A=o.value.page;r&&!A?d({page:1}):r<A&&d({page:r})});function C(){d({page:1})}function F(){const{page:r}=o.value;r>1&&d({page:r-1})}function h(){const{page:r,rowsPerPage:n}=o.value;U.value>0&&r*n<y.value&&d({page:r+1})}function s(){d({page:x.value})}return v["onUpdate:pagination"]!==void 0&&b("update:pagination",{...o.value}),{firstRowIndex:t,lastRowIndex:U,isFirstPage:q,isLastPage:O,pagesNumber:x,computedRowsPerPageOptions:k,computedRowsNumber:y,firstPage:C,prevPage:F,nextPage:h,lastPage:s}}const ra={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},oa=["update:selected","selection"];function na(e,l,o,f){const d=c(()=>{const O={};return e.selected.map(f.value).forEach(k=>{O[k]=!0}),O}),S=c(()=>e.selection!=="none"),v=c(()=>e.selection==="single"),b=c(()=>e.selection==="multiple"),g=c(()=>o.value.length!==0&&o.value.every(O=>d.value[f.value(O)]===!0)),y=c(()=>g.value!==!0&&o.value.some(O=>d.value[f.value(O)]===!0)),t=c(()=>e.selected.length);function U(O){return d.value[O]===!0}function q(){l("update:selected",[])}function x(O,k,C,F){l("selection",{rows:k,added:C,keys:O,evt:F});const h=v.value===!0?C===!0?k:[]:C===!0?e.selected.concat(k):e.selected.filter(s=>O.includes(f.value(s))===!1);l("update:selected",h)}return{hasSelectionMode:S,singleSelection:v,multipleSelection:b,allRowsSelected:g,someRowsSelected:y,rowsSelectedNumber:t,isRowSelected:U,clearSelection:q,updateSelection:x}}function yt(e){return Array.isArray(e)?e.slice():[]}const sa={expanded:Array},ia=["update:expanded"];function ua(e,l){const o=D(yt(e.expanded));H(()=>e.expanded,v=>{o.value=yt(v)});function f(v){return o.value.includes(v)}function d(v){e.expanded!==void 0?l("update:expanded",v):o.value=v}function S(v,b){const g=o.value.slice(),y=g.indexOf(v);b===!0?y===-1&&(g.push(v),d(g)):y!==-1&&(g.splice(y,1),d(g))}return{isRowExpanded:f,setExpanded:d,updateExpanded:S}}const ca={visibleColumns:Array};function da(e,l,o){const f=c(()=>{if(e.columns!==void 0)return e.columns;const b=e.rows[0];return b!==void 0?Object.keys(b).map(g=>({name:g,label:g.toUpperCase(),field:g,align:We(b[g])?"right":"left",sortable:!0})):[]}),d=c(()=>{const{sortBy:b,descending:g}=l.value;return(e.visibleColumns!==void 0?f.value.filter(t=>t.required===!0||e.visibleColumns.includes(t.name)===!0):f.value).map(t=>{const U=t.align||"right",q=`text-${U}`;return{...t,align:U,__iconClass:`q-table__sort-icon q-table__sort-icon--${U}`,__thClass:q+(t.headerClasses!==void 0?" "+t.headerClasses:"")+(t.sortable===!0?" sortable":"")+(t.name===b?` sorted ${g===!0?"sort-desc":""}`:""),__tdStyle:t.style!==void 0?typeof t.style!="function"?()=>t.style:t.style:()=>null,__tdClass:t.classes!==void 0?typeof t.classes!="function"?()=>q+" "+t.classes:x=>q+" "+t.classes(x):()=>q}})}),S=c(()=>{const b={};return d.value.forEach(g=>{b[g.name]=g}),b}),v=c(()=>e.tableColspan!==void 0?e.tableColspan:d.value.length+(o.value===!0?1:0));return{colList:f,computedCols:d,computedColsMap:S,computedColspan:v}}const Ne="q-table__bottom row items-center",Rt={};qt.forEach(e=>{Rt[e]={}});var va=K({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Rt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Se,...jl,...ca,...Xl,...ta,...sa,...ra,...Yl},emits:["request","virtualScroll",...Hl,...ia,...oa],setup(e,{slots:l,emit:o}){const f=le(),{proxy:{$q:d}}=f,S=Ue(e,d),{inFullscreen:v,toggleFullscreen:b}=Jl(),g=c(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),y=D(null),t=D(null),U=c(()=>e.grid!==!0&&e.virtualScroll===!0),q=c(()=>" q-table__card"+(S.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=c(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(S.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(v.value===!0?" fullscreen scroll":"")),O=c(()=>x.value+(e.loading===!0?" q-table--loading":""));H(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{U.value===!0&&t.value!==null&&t.value.reset()});const{innerPagination:k,computedPagination:C,isServerSide:F,requestServerInteraction:h,setPagination:s}=la(f,ne),{computedFilterMethod:r}=Zl(e,s),{isRowExpanded:n,setExpanded:A,updateExpanded:re}=ua(e,o),L=c(()=>{let a=e.rows;if(F.value===!0||a.length===0)return a;const{sortBy:_,descending:p}=C.value;return e.filter&&(a=r.value(a,e.filter,J.value,ne)),Nt.value!==null&&(a=It.value(e.rows===a?a.slice():a,_,p)),a}),$=c(()=>L.value.length),M=c(()=>{let a=L.value;if(F.value===!0)return a;const{rowsPerPage:_}=C.value;return _!==0&&(we.value===0&&e.rows!==a?a.length>ke.value&&(a=a.slice(0,ke.value)):a=a.slice(we.value,ke.value)),a}),{hasSelectionMode:X,singleSelection:he,multipleSelection:me,allRowsSelected:pe,someRowsSelected:be,rowsSelectedNumber:De,isRowSelected:Fe,clearSelection:Et,updateSelection:Ce}=na(e,o,M,g),{colList:Pt,computedCols:J,computedColsMap:Xe,computedColspan:Ze}=da(e,C,X),{columnToSort:Nt,computedSortMethod:It,sort:Le}=Kl(e,C,Pt,s),{firstRowIndex:we,lastRowIndex:ke,isFirstPage:ze,isLastPage:Ve,pagesNumber:Te,computedRowsPerPageOptions:Dt,computedRowsNumber:qe,firstPage:Be,prevPage:Qe,nextPage:$e,lastPage:Me}=aa(f,k,C,F,s,$),Ft=c(()=>M.value.length===0),Lt=c(()=>{const a={};return qt.forEach(_=>{a[_]=e[_]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function zt(){U.value===!0&&t.value.reset()}function Vt(){if(e.grid===!0)return Xt();const a=e.hideHeader!==!0?rt:null;if(U.value===!0){const p=l["top-row"],w=l["bottom-row"],T={default:I=>tt(I.item,l.body,I.index)};if(p!==void 0){const I=u("tbody",p({cols:J.value}));T.before=a===null?()=>I:()=>[a()].concat(I)}else a!==null&&(T.before=a);return w!==void 0&&(T.after=()=>u("tbody",w({cols:J.value}))),u($l,{ref:t,class:e.tableClass,style:e.tableStyle,...Lt.value,scrollTarget:e.virtualScrollTarget,items:M.value,type:"__qtable",tableColspan:Ze.value,onVirtualScroll:Qt},T)}const _=[$t()];return a!==null&&_.unshift(a()),Ot({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},_)}function Bt(a,_){if(t.value!==null){t.value.scrollTo(a,_);return}a=parseInt(a,10);const p=y.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(p!==null){const w=y.value.querySelector(".q-table__middle.scroll"),T=p.offsetTop-e.virtualScrollStickySizeStart,I=T<w.scrollTop?"decrease":"increase";w.scrollTop=T,o("virtualScroll",{index:a,from:0,to:k.value.rowsPerPage-1,direction:I})}}function Qt(a){o("virtualScroll",a)}function et(){return[u(Gl,{class:"q-table__linear-progress",color:e.color,dark:S.value,indeterminate:!0,trackColor:"transparent"})]}function tt(a,_,p){const w=g.value(a),T=Fe(w);if(_!==void 0)return _(lt({key:w,row:a,pageIndex:p,__trClass:T?"selected":""}));const I=l["body-cell"],N=J.value.map(z=>{const xe=l[`body-cell-${z.name}`],Oe=xe!==void 0?xe:I;return Oe!==void 0?Oe(Mt({key:w,row:a,pageIndex:p,col:z})):u("td",{class:z.__tdClass(a),style:z.__tdStyle(a)},ne(z,a))});if(X.value===!0){const z=l["body-selection"],xe=z!==void 0?z(Gt({key:w,row:a,pageIndex:p})):[u(Ie,{modelValue:T,color:e.color,dark:S.value,dense:e.dense,"onUpdate:modelValue":(Oe,Zt)=>{Ce([w],[a],Oe,Zt)}})];N.unshift(u("td",{class:"q-table--col-auto-width"},xe))}const W={key:w,class:{selected:T}};return e.onRowClick!==void 0&&(W.class["cursor-pointer"]=!0,W.onClick=z=>{o("RowClick",z,a,p)}),e.onRowDblclick!==void 0&&(W.class["cursor-pointer"]=!0,W.onDblclick=z=>{o("RowDblclick",z,a,p)}),e.onRowContextmenu!==void 0&&(W.class["cursor-pointer"]=!0,W.onContextmenu=z=>{o("RowContextmenu",z,a,p)}),u("tr",W,N)}function $t(){const a=l.body,_=l["top-row"],p=l["bottom-row"];let w=M.value.map((T,I)=>tt(T,a,I));return _!==void 0&&(w=_({cols:J.value}).concat(w)),p!==void 0&&(w=w.concat(p({cols:J.value}))),u("tbody",w)}function lt(a){return Ge(a),a.cols=a.cols.map(_=>_e({..._},"value",()=>ne(_,a.row))),a}function Mt(a){return Ge(a),_e(a,"value",()=>ne(a.col,a.row)),a}function Gt(a){return Ge(a),a}function Ge(a){Object.assign(a,{cols:J.value,colsMap:Xe.value,sort:Le,rowIndex:we.value+a.pageIndex,color:e.color,dark:S.value,dense:e.dense}),X.value===!0&&_e(a,"selected",()=>Fe(a.key),(_,p)=>{Ce([a.key],[a.row],_,p)}),_e(a,"expand",()=>n(a.key),_=>{re(a.key,_)})}function ne(a,_){const p=typeof a.field=="function"?a.field(_):_[a.field];return a.format!==void 0?a.format(p,_):p}const se=c(()=>({pagination:C.value,pagesNumber:Te.value,isFirstPage:ze.value,isLastPage:Ve.value,firstPage:Be,prevPage:Qe,nextPage:$e,lastPage:Me,inFullscreen:v.value,toggleFullscreen:b}));function jt(){const a=l.top,_=l["top-left"],p=l["top-right"],w=l["top-selection"],T=X.value===!0&&w!==void 0&&De.value>0,I="q-table__top relative-position row items-center";if(a!==void 0)return u("div",{class:I},[a(se.value)]);let N;if(T===!0?N=w(se.value).slice():(N=[],_!==void 0?N.push(u("div",{class:"q-table__control"},[_(se.value)])):e.title&&N.push(u("div",{class:"q-table__control"},[u("div",{class:["q-table__title",e.titleClass]},e.title)]))),p!==void 0&&(N.push(u("div",{class:"q-table__separator col"})),N.push(u("div",{class:"q-table__control"},[p(se.value)]))),N.length!==0)return u("div",{class:I},N)}const at=c(()=>be.value===!0?null:pe.value);function rt(){const a=Ht();return e.loading===!0&&l.loading===void 0&&a.push(u("tr",{class:"q-table__progress"},[u("th",{class:"relative-position",colspan:Ze.value},et())])),u("thead",a)}function Ht(){const a=l.header,_=l["header-cell"];if(a!==void 0)return a(je({header:!0})).slice();const p=J.value.map(w=>{const T=l[`header-cell-${w.name}`],I=T!==void 0?T:_,N=je({col:w});return I!==void 0?I(N):u(Y,{key:w.name,props:N},()=>w.label)});if(he.value===!0&&e.grid!==!0)p.unshift(u("th",{class:"q-table--col-auto-width"}," "));else if(me.value===!0){const w=l["header-selection"],T=w!==void 0?w(je({})):[u(Ie,{color:e.color,modelValue:at.value,dark:S.value,dense:e.dense,"onUpdate:modelValue":ot})];p.unshift(u("th",{class:"q-table--col-auto-width"},T))}return[u("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},p)]}function je(a){return Object.assign(a,{cols:J.value,sort:Le,colsMap:Xe.value,color:e.color,dark:S.value,dense:e.dense}),me.value===!0&&_e(a,"selected",()=>at.value,ot),a}function ot(a){be.value===!0&&(a=!1),Ce(M.value.map(g.value),M.value,a)}const Ae=c(()=>{const a=[e.iconFirstPage||d.iconSet.table.firstPage,e.iconPrevPage||d.iconSet.table.prevPage,e.iconNextPage||d.iconSet.table.nextPage,e.iconLastPage||d.iconSet.table.lastPage];return d.lang.rtl===!0?a.reverse():a});function Jt(){if(e.hideBottom===!0)return;if(Ft.value===!0){if(e.hideNoData===!0)return;const p=e.loading===!0?e.loadingLabel||d.lang.table.loading:e.filter?e.noResultsLabel||d.lang.table.noResults:e.noDataLabel||d.lang.table.noData,w=l["no-data"],T=w!==void 0?[w({message:p,icon:d.iconSet.table.warning,filter:e.filter})]:[u(ye,{class:"q-table__bottom-nodata-icon",name:d.iconSet.table.warning}),p];return u("div",{class:Ne+" q-table__bottom--nodata"},T)}const a=l.bottom;if(a!==void 0)return u("div",{class:Ne},[a(se.value)]);const _=e.hideSelectedBanner!==!0&&X.value===!0&&De.value>0?[u("div",{class:"q-table__control"},[u("div",[(e.selectedRowsLabel||d.lang.table.selectedRecords)(De.value)])])]:[];if(e.hidePagination!==!0)return u("div",{class:Ne+" justify-end"},Yt(_));if(_.length!==0)return u("div",{class:Ne},_)}function Wt(a){s({page:1,rowsPerPage:a.value})}function Yt(a){let _;const{rowsPerPage:p}=C.value,w=e.paginationLabel||d.lang.table.pagination,T=l.pagination,I=e.rowsPerPageOptions.length>1;if(a.push(u("div",{class:"q-table__separator col"})),I===!0&&a.push(u("div",{class:"q-table__control"},[u("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||d.lang.table.recordsPerPage]),u(pl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:p,options:Dt.value,displayValue:p===0?d.lang.table.allRows:p,dark:S.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Wt})])),T!==void 0)_=T(se.value);else if(_=[u("span",p!==0?{class:"q-table__bottom-item"}:{},[p?w(we.value+1,Math.min(ke.value,qe.value),qe.value):w(1,$.value,qe.value)])],p!==0&&Te.value>1){const N={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(N.size="sm"),Te.value>2&&_.push(u(B,{key:"pgFirst",...N,icon:Ae.value[0],disable:ze.value,onClick:Be})),_.push(u(B,{key:"pgPrev",...N,icon:Ae.value[1],disable:ze.value,onClick:Qe}),u(B,{key:"pgNext",...N,icon:Ae.value[2],disable:Ve.value,onClick:$e})),Te.value>2&&_.push(u(B,{key:"pgLast",...N,icon:Ae.value[3],disable:Ve.value,onClick:Me}))}return a.push(u("div",{class:"q-table__control"},_)),a}function Kt(){const a=e.gridHeader===!0?[u("table",{class:"q-table"},[rt()])]:e.loading===!0&&l.loading===void 0?et():void 0;return u("div",{class:"q-table__middle"},a)}function Xt(){const a=l.item!==void 0?l.item:_=>{const p=_.cols.map(T=>u("div",{class:"q-table__grid-item-row"},[u("div",{class:"q-table__grid-item-title"},[T.label]),u("div",{class:"q-table__grid-item-value"},[T.value])]));if(X.value===!0){const T=l["body-selection"],I=T!==void 0?T(_):[u(Ie,{modelValue:_.selected,color:e.color,dark:S.value,dense:e.dense,"onUpdate:modelValue":(N,W)=>{Ce([_.key],[_.row],N,W)}})];p.unshift(u("div",{class:"q-table__grid-item-row"},I),u(kl,{dark:S.value}))}const w={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(w.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(w.onClick=T=>{o("RowClick",T,_.row,_.pageIndex)}),e.onRowDblclick!==void 0&&(w.onDblclick=T=>{o("RowDblclick",T,_.row,_.pageIndex)})),u("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(_.selected===!0?" q-table__grid-item--selected":"")},[u("div",w,p)])};return u("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},M.value.map((_,p)=>a(lt({key:g.value(_),row:_,pageIndex:p}))))}return Object.assign(f.proxy,{requestServerInteraction:h,setPagination:s,firstPage:Be,prevPage:Qe,nextPage:$e,lastPage:Me,isRowSelected:Fe,clearSelection:Et,isRowExpanded:n,setExpanded:A,sort:Le,resetVirtualScroll:zt,scrollTo:Bt,getCellValue:ne}),ul(f.proxy,{filteredSortedRows:()=>L.value,computedRows:()=>M.value,computedRowsNumber:()=>qe.value}),()=>{const a=[jt()],_={ref:y,class:O.value};return e.grid===!0?a.push(Kt()):Object.assign(_,{class:[_.class,e.cardClass],style:e.cardStyle}),a.push(Vt(),Jt()),e.loading===!0&&l.loading!==void 0&&a.push(l.loading()),u("div",_,a)}}});function St(e){setTimeout(()=>{window.URL.revokeObjectURL(e.href)},1e4),e.remove()}function fa(e,l,o={}){const{mimeType:f,byteOrderMark:d,encoding:S}=typeof o=="string"?{mimeType:o}:o,v=S!==void 0?new TextEncoder(S).encode([l]):l,b=d!==void 0?[d,v]:[v],g=new Blob(b,{type:f||"application/octet-stream"}),y=document.createElement("a");y.href=window.URL.createObjectURL(g),y.setAttribute("download",e),typeof y.download=="undefined"&&y.setAttribute("target","_blank"),y.classList.add("hidden"),y.style.position="fixed",document.body.appendChild(y);try{return y.click(),St(y),!0}catch(t){return St(y),t}}const ae=e=>(gl("data-v-1eff1106"),e=e(),yl(),e),ma=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Selection:",-1)),ba=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Timeframe:",-1)),_a=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Performer Users:",-1)),ga=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Performer Groups:",-1)),ya=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Related Users:",-1)),Sa=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Actions:",-1)),Ua=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Decription Filter:",-1)),ha=ae(()=>Q("span",{style:{"font-weight":"bold"}},"Size:",-1)),pa={class:"q-ma-md column",style:{gap:"0.6rem"}},Ca={class:"q-ma-md column",style:{gap:"0.6rem"}},wa={class:"q-mx-md"},ka=cl({__name:"ActivityTable",props:{showSelections:{type:Boolean,default:!0}},setup(e){const l=dl(),o=ht();Ke(()=>{k("today")});const f=D(null),d=D([{name:"rowNumber",label:"rowNumber",align:"right",field:"",sortable:!1},{name:"activityId",label:"ID",align:"left",field:"activityId",sortable:!1},{name:"date",label:"Date",align:"left",field:"date",sortable:!1},{name:"time",label:"Time",align:"left",field:"time",sortable:!1},{name:"performerUserFullName",label:"User",align:"left",field:"performerUserFullName",sortable:!1},{name:"performerUserGroupName",label:"Group",align:"left",field:"performerUserGroupName",sortable:!1},{name:"relatedUserFullName",label:"Related User",align:"left",field:"relatedUserFullName",sortable:!1},{name:"action",label:"Action",align:"left",field:"action",sortable:!1},{name:"description",label:"Description",align:"left",field:"description",sortable:!1}]),S=["rowNumber","date","time","performerUserFullName","performerUserGroupName","relatedUserFullName","action","description"],v=D(!1),b=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"monthToDate",label:"Month to Date"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}],g=[{value:"access",label:"Access"},{value:"userCreated",label:"New Users"},{value:"userUpdateGroup",label:"Group Changes"},{value:"userInactive",label:"Inactivated"}],y=h=>{switch(t.value.selection=h,t.value.performerUserId=[],t.value.relatedUserId=[],t.value.actions=[],t.value.term="",h){case"access":l.readActivity(Rl.value);break;case"userCreated":l.readActivity(El.value);break;case"userUpdateGroup":l.readActivity(Pl.value);break;case"userInactive":l.readActivity(Nl.value);break}},t=D({term:"",selection:"access",timeframe:"today",dateStart:"",dateEnd:"",searchColumns:["description"],performerUserId:[],performerUserGroupId:[],relatedUserId:[],actions:[]}),U=c(()=>[...new Set(l.activity.map(h=>h.action))]),q=c(()=>l.activity.map(h=>({value:h.performerUserId,label:h.performerUserFullName})).filter((h,s,r)=>s===r.findIndex(n=>n.label===h.label&&n.value===h.value))),x=c(()=>l.activity.map(h=>({value:h.performerUserGroupId||"",label:h.performerUserGroupName||""})).filter((h,s,r)=>s===r.findIndex(n=>n.label===h.label&&n.value===h.value))),O=c(()=>l.activity.map(h=>({value:h.relatedUserId,label:h.relatedUserFullName})).filter((h,s,r)=>s===r.findIndex(n=>n.label===h.label&&n.value===h.value))),k=h=>{t.value.timeframe=h;const s=vl(),r=fl(s);let n=new Date,A=new Date;switch(h){case"today":n=r,A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),23,59,59));break;case"yesterday":n=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()-1)),A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()-1,23,59,59));break;case"monthToDate":n=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),1)),A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),23,59,59));break;case"lastMonth":n=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth()-1,1)),A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),0));break;case"custom":n=new Date(t.value.dateStart),A=new Date(t.value.dateEnd),isNaN(n.getTime())||isNaN(A.getTime())?Re({message:"Invalid custom date range",color:"negative",icon:"warning"}):A<n&&Re({message:"End date cannot be before start date",color:"negative",icon:"warning"});break}t.value.dateStart=vt(n),t.value.dateEnd=vt(A)},C=c(()=>{const h=ft(t.value.dateStart),s=ft(t.value.dateEnd);return l.activity.filter(r=>{var he,me,pe,be;const n=new Date(r.createdAt),A=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),re=A>=h&&A<=s,L=!((he=t.value.performerUserId)!=null&&he.length)||t.value.performerUserId.includes(r.performerUserId),$=!((me=t.value.relatedUserId)!=null&&me.length)||t.value.relatedUserId.includes(r.relatedUserId),M=!((pe=t.value.actions)!=null&&pe.length)||t.value.actions.includes(r.action),X=!((be=t.value.performerUserGroupId)!=null&&be.length)||r.performerUserGroupId&&t.value.performerUserGroupId.includes(r.performerUserGroupId);return re&&L&&$&&M&&X})}),F=()=>{if(!f.value)return;const h=f.value.filteredSortedRows,s=[d.value.map(L=>bt(L.label))].concat(h.map(L=>d.value.map($=>bt(typeof $.field=="function"?$.field(L):L[$.field===void 0?$.name:$.field])).join(","))).join(`\r
`),r=new Date,A=`User Activity ${`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()} ${r.getHours()}-${r.getMinutes()}-${r.getSeconds()}`}.csv`;fa(A,s,"text/csv")!==!0?Re({message:"Browser denied file download...",color:"negative",icon:"warning"}):Re({message:"File downloaded successfully...",color:"positive",icon:"download"})};return H(()=>o.selectedUser,()=>{t.value.performerUserId=[],t.value.relatedUserId=[],t.value.actions=[],t.value.term=""}),(h,s)=>(V(),Z(nt,null,{default:m(()=>[i(va,{ref_key:"tableRef",ref:f,rows:C.value,columns:d.value,"row-key":"activityId","rows-per-page-options":[-1],"visible-columns":S,filter:t.value.term,dense:"","hide-pagination":"","virtual-scroll":"",class:"header-table",style:{"min-height":"80vh",margin:"0.4rem"}},{top:m(()=>[i(G,{class:"text-h3"},{default:m(()=>[R(" Activity ")]),_:1}),i(ie),e.showSelections?(V(),Z(Sl,{key:0},{default:m(()=>[(V(),ue(de,null,ce(g,r=>i(B,{class:"q-px-md",key:r.value,dense:"",label:r.label,color:t.value.selection===r.value?"blue":"primary",onClick:n=>y(r.value)},null,8,["label","color","onClick"])),64))]),_:1})):Je("",!0),i(ie),i(j,{class:"bg-blue text-white q-ma-md"},{default:m(()=>[i(ee,{icon:"priority_high"}),R(" Dates in UTC ")]),_:1}),i(B,{color:"primary",icon:"download",label:"Download",onClick:F}),i(B,{dense:"",icon:v.value?"more_vert":"more_horiz",onClick:s[0]||(s[0]=r=>v.value=!v.value),class:"q-ml-md"},null,8,["icon"]),ml(i(wl,null,{default:m(()=>[i(nt,{class:"col"},{default:m(()=>[i(ll,{class:"q-pa-md",style:{"background-color":"var(--primary-white)"}},{default:m(()=>[i(Cl,null,{default:m(()=>[R(" Summary ")]),_:1}),e.showSelections?(V(),Z(G,{key:0},{default:m(()=>[ma,i(j,{color:"teal-3"},{default:m(()=>{var r;return[R(E(((r=g.find(n=>n.value===t.value.selection))==null?void 0:r.label)||""),1)]}),_:1})]),_:1})):Je("",!0),i(G,null,{default:m(()=>[ba,i(j,{color:"orange-3"},{default:m(()=>{var r;return[R(E(((r=b.find(n=>n.value===t.value.timeframe))==null?void 0:r.label)||""),1)]}),_:1}),R("from "+E(t.value.dateStart)+" to "+E(t.value.dateEnd),1)]),_:1}),i(G,null,{default:m(()=>{var r;return[_a,(V(!0),ue(de,null,ce([...new Set((r=f.value)==null?void 0:r.computedRows.map(n=>n.performerUserFullName))],(n,A)=>(V(),Z(j,{key:A,color:"purple-3"},{default:m(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:m(()=>{var r;return[ga,(V(!0),ue(de,null,ce([...new Set((r=f.value)==null?void 0:r.computedRows.map(n=>n.performerUserGroupName))],(n,A)=>(V(),Z(j,{key:A,color:"teal-3"},{default:m(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:m(()=>{var r;return[ya,(V(!0),ue(de,null,ce([...new Set((r=f.value)==null?void 0:r.computedRows.map(n=>n.relatedUserFullName).filter(Boolean))],(n,A)=>(V(),Z(j,{key:A,color:"light-green-3"},{default:m(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:m(()=>{var r;return[Sa,(V(!0),ue(de,null,ce([...new Set((r=f.value)==null?void 0:r.computedRows.map(n=>n.action))],(n,A)=>(V(),Z(j,{color:"blue-3",key:A},{default:m(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:m(()=>{var r;return[Ua,R(" "+E(((r=t.value.term)==null?void 0:r.length)>0?t.value.term:"None"),1)]}),_:1}),i(G,null,{default:m(()=>{var r;return[ha,R(" Showing "+E((r=f.value)==null?void 0:r.computedRowsNumber)+" of "+E(ve(l).activity.length)+" Rows where ",1),i(j,{color:"pink-3"},{default:m(()=>[R(E(ve(o).selectedUser.fullName),1)]),_:1}),R("was involved")]}),_:1})]),_:1})]),_:1})]),_:1},512),[[bl,v.value]])]),"header-cell-rowNumber":m(r=>[i(Y,{props:r},{default:m(()=>[i(ye,{size:"xs",color:"grey",name:"tag"})]),_:2},1032,["props"])]),"header-cell-date":m(r=>[i(Y,{props:r},{default:m(()=>[i(fe,{dense:"",round:""},{label:m(()=>[i(ee,{icon:"filter_list",size:"sm","text-color":"primary"}),R(" "+E(r.col.label),1)]),default:m(()=>[Q("div",pa,[(V(),ue(de,null,ce(b,n=>i(B,{key:n.value,outline:"",label:n.label,color:t.value.timeframe===n.value?"primary":"",onClick:A=>k(n.value)},null,8,["label","color","onClick"])),64))]),Q("div",Ca,[i(He,{outlined:"",debounce:"300",modelValue:t.value.dateStart,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.dateStart=n),label:"Date Start",type:"date",disable:t.value.timeframe!=="custom"},null,8,["modelValue","disable"]),i(He,{outlined:"",debounce:"300",modelValue:t.value.dateEnd,"onUpdate:modelValue":s[2]||(s[2]=n=>t.value.dateEnd=n),label:"Date End",type:"date",disable:t.value.timeframe!=="custom"},null,8,["modelValue","disable"])])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-time":m(r=>[i(Y,{props:r},{default:m(()=>[i(G,{style:{"font-size":"16px"}},{default:m(()=>[R(E(r.col.label),1)]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserFullName":m(r=>[i(Y,{props:r},{default:m(()=>[i(fe,{dense:"",round:""},{label:m(()=>[i(ee,{icon:"filter_list",size:"sm","text-color":t.value.performerUserId&&t.value.performerUserId.length>0?"primary":""},null,8,["text-color"]),R(" "+E(r.col.label),1)]),default:m(()=>[i(Ee,{style:{width:"256px"}},{default:m(()=>[i(ie),i(B,{dense:"",label:"Clear",onClick:s[3]||(s[3]=n=>t.value.performerUserId=[])})]),_:1}),i(Pe,{modelValue:t.value.performerUserId,"onUpdate:modelValue":s[4]||(s[4]=n=>t.value.performerUserId=n),options:q.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserGroupName":m(r=>[i(Y,{props:r},{default:m(()=>[i(fe,{dense:"",round:""},{label:m(()=>[i(ee,{icon:"filter_list",size:"sm","text-color":t.value.performerUserGroupId&&t.value.performerUserGroupId.length>0?"primary":""},null,8,["text-color"]),R(" "+E(r.col.label),1)]),default:m(()=>[i(Ee,{style:{width:"256px"}},{default:m(()=>[i(ie),i(B,{dense:"",label:"Clear",onClick:s[5]||(s[5]=n=>t.value.performerUserGroupId=[])})]),_:1}),i(Pe,{modelValue:t.value.performerUserGroupId,"onUpdate:modelValue":s[6]||(s[6]=n=>t.value.performerUserGroupId=n),options:x.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-relatedUserFullName":m(r=>[i(Y,{props:r},{default:m(()=>[i(fe,{dense:"",round:""},{label:m(()=>[i(ee,{icon:"filter_list",size:"sm","text-color":t.value.relatedUserId&&t.value.relatedUserId.length>0?"primary":""},null,8,["text-color"]),R(" "+E(r.col.label),1)]),default:m(()=>[i(Ee,{style:{width:"256px"}},{default:m(()=>[i(ie),i(B,{dense:"",label:"Clear",onClick:s[7]||(s[7]=n=>t.value.relatedUserId=[])})]),_:1}),i(Pe,{modelValue:t.value.relatedUserId,"onUpdate:modelValue":s[8]||(s[8]=n=>t.value.relatedUserId=n),options:O.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-action":m(r=>[i(Y,{props:r},{default:m(()=>[i(fe,{dense:"",round:""},{label:m(()=>[i(ee,{icon:"filter_list",size:"sm","text-color":t.value.actions&&t.value.actions.length>0?"primary":""},null,8,["text-color"]),R(" "+E(r.col.label),1)]),default:m(()=>[i(Ee,{style:{width:"192px"}},{default:m(()=>[i(ie),i(B,{dense:"",label:"Clear",onClick:s[9]||(s[9]=n=>t.value.actions=[])})]),_:1}),i(Pe,{modelValue:t.value.actions,"onUpdate:modelValue":s[10]||(s[10]=n=>t.value.actions=n),options:U.value.map(n=>({label:n,value:n})),type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-description":m(r=>[i(Y,{props:r},{default:m(()=>[i(fe,{dense:"",round:""},{label:m(()=>[i(ee,{icon:"search",size:"sm","text-color":t.value.term!==""?"primary":""},null,8,["text-color"]),R(" "+E(r.col.label),1)]),default:m(()=>[Q("div",wa,[i(He,{outlined:"",dense:"",debounce:"300",modelValue:t.value.term,"onUpdate:modelValue":s[12]||(s[12]=n=>t.value.term=n),type:"search",placeholder:"Description search\u2026",style:{"align-self":"center"}},{append:m(()=>[i(ye,{name:t.value.term?"close":"search",class:mt({"cursor-pointer":t.value.term}),onClick:s[11]||(s[11]=n=>t.value.term?t.value.term="":null)},null,8,["name","class"])]),_:1},8,["modelValue"])])]),_:2},1024)]),_:2},1032,["props"])]),body:m(r=>[i(Ll,{props:r},{default:m(()=>[i(te,{class:"text-grey"},{default:m(()=>[R(E(r.rowIndex+1),1)]),_:2},1024),i(te,{key:"date",props:r},{default:m(()=>[R(E(r.row.date),1)]),_:2},1032,["props"]),i(te,{key:"time",props:r},{default:m(()=>[R(E(r.row.time),1)]),_:2},1032,["props"]),i(te,{key:"performerUserFullName",props:r},{default:m(()=>[i(Tl,null,{default:m(()=>[R(E(r.row.performerUserFullName),1)]),_:2},1024)]),_:2},1032,["props"]),i(te,{key:"performerUserGroupName",props:r},{default:m(()=>[i(j,{"text-color":"white",color:"cyan",label:r.row.performerUserGroupName},null,8,["label"])]),_:2},1032,["props"]),i(te,{key:"relatedUserFullName",props:r},{default:m(()=>[Q("span",{class:mt({"text-grey":!r.row.relatedUserFullName})},E(r.row.relatedUserFullName||"No one"),3)]),_:2},1032,["props"]),i(te,{key:"action",props:r},{default:m(()=>{var n;return[i(j,{"text-color":"white",color:((n=ve(l).activityActions.find(A=>A.action===r.row.action))==null?void 0:n.color)||"grey"},{default:m(()=>{var A,re;return[i(ee,{size:"sm","text-color":"white",icon:((A=ve(l).activityActions.find(L=>L.action===r.row.action))==null?void 0:A.icon)||"question_mark",color:((re=ve(l).activityActions.find(L=>L.action===r.row.action))==null?void 0:re.color)||"grey"},null,8,["icon","color"]),R(" "+E(r.row.action),1)]}),_:2},1032,["color"])]}),_:2},1032,["props"]),i(te,{key:"description",props:r},{default:m(()=>[r.row.attachment?(V(),Z(B,{key:0,size:"sm",icon:"download","text-color":"primary",dense:"",onClick:n=>ve(l).downloadAttachment(r.row.activityId)},null,8,["onClick"])):Je("",!0),R(" "+E(r.row.description),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1}))}});var $a=_l(ka,[["__scopeId","data-v-1eff1106"]]);export{$a as A,La as a,Va as b,Qa as c,za as s,Ba as u};
