import{j as al,n as rl,Q as nt,b as G,a as ol,c as He}from"./QInput.84fa1fd2.js";import{Q as ie}from"./QSpace.4761e580.js";import{z as c,aU as pt,N as D,a as wt,s as X,A as u,B as oe,V as nl,a4 as me,C as le,aH as kt,aI as Tt,aP as st,U as Ye,ac as it,F as H,a6 as qt,G as Ke,ae as sl,ad as il,H as At,J as ul,K as ut,ay as cl,ax as ct,aV as We,aW as dt,aX as dl,P as xt,aY as vl,aa as ge,Q,i as fl,e as ml,aZ as bl,a_ as _l,a$ as Re,b0 as vt,b1 as ft,o as V,k as ee,w as f,l as i,p as R,g as ue,$ as ce,a0 as de,aQ as Je,n as te,Z as mt,a3 as bt,t as E,m as ve,W as B,aT as _t,_ as gl,b2 as gt,a1 as yl,a2 as Sl}from"./index.efca5f7a.js";import{Q as Ul}from"./QBtnGroup.2958f70e.js";import{m as hl,n as Cl,o as Ot,Q as pl,a as j}from"./QSelect.d7ae59e1.js";import{Q as wl}from"./QToolbarTitle.fb334878.js";import{Q as kl}from"./QToolbar.9438ef17.js";import{a as Tl,Q as fe}from"./QSeparator.5c47c29a.js";import{Q as Ee}from"./QCardActions.43375e64.js";import{u as Se,b as Ue,a as ql}from"./QItem.ce6630f1.js";import{o as Al,u as xl,a as Ie,Q as Ol}from"./QCheckbox.886c3bf1.js";import{Q as Rl}from"./QList.06b714be.js";const Rt=[{label:"Activity ID",value:"activityId",table:"z_ACT_Activity",field:"_kplt_Activity",type:"text",sql:"act"},{label:"Created At",value:"createdAt",table:"z_ACT_Activity",field:"CreatedAtUnix",type:"number",sql:"act"},{label:"Performer User ID",value:"performerUserId",table:"z_ACT_Activity",field:"_kflt_User_Performer",type:"text",sql:"act"},{label:"Performer User Name",value:"performerUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use1"},{label:"Performer User Surname",value:"performerUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use1"},{label:"Related User ID",value:"relatedUserId",table:"z_ACT_Activity",field:"_kflt_User_Related",type:"text",sql:"act"},{label:"Related User Name",value:"relatedUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use2"},{label:"Related User Surname",value:"relatedUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use2"},{label:"Performer User Group ID",value:"performerUserGroupId",table:"z_ACT_Activity",field:"PerformerUserGroupId",type:"text",sql:"act"},{label:"Attachment",value:"attachment",table:"z_ACT_Activity",field:"Attachment",type:"text",sql:"act"},{label:"Action",value:"action",table:"z_ACT_Activity",field:"Action",type:"text",sql:"act"},{label:"Description",value:"description",table:"z_ACT_Activity",field:"Description",type:"text",sql:"act"},{label:"Note",value:"note",table:"z_ACT_Activity",field:"Note",type:"text",sql:"act"}],P=c(()=>pt(Rt));c(()=>D("SELECT "+P.value.map(l=>l)+" FROM z_ACT_Activity AS act").value);const El=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin', 'Login User', 'Logout User', 'Re-Login ServiceScript', 'Login Dev', 'Logout Dev')`,e.value}),za=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin')`,e.value}),Va=c(()=>{const l=[0,1,9,10].map(d=>Rt[d]),o=pt(l),m=D("SELECT "+o.join(", ")+" FROM  z_ACT_Activity AS act");return m.value+=` WHERE act."Action" IN ('Submit Submission', 'Update Order Status') AND act."_kflt_User_Performer" IS NULL`,m.value}),Ba=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" NOT IN ('Login Admin', 'Logout Admin', 'Submit Submission', 'Update Order Status') AND act."_kflt_User_Performer" IS NULL`,e.value}),Pl=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Create User')`,e.value}),Nl=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Update User Group')`,e.value}),Il=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM  z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" = 'Update User Status' AND act."Description" LIKE '%to Inactive%'`,e.value}),Qa=c(()=>{const e=wt(),l=D("SELECT "+P.value.map(o=>o)+" FROM z_ACT_Activity AS act");return P.value.some(o=>o.indexOf("use1.")!==-1)&&(l.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(o=>o.indexOf("use2.")!==-1)&&(l.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),l.value+=` WHERE act."_kflt_User_Performer" ='${e.selectedUser.userId}' OR act."_kflt_User_Related" ='${e.selectedUser.userId}'`,l.value}),$a=c(()=>{const e=D("SELECT "+P.value.map(l=>l)+" FROM z_ACT_Activity AS act");return P.value.some(l=>l.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(l=>l.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=' WHERE act."_kflt_User_Performer" IS NOT NULL',e.value});var K=X({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:o}){const m=le(),{proxy:{$q:d}}=m,S=v=>{o("click",v)};return()=>{if(e.props===void 0)return u("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:S},oe(l.default));let v,b;const g=m.vnode.key;if(g){if(v=e.props.colsMap[g],v===void 0)return}else v=e.props.col;if(v.sortable===!0){const t=v.align==="right"?"unshift":"push";b=nl(l.default,[]),b[t](u(me,{class:v.__iconClass,name:d.iconSet.table.arrowUp}))}else b=oe(l.default);const y={class:v.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:v.headerStyle,onClick:t=>{v.sortable===!0&&e.props.sort(v),S(t)}};return u("th",y,b)}}});const Dl=u("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[u("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),u("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Fl=X({name:"QRadio",props:{...Se,...kt,...al,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:l,emit:o}){const{proxy:m}=le(),d=Ue(e,m.$q),S=Tt(e,Al),v=D(null),{refocusTargetEl:b,refocusTarget:g}=xl(e,v),y=c(()=>st(e.modelValue)===st(e.val)),t=c(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(d.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),U=c(()=>{const s=e.color!==void 0&&(e.keepColor===!0||y.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${y.value===!0?"truthy":"falsy"}${s}`}),q=c(()=>(y.value===!0?e.checkedIcon:e.uncheckedIcon)||null),x=c(()=>e.disable===!0?-1:e.tabindex||0),O=c(()=>{const s={type:"radio"};return e.name!==void 0&&Object.assign(s,{".checked":y.value===!0,"^checked":y.value===!0?"checked":void 0,name:e.name,value:e.val}),s}),k=rl(O);function p(s){s!==void 0&&(it(s),g(s)),e.disable!==!0&&y.value!==!0&&o("update:modelValue",e.val,s)}function F(s){(s.keyCode===13||s.keyCode===32)&&it(s)}function h(s){(s.keyCode===13||s.keyCode===32)&&p(s)}return Object.assign(m,{set:p}),()=>{const s=q.value!==null?[u("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[u(me,{class:"q-radio__icon",name:q.value})])]:[Dl];e.disable!==!0&&k(s,"unshift"," q-radio__native q-ma-none q-pa-none");const a=[u("div",{class:U.value,style:S.value,"aria-hidden":"true"},s)];b.value!==null&&a.push(b.value);const n=e.label!==void 0?Ye(l.default,[e.label]):oe(l.default);return n!==void 0&&a.push(u("div",{class:"q-radio__label q-anchor--skip"},n)),u("div",{ref:v,class:t.value,tabindex:x.value,role:"radio","aria-label":e.label,"aria-checked":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:F,onKeyup:h},a)}}});const Et={radio:Fl,checkbox:Ie,toggle:Ol},Ll=Object.keys(Et);var Pe=X({name:"QOptionGroup",props:{...Se,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(l=>"value"in l&&"label"in l)},name:String,type:{default:"radio",validator:e=>Ll.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:l,slots:o}){const{proxy:{$q:m}}=le(),d=Array.isArray(e.modelValue);e.type==="radio"?d===!0&&console.error("q-option-group: model should not be array"):d===!1&&console.error("q-option-group: model should be array in your case");const S=Ue(e,m),v=c(()=>Et[e.type]),b=c(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),g=c(()=>{const t={role:"group"};return e.type==="radio"&&(t.role="radiogroup",e.disable===!0&&(t["aria-disabled"]="true")),t});function y(t){l("update:modelValue",t)}return()=>u("div",{class:b.value,...g.value},e.options.map((t,U)=>{const q=o["label-"+U]!==void 0?()=>o["label-"+U](t):o.label!==void 0?()=>o.label(t):void 0;return u("div",[u(v.value,{modelValue:e.modelValue,val:t.value,name:t.name===void 0?e.name:t.name,disable:e.disable||t.disable,label:q===void 0?t.label:null,leftLabel:t.leftLabel===void 0?e.leftLabel:t.leftLabel,color:t.color===void 0?e.color:t.color,checkedIcon:t.checkedIcon,uncheckedIcon:t.uncheckedIcon,dark:t.dark||S.value,size:t.size===void 0?e.size:t.size,dense:e.dense,keepColor:t.keepColor===void 0?e.keepColor:t.keepColor,"onUpdate:modelValue":y},q)])}))}}),Y=X({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const o=le(),m=c(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return u("td",{class:m.value},oe(l.default));const d=o.vnode.key,S=(e.props.colsMap!==void 0?e.props.colsMap[d]:null)||e.props.col;if(S===void 0)return;const{row:v}=e.props;return u("td",{class:m.value+S.__tdClass(v),style:S.__tdStyle(v)},oe(l.default))}}}),yt=X({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const o=c(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>u("tr",{class:o.value},oe(l.default))}});const zl=["horizontal","vertical","cell","none"];var Vl=X({name:"QMarkupTable",props:{...Se,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>zl.includes(e)}},setup(e,{slots:l}){const o=le(),m=Ue(e,o.proxy.$q),d=c(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(m.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>u("div",{class:d.value},[u("table",{class:"q-table"},oe(l.default))])}});function Pt(e,l){return u("div",e,[u("table",{class:"q-table"},l)])}const Bl={list:Rl,table:Vl},Ql=["list","table","__qtable"];var $l=X({name:"QVirtualScroll",props:{...hl,type:{type:String,default:"list",validator:e=>Ql.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:o}){let m;const d=D(null),S=c(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:v,localResetVirtualScroll:b,padVirtualScroll:g,onVirtualScrollEvt:y}=Cl({virtualScrollLength:S,getVirtualScrollTarget:O,getVirtualScrollEl:x}),t=c(()=>{if(S.value===0)return[];const h=(s,a)=>({index:v.value.from+a,item:s});return e.itemsFn===void 0?e.items.slice(v.value.from,v.value.to).map(h):e.itemsFn(v.value.from,v.value.to-v.value.from).map(h)}),U=c(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=c(()=>e.scrollTarget!==void 0?{}:{tabindex:0});H(S,()=>{b()}),H(()=>e.scrollTarget,()=>{p(),k()});function x(){return d.value.$el||d.value}function O(){return m}function k(){m=ul(x(),e.scrollTarget),m.addEventListener("scroll",y,ut.passive)}function p(){m!==void 0&&(m.removeEventListener("scroll",y,ut.passive),m=void 0)}function F(){let h=g(e.type==="list"?"div":"tbody",t.value.map(l.default));return l.before!==void 0&&(h=l.before().concat(h)),Ye(l.after,h)}return qt(()=>{b()}),Ke(()=>{k()}),sl(()=>{k()}),il(()=>{p()}),At(()=>{p()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Pt({ref:d,class:"q-table__middle "+U.value},F()):u(Bl[e.type],{...o,ref:d,class:[o.class,U.value],...q.value},F)}}});const Ml={xs:2,sm:4,md:6,lg:10,xl:14};function St(e,l,o){return{transform:l===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Gl=X({name:"QLinearProgress",props:{...Se,...kt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:o}=le(),m=Ue(e,o.$q),d=Tt(e,Ml),S=c(()=>e.indeterminate===!0||e.query===!0),v=c(()=>e.reverse!==e.query),b=c(()=>({...d.value!==null?d.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),g=c(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=c(()=>St(e.buffer!==void 0?e.buffer:1,v.value,o.$q)),t=c(()=>`with${e.instantFeedback===!0?"out":""}-transition`),U=c(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${t.value} q-linear-progress__track--${m.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),q=c(()=>St(S.value===!0?1:e.value,v.value,o.$q)),x=c(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${t.value} q-linear-progress__model--${S.value===!0?"in":""}determinate`),O=c(()=>({width:`${e.value*100}%`})),k=c(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${t.value}`);return()=>{const p=[u("div",{class:U.value,style:y.value}),u("div",{class:x.value,style:q.value})];return e.stripe===!0&&S.value===!1&&p.push(u("div",{class:k.value,style:O.value})),u("div",{class:g.value,style:b.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ye(l.default,p))}}});let ye=0;const jl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Hl=["update:fullscreen","fullscreen"];function Jl(){const e=le(),{props:l,emit:o,proxy:m}=e;let d,S,v;const b=D(!1);cl(e)===!0&&H(()=>m.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&t()}),H(()=>l.fullscreen,U=>{b.value!==U&&g()}),H(b,U=>{o("update:fullscreen",U),o("fullscreen",U)});function g(){b.value===!0?t():y()}function y(){b.value!==!0&&(b.value=!0,v=m.$el.parentNode,v.replaceChild(S,m.$el),document.body.appendChild(m.$el),ye++,ye===1&&document.body.classList.add("q-body--fullscreen-mixin"),d={handler:t},ct.add(d))}function t(){b.value===!0&&(d!==void 0&&(ct.remove(d),d=void 0),v.replaceChild(m.$el,S),b.value=!1,ye=Math.max(0,ye-1),ye===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),m.$el.scrollIntoView!==void 0&&setTimeout(()=>{m.$el.scrollIntoView()})))}return qt(()=>{S=document.createElement("span")}),Ke(()=>{l.fullscreen===!0&&y()}),At(t),Object.assign(m,{toggleFullscreen:g,setFullscreen:y,exitFullscreen:t}),{inFullscreen:b,toggleFullscreen:g}}function Wl(e,l){return new Date(e)-new Date(l)}const Yl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Kl(e,l,o,m){const d=c(()=>{const{sortBy:b}=l.value;return b&&o.value.find(g=>g.name===b)||null}),S=c(()=>e.sortMethod!==void 0?e.sortMethod:(b,g,y)=>{const t=o.value.find(x=>x.name===g);if(t===void 0||t.field===void 0)return b;const U=y===!0?-1:1,q=typeof t.field=="function"?x=>t.field(x):x=>x[t.field];return b.sort((x,O)=>{let k=q(x),p=q(O);return t.rawSort!==void 0?t.rawSort(k,p,x,O)*U:k==null?-1*U:p==null?1*U:t.sort!==void 0?t.sort(k,p,x,O)*U:We(k)===!0&&We(p)===!0?(k-p)*U:dt(k)===!0&&dt(p)===!0?Wl(k,p)*U:typeof k=="boolean"&&typeof p=="boolean"?(k-p)*U:([k,p]=[k,p].map(F=>(F+"").toLocaleString().toLowerCase()),k<p?-1*U:k===p?0:U)})});function v(b){let g=e.columnSortOrder;if(dl(b)===!0)b.sortOrder&&(g=b.sortOrder),b=b.name;else{const U=o.value.find(q=>q.name===b);U!==void 0&&U.sortOrder&&(g=U.sortOrder)}let{sortBy:y,descending:t}=l.value;y!==b?(y=b,t=g==="da"):e.binaryStateSort===!0?t=!t:t===!0?g==="ad"?y=null:t=!1:g==="ad"?t=!0:y=null,m({sortBy:y,descending:t,page:1})}return{columnToSort:d,computedSortMethod:S,sort:v}}const Xl={filter:[String,Object],filterMethod:Function};function Zl(e,l){const o=c(()=>e.filterMethod!==void 0?e.filterMethod:(m,d,S,v)=>{const b=d?d.toLowerCase():"";return m.filter(g=>S.some(y=>{const t=v(y,g)+"";return(t==="undefined"||t==="null"?"":t.toLowerCase()).indexOf(b)!==-1}))});return H(()=>e.filter,()=>{xt(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function ea(e,l){for(const o in l)if(l[o]!==e[o])return!1;return!0}function Ut(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const ta={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function la(e,l){const{props:o,emit:m}=e,d=D(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),S=c(()=>{const t=o["onUpdate:pagination"]!==void 0?{...d.value,...o.pagination}:d.value;return Ut(t)}),v=c(()=>S.value.rowsNumber!==void 0);function b(t){g({pagination:t,filter:o.filter})}function g(t={}){xt(()=>{m("request",{pagination:t.pagination||S.value,filter:t.filter||o.filter,getCellValue:l})})}function y(t,U){const q=Ut({...S.value,...t});if(ea(S.value,q)===!0){v.value===!0&&U===!0&&b(q);return}if(v.value===!0){b(q);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?m("update:pagination",q):d.value=q}return{innerPagination:d,computedPagination:S,isServerSide:v,requestServerInteraction:g,setPagination:y}}function aa(e,l,o,m,d,S){const{props:v,emit:b,proxy:{$q:g}}=e,y=c(()=>m.value===!0?o.value.rowsNumber||0:S.value),t=c(()=>{const{page:a,rowsPerPage:n}=o.value;return(a-1)*n}),U=c(()=>{const{page:a,rowsPerPage:n}=o.value;return a*n}),q=c(()=>o.value.page===1),x=c(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/o.value.rowsPerPage))),O=c(()=>U.value===0?!0:o.value.page>=x.value),k=c(()=>(v.rowsPerPageOptions.includes(l.value.rowsPerPage)?v.rowsPerPageOptions:[l.value.rowsPerPage].concat(v.rowsPerPageOptions)).map(n=>({label:n===0?g.lang.table.allRows:""+n,value:n})));H(x,(a,n)=>{if(a===n)return;const A=o.value.page;a&&!A?d({page:1}):a<A&&d({page:a})});function p(){d({page:1})}function F(){const{page:a}=o.value;a>1&&d({page:a-1})}function h(){const{page:a,rowsPerPage:n}=o.value;U.value>0&&a*n<y.value&&d({page:a+1})}function s(){d({page:x.value})}return v["onUpdate:pagination"]!==void 0&&b("update:pagination",{...o.value}),{firstRowIndex:t,lastRowIndex:U,isFirstPage:q,isLastPage:O,pagesNumber:x,computedRowsPerPageOptions:k,computedRowsNumber:y,firstPage:p,prevPage:F,nextPage:h,lastPage:s}}const ra={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},oa=["update:selected","selection"];function na(e,l,o,m){const d=c(()=>{const O={};return e.selected.map(m.value).forEach(k=>{O[k]=!0}),O}),S=c(()=>e.selection!=="none"),v=c(()=>e.selection==="single"),b=c(()=>e.selection==="multiple"),g=c(()=>o.value.length!==0&&o.value.every(O=>d.value[m.value(O)]===!0)),y=c(()=>g.value!==!0&&o.value.some(O=>d.value[m.value(O)]===!0)),t=c(()=>e.selected.length);function U(O){return d.value[O]===!0}function q(){l("update:selected",[])}function x(O,k,p,F){l("selection",{rows:k,added:p,keys:O,evt:F});const h=v.value===!0?p===!0?k:[]:p===!0?e.selected.concat(k):e.selected.filter(s=>O.includes(m.value(s))===!1);l("update:selected",h)}return{hasSelectionMode:S,singleSelection:v,multipleSelection:b,allRowsSelected:g,someRowsSelected:y,rowsSelectedNumber:t,isRowSelected:U,clearSelection:q,updateSelection:x}}function ht(e){return Array.isArray(e)?e.slice():[]}const sa={expanded:Array},ia=["update:expanded"];function ua(e,l){const o=D(ht(e.expanded));H(()=>e.expanded,v=>{o.value=ht(v)});function m(v){return o.value.includes(v)}function d(v){e.expanded!==void 0?l("update:expanded",v):o.value=v}function S(v,b){const g=o.value.slice(),y=g.indexOf(v);b===!0?y===-1&&(g.push(v),d(g)):y!==-1&&(g.splice(y,1),d(g))}return{isRowExpanded:m,setExpanded:d,updateExpanded:S}}const ca={visibleColumns:Array};function da(e,l,o){const m=c(()=>{if(e.columns!==void 0)return e.columns;const b=e.rows[0];return b!==void 0?Object.keys(b).map(g=>({name:g,label:g.toUpperCase(),field:g,align:We(b[g])?"right":"left",sortable:!0})):[]}),d=c(()=>{const{sortBy:b,descending:g}=l.value;return(e.visibleColumns!==void 0?m.value.filter(t=>t.required===!0||e.visibleColumns.includes(t.name)===!0):m.value).map(t=>{const U=t.align||"right",q=`text-${U}`;return{...t,align:U,__iconClass:`q-table__sort-icon q-table__sort-icon--${U}`,__thClass:q+(t.headerClasses!==void 0?" "+t.headerClasses:"")+(t.sortable===!0?" sortable":"")+(t.name===b?` sorted ${g===!0?"sort-desc":""}`:""),__tdStyle:t.style!==void 0?typeof t.style!="function"?()=>t.style:t.style:()=>null,__tdClass:t.classes!==void 0?typeof t.classes!="function"?()=>q+" "+t.classes:x=>q+" "+t.classes(x):()=>q}})}),S=c(()=>{const b={};return d.value.forEach(g=>{b[g.name]=g}),b}),v=c(()=>e.tableColspan!==void 0?e.tableColspan:d.value.length+(o.value===!0?1:0));return{colList:m,computedCols:d,computedColsMap:S,computedColspan:v}}const Ne="q-table__bottom row items-center",Nt={};Ot.forEach(e=>{Nt[e]={}});var va=X({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Nt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Se,...jl,...ca,...Xl,...ta,...sa,...ra,...Yl},emits:["request","virtualScroll",...Hl,...ia,...oa],setup(e,{slots:l,emit:o}){const m=le(),{proxy:{$q:d}}=m,S=Ue(e,d),{inFullscreen:v,toggleFullscreen:b}=Jl(),g=c(()=>typeof e.rowKey=="function"?e.rowKey:r=>r[e.rowKey]),y=D(null),t=D(null),U=c(()=>e.grid!==!0&&e.virtualScroll===!0),q=c(()=>" q-table__card"+(S.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=c(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(S.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(v.value===!0?" fullscreen scroll":"")),O=c(()=>x.value+(e.loading===!0?" q-table--loading":""));H(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{U.value===!0&&t.value!==null&&t.value.reset()});const{innerPagination:k,computedPagination:p,isServerSide:F,requestServerInteraction:h,setPagination:s}=la(m,ne),{computedFilterMethod:a}=Zl(e,s),{isRowExpanded:n,setExpanded:A,updateExpanded:re}=ua(e,o),L=c(()=>{let r=e.rows;if(F.value===!0||r.length===0)return r;const{sortBy:_,descending:C}=p.value;return e.filter&&(r=a.value(r,e.filter,J.value,ne)),Ft.value!==null&&(r=Lt.value(e.rows===r?r.slice():r,_,C)),r}),$=c(()=>L.value.length),M=c(()=>{let r=L.value;if(F.value===!0)return r;const{rowsPerPage:_}=p.value;return _!==0&&(we.value===0&&e.rows!==r?r.length>ke.value&&(r=r.slice(0,ke.value)):r=r.slice(we.value,ke.value)),r}),{hasSelectionMode:Z,singleSelection:he,multipleSelection:be,allRowsSelected:Ce,someRowsSelected:_e,rowsSelectedNumber:De,isRowSelected:Fe,clearSelection:It,updateSelection:pe}=na(e,o,M,g),{colList:Dt,computedCols:J,computedColsMap:Xe,computedColspan:Ze}=da(e,p,Z),{columnToSort:Ft,computedSortMethod:Lt,sort:Le}=Kl(e,p,Dt,s),{firstRowIndex:we,lastRowIndex:ke,isFirstPage:ze,isLastPage:Ve,pagesNumber:Te,computedRowsPerPageOptions:zt,computedRowsNumber:qe,firstPage:Be,prevPage:Qe,nextPage:$e,lastPage:Me}=aa(m,k,p,F,s,$),Vt=c(()=>M.value.length===0),Bt=c(()=>{const r={};return Ot.forEach(_=>{r[_]=e[_]}),r.virtualScrollItemSize===void 0&&(r.virtualScrollItemSize=e.dense===!0?28:48),r});function Qt(){U.value===!0&&t.value.reset()}function $t(){if(e.grid===!0)return tl();const r=e.hideHeader!==!0?rt:null;if(U.value===!0){const C=l["top-row"],w=l["bottom-row"],T={default:I=>tt(I.item,l.body,I.index)};if(C!==void 0){const I=u("tbody",C({cols:J.value}));T.before=r===null?()=>I:()=>[r()].concat(I)}else r!==null&&(T.before=r);return w!==void 0&&(T.after=()=>u("tbody",w({cols:J.value}))),u($l,{ref:t,class:e.tableClass,style:e.tableStyle,...Bt.value,scrollTarget:e.virtualScrollTarget,items:M.value,type:"__qtable",tableColspan:Ze.value,onVirtualScroll:Gt},T)}const _=[jt()];return r!==null&&_.unshift(r()),Pt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},_)}function Mt(r,_){if(t.value!==null){t.value.scrollTo(r,_);return}r=parseInt(r,10);const C=y.value.querySelector(`tbody tr:nth-of-type(${r+1})`);if(C!==null){const w=y.value.querySelector(".q-table__middle.scroll"),T=C.offsetTop-e.virtualScrollStickySizeStart,I=T<w.scrollTop?"decrease":"increase";w.scrollTop=T,o("virtualScroll",{index:r,from:0,to:k.value.rowsPerPage-1,direction:I})}}function Gt(r){o("virtualScroll",r)}function et(){return[u(Gl,{class:"q-table__linear-progress",color:e.color,dark:S.value,indeterminate:!0,trackColor:"transparent"})]}function tt(r,_,C){const w=g.value(r),T=Fe(w);if(_!==void 0)return _(lt({key:w,row:r,pageIndex:C,__trClass:T?"selected":""}));const I=l["body-cell"],N=J.value.map(z=>{const xe=l[`body-cell-${z.name}`],Oe=xe!==void 0?xe:I;return Oe!==void 0?Oe(Ht({key:w,row:r,pageIndex:C,col:z})):u("td",{class:z.__tdClass(r),style:z.__tdStyle(r)},ne(z,r))});if(Z.value===!0){const z=l["body-selection"],xe=z!==void 0?z(Jt({key:w,row:r,pageIndex:C})):[u(Ie,{modelValue:T,color:e.color,dark:S.value,dense:e.dense,"onUpdate:modelValue":(Oe,ll)=>{pe([w],[r],Oe,ll)}})];N.unshift(u("td",{class:"q-table--col-auto-width"},xe))}const W={key:w,class:{selected:T}};return e.onRowClick!==void 0&&(W.class["cursor-pointer"]=!0,W.onClick=z=>{o("RowClick",z,r,C)}),e.onRowDblclick!==void 0&&(W.class["cursor-pointer"]=!0,W.onDblclick=z=>{o("RowDblclick",z,r,C)}),e.onRowContextmenu!==void 0&&(W.class["cursor-pointer"]=!0,W.onContextmenu=z=>{o("RowContextmenu",z,r,C)}),u("tr",W,N)}function jt(){const r=l.body,_=l["top-row"],C=l["bottom-row"];let w=M.value.map((T,I)=>tt(T,r,I));return _!==void 0&&(w=_({cols:J.value}).concat(w)),C!==void 0&&(w=w.concat(C({cols:J.value}))),u("tbody",w)}function lt(r){return Ge(r),r.cols=r.cols.map(_=>ge({..._},"value",()=>ne(_,r.row))),r}function Ht(r){return Ge(r),ge(r,"value",()=>ne(r.col,r.row)),r}function Jt(r){return Ge(r),r}function Ge(r){Object.assign(r,{cols:J.value,colsMap:Xe.value,sort:Le,rowIndex:we.value+r.pageIndex,color:e.color,dark:S.value,dense:e.dense}),Z.value===!0&&ge(r,"selected",()=>Fe(r.key),(_,C)=>{pe([r.key],[r.row],_,C)}),ge(r,"expand",()=>n(r.key),_=>{re(r.key,_)})}function ne(r,_){const C=typeof r.field=="function"?r.field(_):_[r.field];return r.format!==void 0?r.format(C,_):C}const se=c(()=>({pagination:p.value,pagesNumber:Te.value,isFirstPage:ze.value,isLastPage:Ve.value,firstPage:Be,prevPage:Qe,nextPage:$e,lastPage:Me,inFullscreen:v.value,toggleFullscreen:b}));function Wt(){const r=l.top,_=l["top-left"],C=l["top-right"],w=l["top-selection"],T=Z.value===!0&&w!==void 0&&De.value>0,I="q-table__top relative-position row items-center";if(r!==void 0)return u("div",{class:I},[r(se.value)]);let N;if(T===!0?N=w(se.value).slice():(N=[],_!==void 0?N.push(u("div",{class:"q-table__control"},[_(se.value)])):e.title&&N.push(u("div",{class:"q-table__control"},[u("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(N.push(u("div",{class:"q-table__separator col"})),N.push(u("div",{class:"q-table__control"},[C(se.value)]))),N.length!==0)return u("div",{class:I},N)}const at=c(()=>_e.value===!0?null:Ce.value);function rt(){const r=Yt();return e.loading===!0&&l.loading===void 0&&r.push(u("tr",{class:"q-table__progress"},[u("th",{class:"relative-position",colspan:Ze.value},et())])),u("thead",r)}function Yt(){const r=l.header,_=l["header-cell"];if(r!==void 0)return r(je({header:!0})).slice();const C=J.value.map(w=>{const T=l[`header-cell-${w.name}`],I=T!==void 0?T:_,N=je({col:w});return I!==void 0?I(N):u(K,{key:w.name,props:N},()=>w.label)});if(he.value===!0&&e.grid!==!0)C.unshift(u("th",{class:"q-table--col-auto-width"}," "));else if(be.value===!0){const w=l["header-selection"],T=w!==void 0?w(je({})):[u(Ie,{color:e.color,modelValue:at.value,dark:S.value,dense:e.dense,"onUpdate:modelValue":ot})];C.unshift(u("th",{class:"q-table--col-auto-width"},T))}return[u("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function je(r){return Object.assign(r,{cols:J.value,sort:Le,colsMap:Xe.value,color:e.color,dark:S.value,dense:e.dense}),be.value===!0&&ge(r,"selected",()=>at.value,ot),r}function ot(r){_e.value===!0&&(r=!1),pe(M.value.map(g.value),M.value,r)}const Ae=c(()=>{const r=[e.iconFirstPage||d.iconSet.table.firstPage,e.iconPrevPage||d.iconSet.table.prevPage,e.iconNextPage||d.iconSet.table.nextPage,e.iconLastPage||d.iconSet.table.lastPage];return d.lang.rtl===!0?r.reverse():r});function Kt(){if(e.hideBottom===!0)return;if(Vt.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||d.lang.table.loading:e.filter?e.noResultsLabel||d.lang.table.noResults:e.noDataLabel||d.lang.table.noData,w=l["no-data"],T=w!==void 0?[w({message:C,icon:d.iconSet.table.warning,filter:e.filter})]:[u(me,{class:"q-table__bottom-nodata-icon",name:d.iconSet.table.warning}),C];return u("div",{class:Ne+" q-table__bottom--nodata"},T)}const r=l.bottom;if(r!==void 0)return u("div",{class:Ne},[r(se.value)]);const _=e.hideSelectedBanner!==!0&&Z.value===!0&&De.value>0?[u("div",{class:"q-table__control"},[u("div",[(e.selectedRowsLabel||d.lang.table.selectedRecords)(De.value)])])]:[];if(e.hidePagination!==!0)return u("div",{class:Ne+" justify-end"},Zt(_));if(_.length!==0)return u("div",{class:Ne},_)}function Xt(r){s({page:1,rowsPerPage:r.value})}function Zt(r){let _;const{rowsPerPage:C}=p.value,w=e.paginationLabel||d.lang.table.pagination,T=l.pagination,I=e.rowsPerPageOptions.length>1;if(r.push(u("div",{class:"q-table__separator col"})),I===!0&&r.push(u("div",{class:"q-table__control"},[u("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||d.lang.table.recordsPerPage]),u(pl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:zt.value,displayValue:C===0?d.lang.table.allRows:C,dark:S.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Xt})])),T!==void 0)_=T(se.value);else if(_=[u("span",C!==0?{class:"q-table__bottom-item"}:{},[C?w(we.value+1,Math.min(ke.value,qe.value),qe.value):w(1,$.value,qe.value)])],C!==0&&Te.value>1){const N={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(N.size="sm"),Te.value>2&&_.push(u(Q,{key:"pgFirst",...N,icon:Ae.value[0],disable:ze.value,onClick:Be})),_.push(u(Q,{key:"pgPrev",...N,icon:Ae.value[1],disable:ze.value,onClick:Qe}),u(Q,{key:"pgNext",...N,icon:Ae.value[2],disable:Ve.value,onClick:$e})),Te.value>2&&_.push(u(Q,{key:"pgLast",...N,icon:Ae.value[3],disable:Ve.value,onClick:Me}))}return r.push(u("div",{class:"q-table__control"},_)),r}function el(){const r=e.gridHeader===!0?[u("table",{class:"q-table"},[rt()])]:e.loading===!0&&l.loading===void 0?et():void 0;return u("div",{class:"q-table__middle"},r)}function tl(){const r=l.item!==void 0?l.item:_=>{const C=_.cols.map(T=>u("div",{class:"q-table__grid-item-row"},[u("div",{class:"q-table__grid-item-title"},[T.label]),u("div",{class:"q-table__grid-item-value"},[T.value])]));if(Z.value===!0){const T=l["body-selection"],I=T!==void 0?T(_):[u(Ie,{modelValue:_.selected,color:e.color,dark:S.value,dense:e.dense,"onUpdate:modelValue":(N,W)=>{pe([_.key],[_.row],N,W)}})];C.unshift(u("div",{class:"q-table__grid-item-row"},I),u(Tl,{dark:S.value}))}const w={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(w.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(w.onClick=T=>{o("RowClick",T,_.row,_.pageIndex)}),e.onRowDblclick!==void 0&&(w.onDblclick=T=>{o("RowDblclick",T,_.row,_.pageIndex)})),u("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(_.selected===!0?" q-table__grid-item--selected":"")},[u("div",w,C)])};return u("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},M.value.map((_,C)=>r(lt({key:g.value(_),row:_,pageIndex:C}))))}return Object.assign(m.proxy,{requestServerInteraction:h,setPagination:s,firstPage:Be,prevPage:Qe,nextPage:$e,lastPage:Me,isRowSelected:Fe,clearSelection:It,isRowExpanded:n,setExpanded:A,sort:Le,resetVirtualScroll:Qt,scrollTo:Mt,getCellValue:ne}),vl(m.proxy,{filteredSortedRows:()=>L.value,computedRows:()=>M.value,computedRowsNumber:()=>qe.value}),()=>{const r=[Wt()],_={ref:y,class:O.value};return e.grid===!0?r.push(el()):Object.assign(_,{class:[_.class,e.cardClass],style:e.cardStyle}),r.push($t(),Kt()),e.loading===!0&&l.loading!==void 0&&r.push(l.loading()),u("div",_,r)}}});function Ct(e){setTimeout(()=>{window.URL.revokeObjectURL(e.href)},1e4),e.remove()}function fa(e,l,o={}){const{mimeType:m,byteOrderMark:d,encoding:S}=typeof o=="string"?{mimeType:o}:o,v=S!==void 0?new TextEncoder(S).encode([l]):l,b=d!==void 0?[d,v]:[v],g=new Blob(b,{type:m||"application/octet-stream"}),y=document.createElement("a");y.href=window.URL.createObjectURL(g),y.setAttribute("download",e),typeof y.download=="undefined"&&y.setAttribute("target","_blank"),y.classList.add("hidden"),y.style.position="fixed",document.body.appendChild(y);try{return y.click(),Ct(y),!0}catch(t){return Ct(y),t}}const ae=e=>(yl("data-v-3f18c374"),e=e(),Sl(),e),ma=ae(()=>B("span",{style:{"font-weight":"bold"}},"Selection:",-1)),ba=ae(()=>B("span",{style:{"font-weight":"bold"}},"Timeframe:",-1)),_a=ae(()=>B("span",{style:{"font-weight":"bold"}},"Performer Users:",-1)),ga=ae(()=>B("span",{style:{"font-weight":"bold"}},"Performer Groups:",-1)),ya=ae(()=>B("span",{style:{"font-weight":"bold"}},"Related Users:",-1)),Sa=ae(()=>B("span",{style:{"font-weight":"bold"}},"Actions:",-1)),Ua=ae(()=>B("span",{style:{"font-weight":"bold"}},"Decription Filter:",-1)),ha=ae(()=>B("span",{style:{"font-weight":"bold"}},"Size:",-1)),Ca={class:"q-ma-md column",style:{gap:"0.6rem"}},pa={class:"q-ma-md column",style:{gap:"0.6rem"}},wa={class:"q-mx-md"},ka={class:"text-left"},Ta=fl({__name:"ActivityTable",props:{showSelections:{type:Boolean,default:!0}},setup(e){const l=ml(),o=wt();Ke(()=>{k("today")});const m=D(null),d=D([{name:"rowNumber",label:"rowNumber",align:"right",field:"",sortable:!1},{name:"activityId",label:"ID",align:"left",field:"activityId",sortable:!1},{name:"date",label:"Date",align:"left",field:"date",sortable:!1},{name:"time",label:"Time",align:"left",field:"time",sortable:!1},{name:"performerUserFullName",label:"User",align:"left",field:"performerUserFullName",sortable:!1},{name:"performerUserGroupName",label:"Group",align:"left",field:"performerUserGroupName",sortable:!1},{name:"relatedUserFullName",label:"Related User",align:"left",field:"relatedUserFullName",sortable:!1},{name:"action",label:"Action",align:"left",field:"action",sortable:!1},{name:"description",label:"Description",align:"left",field:"description",sortable:!1}]),S=["rowNumber","date","time","performerUserFullName","performerUserGroupName","relatedUserFullName","action","description"],v=D(!1),b=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"monthToDate",label:"Month to Date"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}],g=[{value:"access",label:"Access"},{value:"userCreated",label:"New Users"},{value:"userUpdateGroup",label:"Group Changes"},{value:"userInactive",label:"Inactivated"}],y=h=>{switch(t.value.selection=h,t.value.performerUserId=[],t.value.relatedUserId=[],t.value.actions=[],t.value.term="",h){case"access":l.readActivity(El.value);break;case"userCreated":l.readActivity(Pl.value);break;case"userUpdateGroup":l.readActivity(Nl.value);break;case"userInactive":l.readActivity(Il.value);break}},t=D({term:"",selection:"access",timeframe:"today",dateStart:"",dateEnd:"",searchColumns:["description"],performerUserId:[],performerUserGroupId:[],relatedUserId:[],actions:[]}),U=c(()=>[...new Set(l.activity.map(h=>h.action))]),q=c(()=>l.activity.map(h=>({value:h.performerUserId,label:h.performerUserFullName})).filter((h,s,a)=>s===a.findIndex(n=>n.label===h.label&&n.value===h.value))),x=c(()=>l.activity.map(h=>({value:h.performerUserGroupId||"",label:h.performerUserGroupName||""})).filter((h,s,a)=>s===a.findIndex(n=>n.label===h.label&&n.value===h.value))),O=c(()=>l.activity.map(h=>({value:h.relatedUserId,label:h.relatedUserFullName})).filter((h,s,a)=>s===a.findIndex(n=>n.label===h.label&&n.value===h.value))),k=h=>{t.value.timeframe=h;const s=bl(),a=_l(s);let n=new Date,A=new Date;switch(h){case"today":n=a,A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),23,59,59));break;case"yesterday":n=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()-1)),A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()-1,23,59,59));break;case"monthToDate":n=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),1)),A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),23,59,59));break;case"lastMonth":n=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth()-1,1)),A=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),0));break;case"custom":n=new Date(t.value.dateStart),A=new Date(t.value.dateEnd),isNaN(n.getTime())||isNaN(A.getTime())?Re({message:"Invalid custom date range",color:"negative",icon:"warning"}):A<n&&Re({message:"End date cannot be before start date",color:"negative",icon:"warning"});break}t.value.dateStart=vt(n),t.value.dateEnd=vt(A)},p=c(()=>{const h=ft(t.value.dateStart),s=ft(t.value.dateEnd);return l.activity.filter(a=>{var he,be,Ce,_e;const n=new Date(a.createdAt),A=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),re=A>=h&&A<=s,L=!((he=t.value.performerUserId)!=null&&he.length)||t.value.performerUserId.includes(a.performerUserId),$=!((be=t.value.relatedUserId)!=null&&be.length)||t.value.relatedUserId.includes(a.relatedUserId),M=!((Ce=t.value.actions)!=null&&Ce.length)||t.value.actions.includes(a.action),Z=!((_e=t.value.performerUserGroupId)!=null&&_e.length)||a.performerUserGroupId&&t.value.performerUserGroupId.includes(a.performerUserGroupId);return re&&L&&$&&M&&Z})}),F=()=>{if(!m.value)return;const h=m.value.filteredSortedRows,s=[d.value.map(L=>gt(L.label))].concat(h.map(L=>d.value.map($=>gt(typeof $.field=="function"?$.field(L):L[$.field===void 0?$.name:$.field])).join(","))).join(`\r
`),a=new Date,A=`User Activity ${`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()} ${a.getHours()}-${a.getMinutes()}-${a.getSeconds()}`}.csv`;fa(A,s,"text/csv")!==!0?Re({message:"Browser denied file download...",color:"negative",icon:"warning"}):Re({message:"File downloaded successfully...",color:"positive",icon:"download"})};return H(()=>o.selectedUser,()=>{t.value.performerUserId=[],t.value.relatedUserId=[],t.value.actions=[],t.value.term=""}),(h,s)=>(V(),ee(nt,null,{default:f(()=>[i(va,{ref_key:"tableRef",ref:m,rows:p.value,columns:d.value,"row-key":"activityId","rows-per-page-options":[-1],"visible-columns":S,filter:t.value.term,dense:"","hide-pagination":"","virtual-scroll":"",class:"header-table",style:{"min-height":"80vh",margin:"0.4rem"}},{top:f(()=>[i(G,{class:"text-h3"},{default:f(()=>[R(" Activity ")]),_:1}),i(ie),e.showSelections?(V(),ee(Ul,{key:0},{default:f(()=>[(V(),ue(de,null,ce(g,a=>i(Q,{class:"q-px-md",key:a.value,dense:"",label:a.label,color:t.value.selection===a.value?"blue":"primary",onClick:n=>y(a.value)},null,8,["label","color","onClick"])),64))]),_:1})):Je("",!0),i(ie),i(j,{class:"bg-blue text-white q-ma-md"},{default:f(()=>[i(te,{icon:"priority_high"}),R(" Dates in UTC ")]),_:1}),i(Q,{color:"primary",icon:"download",label:"Download",onClick:F}),i(Q,{dense:"",icon:v.value?"more_vert":"more_horiz",onClick:s[0]||(s[0]=a=>v.value=!v.value),class:"q-ml-md"},null,8,["icon"]),mt(i(kl,null,{default:f(()=>[i(nt,{class:"col"},{default:f(()=>[i(ol,{class:"q-pa-md",style:{"background-color":"var(--primary-white)"}},{default:f(()=>[i(wl,null,{default:f(()=>[R(" Summary ")]),_:1}),e.showSelections?(V(),ee(G,{key:0},{default:f(()=>[ma,i(j,{color:"teal-3"},{default:f(()=>{var a;return[R(E(((a=g.find(n=>n.value===t.value.selection))==null?void 0:a.label)||""),1)]}),_:1})]),_:1})):Je("",!0),i(G,null,{default:f(()=>[ba,i(j,{color:"orange-3"},{default:f(()=>{var a;return[R(E(((a=b.find(n=>n.value===t.value.timeframe))==null?void 0:a.label)||""),1)]}),_:1}),R("from "+E(t.value.dateStart)+" to "+E(t.value.dateEnd),1)]),_:1}),i(G,null,{default:f(()=>{var a;return[_a,(V(!0),ue(de,null,ce([...new Set((a=m.value)==null?void 0:a.computedRows.map(n=>n.performerUserFullName))],(n,A)=>(V(),ee(j,{key:A,color:"purple-3"},{default:f(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:f(()=>{var a;return[ga,(V(!0),ue(de,null,ce([...new Set((a=m.value)==null?void 0:a.computedRows.map(n=>n.performerUserGroupName))],(n,A)=>(V(),ee(j,{key:A,color:"teal-3"},{default:f(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:f(()=>{var a;return[ya,(V(!0),ue(de,null,ce([...new Set((a=m.value)==null?void 0:a.computedRows.map(n=>n.relatedUserFullName).filter(Boolean))],(n,A)=>(V(),ee(j,{key:A,color:"light-green-3"},{default:f(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:f(()=>{var a;return[Sa,(V(!0),ue(de,null,ce([...new Set((a=m.value)==null?void 0:a.computedRows.map(n=>n.action))],(n,A)=>(V(),ee(j,{color:"blue-3",key:A},{default:f(()=>[R(E(n),1)]),_:2},1024))),128))]}),_:1}),i(G,null,{default:f(()=>{var a;return[Ua,R(" "+E(((a=t.value.term)==null?void 0:a.length)>0?t.value.term:"None"),1)]}),_:1}),i(G,null,{default:f(()=>{var a;return[ha,R(" Showing "+E((a=m.value)==null?void 0:a.computedRowsNumber)+" of "+E(ve(l).activity.length)+" Rows where ",1),i(j,{color:"pink-3"},{default:f(()=>[R(E(ve(o).selectedUser.fullName),1)]),_:1}),R("was involved")]}),_:1})]),_:1})]),_:1})]),_:1},512),[[bt,v.value]])]),"header-cell-rowNumber":f(a=>[i(K,{props:a},{default:f(()=>[i(me,{size:"sm",name:"attach_file"})]),_:2},1032,["props"])]),"header-cell-date":f(a=>[i(K,{props:a},{default:f(()=>[i(fe,{dense:"",round:""},{label:f(()=>[i(te,{icon:"filter_list",size:"sm","text-color":"primary"}),R(" "+E(a.col.label),1)]),default:f(()=>[B("div",Ca,[(V(),ue(de,null,ce(b,n=>i(Q,{key:n.value,outline:"",label:n.label,color:t.value.timeframe===n.value?"primary":"",onClick:A=>k(n.value)},null,8,["label","color","onClick"])),64))]),B("div",pa,[i(He,{outlined:"",debounce:"300",modelValue:t.value.dateStart,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.dateStart=n),label:"Date Start",type:"date",disable:t.value.timeframe!=="custom"},null,8,["modelValue","disable"]),i(He,{outlined:"",debounce:"300",modelValue:t.value.dateEnd,"onUpdate:modelValue":s[2]||(s[2]=n=>t.value.dateEnd=n),label:"Date End",type:"date",disable:t.value.timeframe!=="custom"},null,8,["modelValue","disable"])])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-time":f(a=>[i(K,{props:a},{default:f(()=>[i(G,{style:{"font-size":"16px"}},{default:f(()=>[R(E(a.col.label),1)]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserFullName":f(a=>[i(K,{props:a},{default:f(()=>[i(fe,{dense:"",round:""},{label:f(()=>[i(te,{icon:"filter_list",size:"sm","text-color":t.value.performerUserId&&t.value.performerUserId.length>0?"primary":""},null,8,["text-color"]),R(" "+E(a.col.label),1)]),default:f(()=>[i(Ee,{style:{width:"256px"}},{default:f(()=>[i(ie),i(Q,{dense:"",label:"Clear",onClick:s[3]||(s[3]=n=>t.value.performerUserId=[])})]),_:1}),i(Pe,{modelValue:t.value.performerUserId,"onUpdate:modelValue":s[4]||(s[4]=n=>t.value.performerUserId=n),options:q.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserGroupName":f(a=>[i(K,{props:a},{default:f(()=>[i(fe,{dense:"",round:""},{label:f(()=>[i(te,{icon:"filter_list",size:"sm","text-color":t.value.performerUserGroupId&&t.value.performerUserGroupId.length>0?"primary":""},null,8,["text-color"]),R(" "+E(a.col.label),1)]),default:f(()=>[i(Ee,{style:{width:"256px"}},{default:f(()=>[i(ie),i(Q,{dense:"",label:"Clear",onClick:s[5]||(s[5]=n=>t.value.performerUserGroupId=[])})]),_:1}),i(Pe,{modelValue:t.value.performerUserGroupId,"onUpdate:modelValue":s[6]||(s[6]=n=>t.value.performerUserGroupId=n),options:x.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-relatedUserFullName":f(a=>[i(K,{props:a},{default:f(()=>[i(fe,{dense:"",round:""},{label:f(()=>[i(te,{icon:"filter_list",size:"sm","text-color":t.value.relatedUserId&&t.value.relatedUserId.length>0?"primary":""},null,8,["text-color"]),R(" "+E(a.col.label),1)]),default:f(()=>[i(Ee,{style:{width:"256px"}},{default:f(()=>[i(ie),i(Q,{dense:"",label:"Clear",onClick:s[7]||(s[7]=n=>t.value.relatedUserId=[])})]),_:1}),i(Pe,{modelValue:t.value.relatedUserId,"onUpdate:modelValue":s[8]||(s[8]=n=>t.value.relatedUserId=n),options:O.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-action":f(a=>[i(K,{props:a},{default:f(()=>[i(fe,{dense:"",round:""},{label:f(()=>[i(te,{icon:"filter_list",size:"sm","text-color":t.value.actions&&t.value.actions.length>0?"primary":""},null,8,["text-color"]),R(" "+E(a.col.label),1)]),default:f(()=>[i(Ee,{style:{width:"192px"}},{default:f(()=>[i(ie),i(Q,{dense:"",label:"Clear",onClick:s[9]||(s[9]=n=>t.value.actions=[])})]),_:1}),i(Pe,{modelValue:t.value.actions,"onUpdate:modelValue":s[10]||(s[10]=n=>t.value.actions=n),options:U.value.map(n=>({label:n,value:n})),type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-description":f(a=>[i(K,{props:a},{default:f(()=>[i(fe,{dense:"",round:""},{label:f(()=>[i(te,{icon:"search",size:"sm","text-color":t.value.term!==""?"primary":""},null,8,["text-color"]),R(" "+E(a.col.label),1)]),default:f(()=>[B("div",wa,[i(He,{outlined:"",dense:"",debounce:"300",modelValue:t.value.term,"onUpdate:modelValue":s[12]||(s[12]=n=>t.value.term=n),type:"search",placeholder:"Description search\u2026",style:{"align-self":"center"}},{append:f(()=>[i(me,{name:t.value.term?"close":"search",class:_t({"cursor-pointer":t.value.term}),onClick:s[11]||(s[11]=n=>t.value.term?t.value.term="":null)},null,8,["name","class"])]),_:1},8,["modelValue"])])]),_:2},1024)]),_:2},1032,["props"])]),body:f(a=>[i(yt,{props:a},{default:f(()=>[i(Y,{class:"text-grey",onClick:n=>ve(l).downloadAttachment(a.row.activityId)},{default:f(()=>[R(E(a.rowIndex+1)+" ",1),a.row.attachment?(V(),ee(me,{key:0,size:"xs",color:a.expand?"primary":"grey",name:"attach_file"},null,8,["color"])):Je("",!0)]),_:2},1032,["onClick"]),i(Y,{key:"date",props:a},{default:f(()=>[R(E(a.row.date),1)]),_:2},1032,["props"]),i(Y,{key:"time",props:a},{default:f(()=>[R(E(a.row.time),1)]),_:2},1032,["props"]),i(Y,{key:"performerUserFullName",props:a},{default:f(()=>[i(ql,null,{default:f(()=>[R(E(a.row.performerUserFullName),1)]),_:2},1024)]),_:2},1032,["props"]),i(Y,{key:"performerUserGroupName",props:a},{default:f(()=>[i(j,{"text-color":"white",color:"cyan",label:a.row.performerUserGroupName},null,8,["label"])]),_:2},1032,["props"]),i(Y,{key:"relatedUserFullName",props:a},{default:f(()=>[B("span",{class:_t({"text-grey":!a.row.relatedUserFullName})},E(a.row.relatedUserFullName||"No one"),3)]),_:2},1032,["props"]),i(Y,{key:"action",props:a},{default:f(()=>{var n;return[i(j,{"text-color":"white",color:((n=ve(l).activityActions.find(A=>A.action===a.row.action))==null?void 0:n.color)||"grey"},{default:f(()=>{var A,re;return[i(te,{size:"sm","text-color":"white",icon:((A=ve(l).activityActions.find(L=>L.action===a.row.action))==null?void 0:A.icon)||"question_mark",color:((re=ve(l).activityActions.find(L=>L.action===a.row.action))==null?void 0:re.color)||"grey"},null,8,["icon","color"]),R(" "+E(a.row.action),1)]}),_:2},1032,["color"])]}),_:2},1032,["props"]),i(Y,{key:"description",props:a},{default:f(()=>[R(E(a.row.description),1)]),_:2},1032,["props"])]),_:2},1032,["props"]),mt(i(yt,{props:a},{default:f(()=>[i(Y,{colspan:"100%"},{default:f(()=>[B("div",ka,E(a.row.attachment),1)]),_:2},1024)]),_:2},1032,["props"]),[[bt,a.expand]])]),_:1},8,["rows","columns","filter"])]),_:1}))}});var Ma=gl(Ta,[["__scopeId","data-v-3f18c374"]]);export{Ma as A,za as a,Ba as b,$a as c,Va as s,Qa as u};
