import{x as z,J as pe,C as x,a6 as Qe,bc as Ne,ab as he,R as ie,B as p,H as J,E as Ce,a0 as xe,a8 as Se,D as _e,a9 as X,ae as Ae,az as $e,Q as N,X as ke,I as Fe,ao as Le,b5 as Ue,k as ae,u as ne,o as q,i as R,n as t,w as a,p as B,bd as Ve,m as D,aT as $,a2 as E,_ as ce,s as _,t as k,a1 as Z,be as A,a3 as Ie,a4 as qe,a5 as ge,aR as ee,a_ as te,bf as j,a as Te,q as Oe,aU as je,bg as be,v as Re,aV as Ee,$ as ze}from"./index.64f1b3d0.js";import{Q as He}from"./QToolbarTitle.0a5e79c9.js";import{Q as Me}from"./QToolbar.ecf026c7.js";import{Q as Ge}from"./QHeader.ef343378.js";import{Q as We}from"./QPage.6afafff0.js";import{Q as Ke,a as Ye}from"./QLayout.c38a26c9.js";import{u as we,c as De,a as T,b as m,Q as Je}from"./QList.e8ca5dd3.js";import{Q as ue}from"./QBadge.e4f291bd.js";import{Q as Xe}from"./QSpace.35a631cc.js";import{u as Ze,a as et,b as tt,Q as at}from"./QChip.4e46e48c.js";import{Q as nt}from"./QCardActions.15fad9b6.js";import{u as ye,b as fe,c as lt,e as ot,Q as O,a as Y}from"./use-form.5c69af30.js";import{Q as de}from"./QSeparator.0eab9167.js";import{Q as rt}from"./QBtnGroup.ea76137b.js";import{u as st,a as it,b as ut,c as dt}from"./use-panel.54d3c09d.js";import{u as ct,a as gt,b as vt}from"./use-fullscreen.aaf8ca42.js";import"./touch.3df10340.js";var mt=z({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:d,emit:u}){let c=!1,s,h,b=null,S=null,i,o;function v(){s&&s(),s=null,c=!1,b!==null&&(clearTimeout(b),b=null),S!==null&&(clearTimeout(S),S=null),h!==void 0&&h.removeEventListener("transitionend",i),i=null}function r(n,g,l){g!==void 0&&(n.style.height=`${g}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,c=!0,s=l}function y(n,g){n.style.overflowY=null,n.style.height=null,n.style.transition=null,v(),g!==o&&u(g)}function C(n,g){let l=0;h=n,c===!0?(v(),l=n.offsetHeight===n.scrollHeight?0:void 0):(o="hide",n.style.overflowY="hidden"),r(n,l,g),b=setTimeout(()=>{b=null,n.style.height=`${n.scrollHeight}px`,i=I=>{S=null,(Object(I)!==I||I.target===n)&&y(n,"show")},n.addEventListener("transitionend",i),S=setTimeout(i,e.duration*1.1)},100)}function P(n,g){let l;h=n,c===!0?v():(o="show",n.style.overflowY="hidden",l=n.scrollHeight),r(n,l,g),b=setTimeout(()=>{b=null,n.style.height=0,i=I=>{S=null,(Object(I)!==I||I.target===n)&&y(n,"hide")},n.addEventListener("transitionend",i),S=setTimeout(i,e.duration*1.1)},100)}return pe(()=>{c===!0&&v()}),()=>x(Qe,{css:!1,appear:e.appear,onEnter:C,onLeave:P},d.default)}});const V=Ne({}),ft=Object.keys(he);var pt=z({name:"QExpansionItem",props:{...he,...Ze,...we,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...et,"click","afterShow","afterHide"],setup(e,{slots:d,emit:u}){const{proxy:{$q:c}}=Ce(),s=De(e,c),h=ie(e.modelValue!==null?e.modelValue:e.defaultOpened),b=ie(null),S=ye(),{show:i,hide:o,toggle:v}=tt({showing:h});let r,y;const C=p(()=>`q-expansion-item q-item-type q-expansion-item--${h.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),P=p(()=>{if(e.contentInsetLevel===void 0)return null;const f=c.lang.rtl===!0?"Right":"Left";return{["padding"+f]:e.contentInsetLevel*56+"px"}}),n=p(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),g=p(()=>{const f={};return ft.forEach(F=>{f[F]=e[F]}),f}),l=p(()=>n.value===!0||e.expandIconToggle!==!0),I=p(()=>e.expandedIcon!==void 0&&h.value===!0?e.expandedIcon:e.expandIcon||c.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),U=p(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),ve=p(()=>({expanded:h.value===!0,detailsId:e.targetUid,toggle:v,show:i,hide:o})),H=p(()=>{const f=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:c.lang.label[h.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":h.value===!0?"true":"false","aria-controls":S,"aria-label":f}});J(()=>e.group,f=>{y!==void 0&&y(),f!==void 0&&L()});function M(f){n.value!==!0&&v(f),u("click",f)}function G(f){f.keyCode===13&&W(f,!0)}function W(f,F){F!==!0&&b.value!==null&&b.value.focus(),v(f),Ae(f)}function me(){u("afterShow")}function w(){u("afterHide")}function L(){r===void 0&&(r=ye()),h.value===!0&&(V[e.group]=r);const f=J(h,se=>{se===!0?V[e.group]=r:V[e.group]===r&&delete V[e.group]}),F=J(()=>V[e.group],(se,Be)=>{Be===r&&se!==void 0&&se!==r&&o()});y=()=>{f(),F(),V[e.group]===r&&delete V[e.group],y=void 0}}function K(){const f={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},F=[x(X,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&h.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:I.value})];return U.value===!0&&(Object.assign(f,{tabindex:0,...H.value,onClick:W,onKeyup:G}),F.unshift(x("div",{ref:b,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),x(m,f,()=>F)}function Q(){let f;return d.header!==void 0?f=[].concat(d.header(ve.value)):(f=[x(m,()=>[x(fe,{lines:e.labelLines},()=>e.label||""),e.caption?x(fe,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&f[e.switchToggleSide===!0?"push":"unshift"](x(m,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>x(X,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&f[e.switchToggleSide===!0?"unshift":"push"](K()),f}function le(){const f={ref:"item",style:e.headerStyle,class:e.headerClass,dark:s.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return l.value===!0&&(f.clickable=!0,f.onClick=M,Object.assign(f,n.value===!0?g.value:H.value)),x(T,f,Q)}function oe(){return xe(x("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:P.value,id:S},_e(d.default)),[[Se,h.value]])}function re(){const f=[le(),x(mt,{duration:e.duration,onShow:me,onHide:w},oe)];return e.expandSeparator===!0&&f.push(x(de,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),x(de,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),f}return e.group!==void 0&&L(),pe(()=>{y!==void 0&&y()}),()=>x("div",{class:C.value},[x("div",{class:"q-expansion-item__container relative-position"},re())])}}),_t=z({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:d}){const u=p(()=>`q-carousel__control absolute absolute-${e.position}`),c=p(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>x("div",{class:u.value,style:c.value},_e(d.default))}}),bt=z({name:"QBtnToggle",props:{...lt,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(d=>("label"in d||"icon"in d||"slot"in d)&&"value"in d)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:d,emit:u}){const c=p(()=>e.options.find(y=>y.value===e.modelValue)!==void 0),s=p(()=>({type:"hidden",name:e.name,value:e.modelValue})),h=ot(s),b=p(()=>$e(e)),S=p(()=>({rounded:e.rounded,dense:e.dense,...b.value})),i=p(()=>e.options.map((y,C)=>{const{attrs:P,value:n,slot:g,...l}=y;return{slot:g,props:{key:C,"aria-pressed":n===e.modelValue?"true":"false",...P,...l,...S.value,disable:e.disable===!0||l.disable===!0,color:n===e.modelValue?v(l,"toggleColor"):v(l,"color"),textColor:n===e.modelValue?v(l,"toggleTextColor"):v(l,"textColor"),noCaps:v(l,"noCaps")===!0,noWrap:v(l,"noWrap")===!0,size:v(l,"size"),padding:v(l,"padding"),ripple:v(l,"ripple"),stack:v(l,"stack")===!0,stretch:v(l,"stretch")===!0,onClick(I){o(n,y,I)}}}}));function o(y,C,P){e.readonly!==!0&&(e.modelValue===y?e.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",y,C),u("click",P))}function v(y,C){return y[C]===void 0?e[C]:y[C]}function r(){const y=i.value.map(C=>x(N,C.props,C.slot!==void 0?d[C.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&c.value===!0&&h(y,"push"),ke(d.default,y)}return()=>x(rt,{class:"q-btn-toggle",...b.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},r)}}),yt=z({name:"QCarouselSlide",props:{...st,imgSrc:String},setup(e,{slots:d}){const u=p(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>x("div",{class:"q-carousel__slide",style:u.value},_e(d.default))}});const ht=["top","right","bottom","left"],Ct=["regular","flat","outline","push","unelevated"];var xt=z({name:"QCarousel",props:{...we,...it,...ct,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ct.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>ht.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...gt,...ut],setup(e,{slots:d}){const{proxy:{$q:u}}=Ce(),c=De(e,u);let s=null,h;const{updatePanelsList:b,getPanelContent:S,panelDirectives:i,goToPanel:o,previousPanel:v,nextPanel:r,getEnabledPanels:y,panelIndex:C}=dt(),{inFullscreen:P}=vt(),n=p(()=>P.value!==!0&&e.height!==void 0?{height:e.height}:{}),g=p(()=>e.vertical===!0?"vertical":"horizontal"),l=p(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(P.value===!0?" fullscreen":"")+(c.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${g.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${H.value}`:"")),I=p(()=>{const w=[e.prevIcon||u.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||u.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&u.lang.rtl===!0?w.reverse():w}),U=p(()=>e.navigationIcon||u.iconSet.carousel.navigationIcon),ve=p(()=>e.navigationActiveIcon||U.value),H=p(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),M=p(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));J(()=>e.modelValue,()=>{e.autoplay&&G()}),J(()=>e.autoplay,w=>{w?G():s!==null&&(clearTimeout(s),s=null)});function G(){const w=Ue(e.autoplay)===!0?Math.abs(e.autoplay):5e3;s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,w>=0?r():v()},w)}Fe(()=>{e.autoplay&&G()}),pe(()=>{s!==null&&clearTimeout(s)});function W(w,L){return x("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${w} q-carousel__navigation--${H.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[x("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},y().map(L))])}function me(){const w=[];if(e.navigation===!0){const L=d["navigation-icon"]!==void 0?d["navigation-icon"]:Q=>x(N,{key:"nav"+Q.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${Q.active===!0?"":"in"}active`,...Q.btnProps,onClick:Q.onClick}),K=h-1;w.push(W("buttons",(Q,le)=>{const oe=Q.props.name,re=C.value===le;return L({index:le,maxIndex:K,name:oe,active:re,btnProps:{icon:re===!0?ve.value:U.value,size:"sm",...M.value},onClick:()=>{o(oe)}})}))}else if(e.thumbnails===!0){const L=e.controlColor!==void 0?` text-${e.controlColor}`:"";w.push(W("thumbnails",K=>{const Q=K.props;return x("img",{key:"tmb#"+Q.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${Q.name===e.modelValue?"":"in"}active`+L,src:Q.imgSrc||Q["img-src"],onClick:()=>{o(Q.name)}})}))}return e.arrows===!0&&C.value>=0&&((e.infinite===!0||C.value>0)&&w.push(x("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${g.value} absolute flex flex-center`},[x(N,{icon:I.value[0],...M.value,onClick:v})])),(e.infinite===!0||C.value<h-1)&&w.push(x("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${g.value} absolute flex flex-center`},[x(N,{icon:I.value[1],...M.value,onClick:r})]))),ke(d.control,w)}return()=>(h=b(d),x("div",{class:l.value,style:n.value},[Le("div",{class:"q-carousel__slides-container"},S(),"sl-cont",e.swipeable,()=>i.value)].concat(me())))}});const St=e=>(Ie("data-v-76addce4"),e=e(),qe(),e),kt=St(()=>ge("br",null,null,-1)),It=ae({__name:"CreditLinesCarousel",props:{propData:{type:Object,default:null}},setup(e){var P;const d=ne(),u=e,c=p(()=>u.propData),s=p(()=>u.propData.metadata&&"orderLines"in u.propData.metadata?u.propData.metadata.orderLines:[]),h=p(()=>u.propData.metadata&&"orderLines"in u.propData.metadata?u.propData.metadata.orderLines.length:0),b=p(()=>u.propData.metadata&&"orderLines"in u.propData.metadata?u.propData.metadata.orderLines.filter(n=>n.decision==="approved").length:0),S=p(()=>u.propData.metadata&&"orderLines"in u.propData.metadata?u.propData.metadata.orderLines.filter(n=>n.decision==="declined").length:0),i=ie(null);let o=ie(s.value&&((P=s.value[0])==null?void 0:P.dataLineId)||0);const v=n=>p(()=>n.metadata&&"orderLines"in n.metadata?n.metadata.orderLines.every(g=>g.decision&&g.decision.trim()!==""):!1),r=n=>p(()=>n.metadata&&"orderLines"in n.metadata?n.metadata.orderLines.some(g=>g.decision==="approved"):!1),y=n=>{n.status=A.Done,n.read=!0;const l={Parameter:"Create Credit Note",Data:n,LoggedUser:d.loggedUser};ee("NTF | Notifications Actions",l),te({message:"Credit Note Created",type:"positive",position:"top-right"})},C=n=>{n.status=A.Done,n.read=!0;const l={Parameter:"Decline Credit Note",Data:n,LoggedUser:d.loggedUser};ee("NTF | Notifications Actions",l),te({message:"Credit Note Declined",type:"negative",position:"top-right"})};return(n,g)=>(q(),R(E,null,[t(fe,{header:""},{default:a(()=>[_(" Total lines: "+k(h.value)+" \xBB Approved: "+k(b.value)+" | Declined: "+k(S.value),1)]),_:1}),t(B(xt),{ref_key:"carouselRef",ref:i,modelValue:B(o),"onUpdate:modelValue":g[3]||(g[3]=l=>Ve(o)?o.value=l:o=l),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{control:a(()=>[s.value.length>1?(q(),D(_t,{key:0,position:"top-right",offset:[6,6],class:"q-gutter-xs"},{default:a(()=>[t(N,{dense:"",color:"grey-3","text-color":"primary",icon:"sym_o_arrow_left",onClick:g[0]||(g[0]=l=>{var I;return(I=i.value)==null?void 0:I.previous()})}),t(N,{dense:"",color:"grey-3","text-color":"primary",icon:"sym_o_arrow_right",onClick:g[1]||(g[1]=l=>{var I;return(I=i.value)==null?void 0:I.next()})})]),_:1})):$("",!0)]),default:a(()=>[(q(!0),R(E,null,Z(s.value,l=>(q(),D(yt,{key:l.dataLineId,name:l.dataLineId},{default:a(()=>[t(T,null,{default:a(()=>[t(m,{side:""},{default:a(()=>[t(ue,{rounded:"","text-color":"white",color:"cyan",label:l.service},null,8,["label"]),_(" "+k(l.description),1)]),_:2},1024)]),_:2},1024),xe(t(T,null,{default:a(()=>[t(m,{side:""},{default:a(()=>[t(ue,{"text-color":"white",label:l.venue},null,8,["label"])]),_:2},1024)]),_:2},1536),[[Se,l.venue]]),t(de,{class:"q-my-md"}),t(T,{class:"items-start"},{default:a(()=>[t(m,{horizontal:""},{default:a(()=>[t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Unit Price ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(B(j)(l.unitPrice)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Quantity ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(l.quantity),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Total ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(B(j)(l.total)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Quantity to Credit")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(l.creditQty),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Before fees ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(B(j)(l.creditQty*l.unitPrice)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Fee Pct ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(l.cancellationFeePct)+"% ",1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Fee Amount")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(B(j)(l.cancellationFeeAmount)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Total to Credit ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(B(j)(l.creditTotal)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(de,{class:"q-my-md"}),c.value.type==="task"&&c.value.status===B(A).Pending?(q(),D(T,{key:0},{default:a(()=>[t(m,null,{default:a(()=>[t(bt,{class:"full-width",style:{"border-style":"solid","border-width":"1px","border-color":"grey"},spread:"",dense:"",modelValue:l.decision,"onUpdate:modelValue":[I=>l.decision=I,g[2]||(g[2]=I=>{var U;return(U=i.value)==null?void 0:U.next()})],"toggle-color":l.decision==="approved"?"green":l.decision==="declined"?"red":"grey",options:[{label:"Decline",value:"declined",icon:"sym_o_close"},{label:"Approve",value:"approved",icon:"sym_o_check"}]},null,8,["modelValue","onUpdate:modelValue","toggle-color"])]),_:2},1024)]),_:2},1024)):$("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),kt,c.value.type==="task"&&c.value.status===B(A).Pending?(q(),D(T,{key:0,class:"q-gutter-x-md full-width",disable:!v(c.value).value},{default:a(()=>[t(N,{dense:"",icon:"sym_o_close",color:"red-6",label:"All Declined",onClick:g[4]||(g[4]=l=>C(c.value)),disable:r(c.value).value},null,8,["disable"]),t(N,{dense:"",icon:"sym_o_check",color:"green-6",label:"Create Credit Note",onClick:g[5]||(g[5]=l=>y(c.value)),disable:!r(c.value).value},null,8,["disable"])]),_:1},8,["disable"])):$("",!0)],64))}});var qt=ce(It,[["__scopeId","data-v-76addce4"]]);const Pe=e=>(Ie("data-v-1f509306"),e=e(),qe(),e),Tt=Pe(()=>ge("br",null,null,-1)),wt=Pe(()=>ge("br",null,null,-1)),Dt=ae({__name:"CoreFinanceCard",props:{propData:{type:Object,default:null}},setup(e){const d=ne(),u=e,c=p(()=>u.propData),s=p(()=>{var i,o;return(o=(i=c.value)==null?void 0:i.metadata)==null?void 0:o.requestFinanceCore}),h=(i,o,v,r,y)=>{i.status=o,i.read=!0;let C="";if(i.content){const I=i.content.indexOf("asked to update ")+16;C=i.content.substring(I)}const n=`${(C.charAt(0).toUpperCase()+C.slice(1)).replace(/<\/?strong>/g,"")} has been ${o} by ${d.loggedUser.fullName}`,l={Parameter:`${o===A.Declined?"Decline":"Approve"} Update Core Finance`,Data:{...i,activity:{action:v,description:n}},LoggedUser:d.loggedUser};ee("NTF | Notifications Actions",l),te({message:r,type:y,position:"top-right"})},b=i=>{h(i,A.Declined,"Request Update Finance Declined","Core Finance Update Declined","negative")},S=i=>{h(i,A.Approved,"Update Finance","Core Finance Update Approved","positive")};return(i,o)=>(q(),R(E,null,[s.value.price||s.value.priceType?(q(),D(O,{key:0},{default:a(()=>[t(O,{class:"bg-blue-3 q-py-sm"},{default:a(()=>[s.value.price?(q(),D(Y,{key:0,horizontal:""},{default:a(()=>[t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Price ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(B(j)(s.value.price.oldValue||0))+" \xBB "+k(B(j)(s.value.price.newValue||0)),1)]),_:1})]),_:1})]),_:1})):$("",!0),s.value.priceType?(q(),D(Y,{key:1,horizontal:""},{default:a(()=>[t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[_(" Type ")]),_:1}),t(m,{side:""},{default:a(()=>[_(k(s.value.priceType.oldValue)+" \xBB "+k(s.value.priceType.newValue),1)]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})):$("",!0),s.value.itemLocations?(q(),D(O,{key:1},{default:a(()=>[t(O,{class:"bg-blue-3"},{default:a(()=>[t(Y,null,{default:a(()=>[_(" Item Locations ")]),_:1}),(q(!0),R(E,null,Z(Object.entries(s.value.itemLocations),([v,r])=>(q(),D(T,{key:v},{default:a(()=>[t(m,null,{default:a(()=>[t(ue,{rounded:"",label:r.abbr},null,8,["label"])]),_:2},1024),t(m,null,{default:a(()=>[_(k(r.oldPrice),1)]),_:2},1024),t(m,null,{default:a(()=>[_(k(r.newPrice),1)]),_:2},1024),t(m,null,{default:a(()=>[_(k(r.sapProductNumber),1)]),_:2},1024)]),_:2},1024))),128)),Tt]),_:1})]),_:1})):$("",!0),s.value.itemUnicable?(q(),D(O,{key:2},{default:a(()=>[t(O,{class:"bg-blue-3"},{default:a(()=>[t(Y,null,{default:a(()=>[_(" Item Unicable ")]),_:1}),(q(!0),R(E,null,Z(Object.entries(s.value.itemUnicable),([v,r])=>(q(),D(T,{key:v},{default:a(()=>[t(m,null,{default:a(()=>[_(k(r.type),1)]),_:2},1024),t(m,null,{default:a(()=>[_(k(r.oldPrice),1)]),_:2},1024),t(m,null,{default:a(()=>[_(k(r.newPrice),1)]),_:2},1024)]),_:2},1024))),128)),wt]),_:1})]),_:1})):$("",!0),c.value.type==="task"&&c.value.status===B(A).Pending?(q(),D(T,{key:3,class:"q-gutter-x-md full-width items-end justify-end"},{default:a(()=>[t(N,{dense:"",icon:"sym_o_close",color:"red-6",label:"Declined",class:"q-pr-md",onClick:o[0]||(o[0]=v=>b(c.value))}),t(N,{dense:"",icon:"sym_o_check",color:"green-6",label:"Approve",class:"q-pr-md",onClick:o[1]||(o[1]=v=>S(c.value))})]),_:1})):$("",!0)],64))}});var Pt=ce(Dt,[["__scopeId","data-v-1f509306"]]);const Bt=ae({__name:"FinanceCard",props:{propData:{type:Object,default:null}},setup(e){const d=ne(),u=e,c=p(()=>u.propData),s=b=>{b.status=A.Declined,b.read=!0;const i={Parameter:b.title==="Request to Update Finance"?"Decline Update Finance":"Decline Credit Services",Data:b,LoggedUser:d.loggedUser};ee("NTF | Notifications Actions",i),te({message:"Task Declined",type:"negative",position:"top-right"})},h=b=>{b.status=A.Done,b.read=!0;const i={Parameter:b.title==="Request to Update Finance"?"Approve Update Finance":"Approve Credit Services",Data:b,LoggedUser:d.loggedUser};ee("NTF | Notifications Actions",i),te({message:"Task Approved",type:"positive",position:"top-right"})};return(b,S)=>c.value.type==="task"&&c.value.status===B(A).Pending?(q(),D(T,{key:0,class:"q-gutter-x-md full-width"},{default:a(()=>[t(N,{dense:"",icon:"sym_o_close",color:"red-6",label:"Decline",onClick:S[0]||(S[0]=i=>s(c.value))}),t(N,{dense:"",icon:"sym_o_check",color:"green-6",label:"Approve",onClick:S[1]||(S[1]=i=>h(c.value))})]),_:1})):$("",!0)}});var Qt=ce(Bt,[["__scopeId","data-v-c3c8415e"]]);const Nt=["innerHTML"],At=ae({__name:"NotificationsList",setup(e){const d=Te(),u=ne(),c=p(()=>d.notificationComponents.map(({name:o,props:v})=>({component:h[o],props:v}))),s=o=>{o.title==="Request Credit Note"?d.notificationComponents=[{name:"CreditLinesCarousel",props:{propData:o}}]:o.title==="Request to Update Finance"&&o.type==="task"?d.notificationComponents=[{name:"FinanceCard",props:{propData:o}}]:o.title==="Request to Update Core Finance"?d.notificationComponents=[{name:"CoreFinanceCard",props:{propData:o}}]:d.notificationComponents=[]},h={CreditLinesCarousel:qt,CoreFinanceCard:Pt,FinanceCard:Qt},b=o=>{switch(o){case"approved":return"sym_o_check";case"done":return"sym_o_check";case"declined":return"sym_o_close";case"partiallyDeclined":return"sym_o_close";default:return"sym_o_pending"}},S=o=>{switch(o){case"approved":return"green";case"done":return"green";case"declined":return"grey";case"partiallyDeclined":return"orange-6";default:return"blue-6"}},i=o=>d.users.find(r=>r.userId===(o.content&&r.fullName&&o.content.startsWith(r.fullName)?o.senderId:o.recipientId))||{color:"grey",initials:"NA"};return(o,v)=>(q(),D(Je,{bordered:"",class:"rounded-borders q-ma-md"},{default:a(()=>[(q(!0),R(E,null,Z(B(u).loggedUser.notifications,(r,y)=>(q(),D(pt,{key:y,"expand-separator":"","hide-expand-icon":"",group:"notifications",onBeforeShow:C=>s(r)},{header:a(()=>[t(m,{avatar:""},{default:a(()=>[t(Oe,{size:"sm","text-color":"white",style:je({backgroundColor:i(r).color})},{default:a(()=>[_(k(i(r).initials),1)]),_:2},1032,["style"])]),_:2},1024),t(m,null,{default:a(()=>[_(k(r.title),1)]),_:2},1024),t(m,{side:""},{default:a(()=>[_(k(new Date(r.timestampUnix*1e3).toLocaleDateString("en-GB"))+" ",1),t(ue,{align:"bottom",rounded:"",color:S(r.status)},{default:a(()=>[t(X,{name:b(r.status)},null,8,["name"]),_(" "+k(B(be)(r.type)),1)]),_:2},1032,["color"])]),_:2},1024)]),default:a(()=>[t(O,null,{default:a(()=>[t(nt,null,{default:a(()=>[t(Xe),t(at,{dense:"",class:"text-white q-pa-sm",color:S(r.status),label:B(be)(r.status)},{default:a(()=>[t(X,{name:b(r.status)},null,8,["name"])]),_:2},1032,["color","label"])]),_:2},1024),t(Y,null,{default:a(()=>[ge("div",{innerHTML:r.content},null,8,Nt),(q(!0),R(E,null,Z(c.value,(C,P)=>(q(),D(Re(C.component),Ee(C.props,{key:P}),null,16))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onBeforeShow"]))),128))]),_:1}))}});const $t=ae({__name:"NotificationsPage",setup(e){const d=Te(),u=ne();return ze(()=>{u.readSettings(),d.readAllUsers()}),(c,s)=>(q(),D(Ke,{view:"hHh lpR fFf"},{default:a(()=>[t(Ge,{class:"bg-blue-6"},{default:a(()=>[t(Me,{class:"text-white bg-blue-6"},{default:a(()=>[t(X,{name:"sym_o_notifications",size:"md"}),t(He,null,{default:a(()=>[_(" Notifications ")]),_:1})]),_:1})]),_:1}),t(Ye,null,{default:a(()=>[t(We,null,{default:a(()=>[t(At)]),_:1})]),_:1})]),_:1}))}});var Zt=ce($t,[["__scopeId","data-v-433c39ad"]]);export{Zt as default};
