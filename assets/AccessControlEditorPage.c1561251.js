import{Q as U,a as I,b as C,c as x}from"./QList.0e22b797.js";import{Q as w,b as i,c as j,a as q}from"./QCardActions.c2627bb9.js";import{Q as J}from"./QPage.4bf7ade9.js";import{G as A,u as Q,J as p,K as f,L as t,M as l,N as c,S as N,W as B,P as a,V as $,_ as F,O as m,y as h,h as K,U as T,Q as P,aM as R,aN as W,w as X,a2 as E,a5 as O,X as z}from"./index.c95f8125.js";import{Q as M}from"./QToolbarTitle.5ec96667.js";import{Q as k}from"./QBadge.b9f8d53d.js";import{Q as b,a as V}from"./QCheckbox.8ca76e9e.js";import{Q as Y}from"./QToolbar.b64267a1.js";const Z=A({__name:"GroupListCard",setup(S){const e=Q();return(y,u)=>(p(),f(w,{style:{width:"16rem"}},{default:t(()=>[l(i,null,{default:t(()=>[l(M,null,{default:t(()=>[c("Groups")]),_:1})]),_:1}),l(U,null,{default:t(()=>[(p(!0),N($,null,B(a(e).groups,(s,n)=>{var _;return p(),f(I,{key:n,clickable:"",onClick:G=>{a(e).selectedGroup={...s,id:n},a(e).selectedLayout={id:"",name:""}},class:"bg-grey-2 menu",active:((_=a(e).selectedGroup)==null?void 0:_.id)===n,"active-class":"menu-active"},{default:t(()=>[l(C,null,{default:t(()=>[l(x,{class:"text-h5"},{default:t(()=>[c(m(s.name),1)]),_:2},1024)]),_:2},1024),l(C,{side:""},{default:t(()=>[l(k,{rounded:"",color:"green"},{default:t(()=>[c(m(a(e).groupSummary[n].hasAccessTrue),1)]),_:2},1024),l(k,{rounded:"",color:"red"},{default:t(()=>[c(m(a(e).groupSummary[n].hasAccessFalse),1)]),_:2},1024),l(k,{rounded:"",color:"grey"},{default:t(()=>[c(m(a(e).groupSummary[n].hasAccessNull),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"])}),128))]),_:1})]),_:1}))}});var ee=F(Z,[["__scopeId","data-v-0e888d41"]]);const le={class:"sticky-top"},ae=A({__name:"LayoutsListCard",setup(S){const e=Q(),y=(v,d)=>{var o;e.selectedLayout.id=v,e.selectedLayout.name=d;const r=(o=e.selectedGroup)==null?void 0:o.layouts[v];e.selectedGroupLayout=r!=null?r:{showInMenu:!1,hasAccess:null,create:!1,read:!1,update:!1,delete:!1,finance:!1}},u=h(!0),s=h(!0),n=h(!0),_=h(""),G=K(()=>{var d;return Object.entries(((d=e.selectedGroup)==null?void 0:d.layouts)||{}).filter(([r,o])=>{var L;return!!((e.layouts&&((L=e.layouts[r])==null?void 0:L.name)||"").toLowerCase().includes(_.value.toLowerCase())&&(o.hasAccess===!0&&u.value||o.hasAccess===!1&&s.value||o.hasAccess===null&&n.value))}).map(([r,o])=>{var L;const g=e.layouts&&((L=e.layouts[r])==null?void 0:L.name)||"";return{id:r,layout:o,layoutName:g,badgeColor:o.hasAccess===!0?"green":o.hasAccess===!1?"red":"grey"}}).reduce((r,{id:o,layout:g,layoutName:L,badgeColor:H})=>({...r,[o]:{layout:g,layoutName:L,badgeColor:H}}),{})}),D=v=>{W("ADM | Open Layout",{LayoutName:v})};return(v,d)=>(p(),f(w,{class:"card",style:{width:"20rem"}},{default:t(()=>[c(" undefinedAccessFlag.value : "+m(n.value)+" ",1),T("div",le,[l(i,null,{default:t(()=>[l(M,null,{default:t(()=>[c("Layouts")]),_:1})]),_:1}),l(q,null,{default:t(()=>[l(b,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=r=>u.value=r),label:"Has Access",color:"green"},null,8,["modelValue"]),l(b,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=r=>s.value=r),label:"No Access",color:"red"},null,8,["modelValue"]),l(b,{modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=r=>n.value=r),label:"Undefined",color:"grey"},null,8,["modelValue"]),l(j,{modelValue:_.value,"onUpdate:modelValue":d[3]||(d[3]=r=>_.value=r),label:"Search",outlined:"","clear-icon":"close",clearable:"",icon:"search",dense:"",type:"search",class:"q-ma-md"},null,8,["modelValue"])]),_:1})]),l(U,{class:"scrollable-list"},{default:t(()=>[(p(!0),N($,null,B(G.value,(r,o)=>(p(),f(I,{key:o,class:"bg-grey-2 menu",clickable:"",onClick:g=>y(o,a(e).layouts&&a(e).layouts[o]?a(e).layouts[o].name:""),active:a(e).selectedLayout.id===o,"active-class":"menu-active"},{default:t(()=>[l(C,null,{default:t(()=>[l(x,{class:"text-h5"},{default:t(()=>[c(m(a(e).layouts&&a(e).layouts[o]?a(e).layouts[o].name:""),1)]),_:2},1024)]),_:2},1024),l(C,{side:""},{default:t(()=>[l(k,{rounded:"",color:G.value[o].badgeColor},null,8,["color"]),l(P,{dense:"",icon:"open_in_new",onClick:R(g=>D(a(e).layouts&&a(e).layouts[o]?a(e).layouts[o].name:""),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}))}});var te=F(ae,[["__scopeId","data-v-3eb6c909"]]);const se=A({__name:"GroupLayoutOptionsCard",setup(S){const e=Q();return X(()=>e.selectedGroupLayout.hasAccess,y=>{y||(e.selectedGroupLayout.showInMenu=!1,e.selectedGroup&&e.selectedGroup.id&&e.selectedLayout&&e.selectedLayout.name&&e.updateGroupMenu(e.selectedGroup.id,e.selectedLayout.id,!1,e.selectedLayout.name))}),(y,u)=>E((p(),f(w,{style:{width:"20rem"}},{default:t(()=>[l(i,null,{default:t(()=>[l(M,null,{default:t(()=>[c("Group Layout Options")]),_:1})]),_:1}),l(i,null,{default:t(()=>[l(b,{modelValue:a(e).selectedGroupLayout.hasAccess,"onUpdate:modelValue":u[0]||(u[0]=s=>a(e).selectedGroupLayout.hasAccess=s),label:"Has Access"},null,8,["modelValue"])]),_:1}),l(i,null,{default:t(()=>[l(b,{modelValue:a(e).selectedGroupLayout.showInMenu,"onUpdate:modelValue":[u[1]||(u[1]=s=>a(e).selectedGroupLayout.showInMenu=s),u[2]||(u[2]=s=>{var n;return a(e).updateGroupMenu((n=a(e).selectedGroup)==null?void 0:n.id,a(e).selectedLayout.id,s,a(e).selectedLayout.name)})],label:"Show in Menu",disable:!a(e).selectedGroupLayout.hasAccess},null,8,["modelValue","disable"])]),_:1}),l(i,null,{default:t(()=>[l(V,{modelValue:a(e).selectedGroupLayout.create,"onUpdate:modelValue":u[3]||(u[3]=s=>a(e).selectedGroupLayout.create=s),label:"Create"},null,8,["modelValue"]),l(V,{modelValue:a(e).selectedGroupLayout.read,"onUpdate:modelValue":u[4]||(u[4]=s=>a(e).selectedGroupLayout.read=s),label:"Read"},null,8,["modelValue"]),l(V,{modelValue:a(e).selectedGroupLayout.update,"onUpdate:modelValue":u[5]||(u[5]=s=>a(e).selectedGroupLayout.update=s),label:"Update"},null,8,["modelValue"]),l(V,{modelValue:a(e).selectedGroupLayout.delete,"onUpdate:modelValue":u[6]||(u[6]=s=>a(e).selectedGroupLayout.delete=s),label:"Delete"},null,8,["modelValue"])]),_:1}),l(i,null,{default:t(()=>[l(V,{modelValue:a(e).selectedGroupLayout.finance,"onUpdate:modelValue":u[7]||(u[7]=s=>a(e).selectedGroupLayout.finance=s),label:"Finance"},null,8,["modelValue"])]),_:1})]),_:1},512)),[[O,a(e).selectedLayout.id!==""]])}}),ue=A({__name:"AccessControlEditorToolbar",setup(S){const e=Q();return(y,u)=>(p(),f(Y,{inset:""},{default:t(()=>[l(M,null,{default:t(()=>{var s;return[c(m((s=a(e).selectedGroup)==null?void 0:s.name)+" \xBB "+m(a(e).selectedLayout.name),1)]}),_:1}),l(P,{dense:"",icon:"save",label:"Save",onClick:u[0]||(u[0]=s=>a(e).saveGroup()),align:"right"})]),_:1}))}});const oe={class:"scrollable-card"},re=A({__name:"AccessControlEditorPage",setup(S){const e=Q();return z(()=>{e.readSettings(),e.toolbar=ue}),(y,u)=>(p(),f(J,{class:"flex"},{default:t(()=>{var s;return[l(ee),T("div",oe,[E(l(te,null,null,512),[[O,(s=a(e).selectedGroup)==null?void 0:s.id]])]),l(se),l(w,null,{default:t(()=>[l(i,null,{default:t(()=>[l(x,{class:"text-h6"},{default:t(()=>[c("Menu Preview")]),_:1})]),_:1}),l(i,null,{default:t(()=>[l(U,null,{default:t(()=>{var n;return[(p(!0),N($,null,B((n=a(e).selectedGroup)==null?void 0:n.menu,(_,G)=>(p(),f(I,{key:G,clickable:"",class:"bg-grey-2 menu"},{default:t(()=>[l(C,null,{default:t(()=>[l(x,{class:"text-h5"},{default:t(()=>[c(m(_.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})]}),_:1}))}});var ye=F(re,[["__scopeId","data-v-eb3924c8"]]);export{ye as default};
