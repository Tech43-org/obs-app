import{x as z,J as pe,C as x,a6 as Qe,bc as Ne,ab as he,R as ie,B as _,H as J,E as Ce,a0 as xe,a8 as Se,D as _e,a9 as X,ae as Ae,az as $e,Q as A,X as ke,I as Ue,ao as Fe,b5 as Le,k as ae,u as ne,o as q,i as R,p as P,m as w,w as a,aT as $,n as t,bd as Ve,a2 as E,_ as ge,be as N,s as p,t as I,a1 as Z,a3 as Ie,a4 as qe,a5 as ve,aR as ee,a_ as te,bf as j,a as Te,q as Oe,aU as je,bg as be,v as Re,aV as Ee,$ as ze}from"./index.fb7f185a.js";import{Q as He}from"./QToolbarTitle.c5038441.js";import{Q as Me}from"./QToolbar.1a88aaf8.js";import{Q as Ge}from"./QHeader.101d03bb.js";import{Q as We}from"./QPage.10afa0e7.js";import{Q as Ke,a as Ye}from"./QLayout.5b8a1d64.js";import{u as we,c as De,a as T,b as m,Q as Je}from"./QList.26d4ea01.js";import{Q as ue}from"./QBadge.0214fed9.js";import{Q as Xe}from"./QSpace.2eba6162.js";import{u as Ze,a as et,b as tt,Q as at}from"./QChip.51b2b1ca.js";import{Q as nt}from"./QCardActions.fb7af797.js";import{u as ye,b as de,c as lt,e as ot,Q as O,a as Y}from"./use-form.9d7bef12.js";import{Q as ce}from"./QSeparator.2e777e02.js";import{Q as rt}from"./QBtnGroup.49f4f836.js";import{u as st,a as it,b as ut,c as dt}from"./use-panel.64177753.js";import{u as ct,a as gt,b as vt}from"./use-fullscreen.155c094a.js";import"./touch.3df10340.js";var mt=z({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:c,emit:d}){let s=!1,i,h,b=null,S=null,u,o;function v(){i&&i(),i=null,s=!1,b!==null&&(clearTimeout(b),b=null),S!==null&&(clearTimeout(S),S=null),h!==void 0&&h.removeEventListener("transitionend",u),u=null}function r(n,g,l){g!==void 0&&(n.style.height=`${g}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,i=l}function y(n,g){n.style.overflowY=null,n.style.height=null,n.style.transition=null,v(),g!==o&&d(g)}function C(n,g){let l=0;h=n,s===!0?(v(),l=n.offsetHeight===n.scrollHeight?0:void 0):(o="hide",n.style.overflowY="hidden"),r(n,l,g),b=setTimeout(()=>{b=null,n.style.height=`${n.scrollHeight}px`,u=k=>{S=null,(Object(k)!==k||k.target===n)&&y(n,"show")},n.addEventListener("transitionend",u),S=setTimeout(u,e.duration*1.1)},100)}function B(n,g){let l;h=n,s===!0?v():(o="show",n.style.overflowY="hidden",l=n.scrollHeight),r(n,l,g),b=setTimeout(()=>{b=null,n.style.height=0,u=k=>{S=null,(Object(k)!==k||k.target===n)&&y(n,"hide")},n.addEventListener("transitionend",u),S=setTimeout(u,e.duration*1.1)},100)}return pe(()=>{s===!0&&v()}),()=>x(Qe,{css:!1,appear:e.appear,onEnter:C,onLeave:B},c.default)}});const V=Ne({}),ft=Object.keys(he);var pt=z({name:"QExpansionItem",props:{...he,...Ze,...we,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...et,"click","afterShow","afterHide"],setup(e,{slots:c,emit:d}){const{proxy:{$q:s}}=Ce(),i=De(e,s),h=ie(e.modelValue!==null?e.modelValue:e.defaultOpened),b=ie(null),S=ye(),{show:u,hide:o,toggle:v}=tt({showing:h});let r,y;const C=_(()=>`q-expansion-item q-item-type q-expansion-item--${h.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),B=_(()=>{if(e.contentInsetLevel===void 0)return null;const f=s.lang.rtl===!0?"Right":"Left";return{["padding"+f]:e.contentInsetLevel*56+"px"}}),n=_(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),g=_(()=>{const f={};return ft.forEach(U=>{f[U]=e[U]}),f}),l=_(()=>n.value===!0||e.expandIconToggle!==!0),k=_(()=>e.expandedIcon!==void 0&&h.value===!0?e.expandedIcon:e.expandIcon||s.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),L=_(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),me=_(()=>({expanded:h.value===!0,detailsId:e.targetUid,toggle:v,show:u,hide:o})),H=_(()=>{const f=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:s.lang.label[h.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":h.value===!0?"true":"false","aria-controls":S,"aria-label":f}});J(()=>e.group,f=>{y!==void 0&&y(),f!==void 0&&F()});function M(f){n.value!==!0&&v(f),d("click",f)}function G(f){f.keyCode===13&&W(f,!0)}function W(f,U){U!==!0&&b.value!==null&&b.value.focus(),v(f),Ae(f)}function fe(){d("afterShow")}function D(){d("afterHide")}function F(){r===void 0&&(r=ye()),h.value===!0&&(V[e.group]=r);const f=J(h,se=>{se===!0?V[e.group]=r:V[e.group]===r&&delete V[e.group]}),U=J(()=>V[e.group],(se,Be)=>{Be===r&&se!==void 0&&se!==r&&o()});y=()=>{f(),U(),V[e.group]===r&&delete V[e.group],y=void 0}}function K(){const f={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},U=[x(X,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&h.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:k.value})];return L.value===!0&&(Object.assign(f,{tabindex:0,...H.value,onClick:W,onKeyup:G}),U.unshift(x("div",{ref:b,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),x(m,f,()=>U)}function Q(){let f;return c.header!==void 0?f=[].concat(c.header(me.value)):(f=[x(m,()=>[x(de,{lines:e.labelLines},()=>e.label||""),e.caption?x(de,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&f[e.switchToggleSide===!0?"push":"unshift"](x(m,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>x(X,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&f[e.switchToggleSide===!0?"unshift":"push"](K()),f}function le(){const f={ref:"item",style:e.headerStyle,class:e.headerClass,dark:i.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return l.value===!0&&(f.clickable=!0,f.onClick=M,Object.assign(f,n.value===!0?g.value:H.value)),x(T,f,Q)}function oe(){return xe(x("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:B.value,id:S},_e(c.default)),[[Se,h.value]])}function re(){const f=[le(),x(mt,{duration:e.duration,onShow:fe,onHide:D},oe)];return e.expandSeparator===!0&&f.push(x(ce,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),x(ce,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),f}return e.group!==void 0&&F(),pe(()=>{y!==void 0&&y()}),()=>x("div",{class:C.value},[x("div",{class:"q-expansion-item__container relative-position"},re())])}}),_t=z({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:c}){const d=_(()=>`q-carousel__control absolute absolute-${e.position}`),s=_(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>x("div",{class:d.value,style:s.value},_e(c.default))}}),bt=z({name:"QBtnToggle",props:{...lt,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(c=>("label"in c||"icon"in c||"slot"in c)&&"value"in c)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:c,emit:d}){const s=_(()=>e.options.find(y=>y.value===e.modelValue)!==void 0),i=_(()=>({type:"hidden",name:e.name,value:e.modelValue})),h=ot(i),b=_(()=>$e(e)),S=_(()=>({rounded:e.rounded,dense:e.dense,...b.value})),u=_(()=>e.options.map((y,C)=>{const{attrs:B,value:n,slot:g,...l}=y;return{slot:g,props:{key:C,"aria-pressed":n===e.modelValue?"true":"false",...B,...l,...S.value,disable:e.disable===!0||l.disable===!0,color:n===e.modelValue?v(l,"toggleColor"):v(l,"color"),textColor:n===e.modelValue?v(l,"toggleTextColor"):v(l,"textColor"),noCaps:v(l,"noCaps")===!0,noWrap:v(l,"noWrap")===!0,size:v(l,"size"),padding:v(l,"padding"),ripple:v(l,"ripple"),stack:v(l,"stack")===!0,stretch:v(l,"stretch")===!0,onClick(k){o(n,y,k)}}}}));function o(y,C,B){e.readonly!==!0&&(e.modelValue===y?e.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",y,C),d("click",B))}function v(y,C){return y[C]===void 0?e[C]:y[C]}function r(){const y=u.value.map(C=>x(A,C.props,C.slot!==void 0?c[C.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&s.value===!0&&h(y,"push"),ke(c.default,y)}return()=>x(rt,{class:"q-btn-toggle",...b.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},r)}}),yt=z({name:"QCarouselSlide",props:{...st,imgSrc:String},setup(e,{slots:c}){const d=_(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>x("div",{class:"q-carousel__slide",style:d.value},_e(c.default))}});const ht=["top","right","bottom","left"],Ct=["regular","flat","outline","push","unelevated"];var xt=z({name:"QCarousel",props:{...we,...it,...ct,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ct.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>ht.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...gt,...ut],setup(e,{slots:c}){const{proxy:{$q:d}}=Ce(),s=De(e,d);let i=null,h;const{updatePanelsList:b,getPanelContent:S,panelDirectives:u,goToPanel:o,previousPanel:v,nextPanel:r,getEnabledPanels:y,panelIndex:C}=dt(),{inFullscreen:B}=vt(),n=_(()=>B.value!==!0&&e.height!==void 0?{height:e.height}:{}),g=_(()=>e.vertical===!0?"vertical":"horizontal"),l=_(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(B.value===!0?" fullscreen":"")+(s.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${g.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${H.value}`:"")),k=_(()=>{const D=[e.prevIcon||d.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||d.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&d.lang.rtl===!0?D.reverse():D}),L=_(()=>e.navigationIcon||d.iconSet.carousel.navigationIcon),me=_(()=>e.navigationActiveIcon||L.value),H=_(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),M=_(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));J(()=>e.modelValue,()=>{e.autoplay&&G()}),J(()=>e.autoplay,D=>{D?G():i!==null&&(clearTimeout(i),i=null)});function G(){const D=Le(e.autoplay)===!0?Math.abs(e.autoplay):5e3;i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,D>=0?r():v()},D)}Ue(()=>{e.autoplay&&G()}),pe(()=>{i!==null&&clearTimeout(i)});function W(D,F){return x("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${D} q-carousel__navigation--${H.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[x("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},y().map(F))])}function fe(){const D=[];if(e.navigation===!0){const F=c["navigation-icon"]!==void 0?c["navigation-icon"]:Q=>x(A,{key:"nav"+Q.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${Q.active===!0?"":"in"}active`,...Q.btnProps,onClick:Q.onClick}),K=h-1;D.push(W("buttons",(Q,le)=>{const oe=Q.props.name,re=C.value===le;return F({index:le,maxIndex:K,name:oe,active:re,btnProps:{icon:re===!0?me.value:L.value,size:"sm",...M.value},onClick:()=>{o(oe)}})}))}else if(e.thumbnails===!0){const F=e.controlColor!==void 0?` text-${e.controlColor}`:"";D.push(W("thumbnails",K=>{const Q=K.props;return x("img",{key:"tmb#"+Q.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${Q.name===e.modelValue?"":"in"}active`+F,src:Q.imgSrc||Q["img-src"],onClick:()=>{o(Q.name)}})}))}return e.arrows===!0&&C.value>=0&&((e.infinite===!0||C.value>0)&&D.push(x("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${g.value} absolute flex flex-center`},[x(A,{icon:k.value[0],...M.value,onClick:v})])),(e.infinite===!0||C.value<h-1)&&D.push(x("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${g.value} absolute flex flex-center`},[x(A,{icon:k.value[1],...M.value,onClick:r})]))),ke(c.control,D)}return()=>(h=b(c),x("div",{class:l.value,style:n.value},[Fe("div",{class:"q-carousel__slides-container"},S(),"sl-cont",e.swipeable,()=>u.value)].concat(fe())))}});const St=e=>(Ie("data-v-48a7258e"),e=e(),qe(),e),kt=St(()=>ve("br",null,null,-1)),It=ae({__name:"CreditLinesCarousel",props:{propData:{type:Object,default:null}},setup(e){var B;const c=ne(),d=e,s=_(()=>d.propData),i=_(()=>d.propData.metadata&&"orderLines"in d.propData.metadata?d.propData.metadata.orderLines:[]),h=_(()=>d.propData.metadata&&"orderLines"in d.propData.metadata?d.propData.metadata.orderLines.length:0),b=_(()=>d.propData.metadata&&"orderLines"in d.propData.metadata?d.propData.metadata.orderLines.filter(n=>n.decision==="approved").length:0),S=_(()=>d.propData.metadata&&"orderLines"in d.propData.metadata?d.propData.metadata.orderLines.filter(n=>n.decision==="declined").length:0),u=ie(null);let o=ie(i.value&&((B=i.value[0])==null?void 0:B.dataLineId)||0);const v=n=>_(()=>n.metadata&&"orderLines"in n.metadata?n.metadata.orderLines.every(g=>g.decision&&g.decision.trim()!==""):!1),r=n=>_(()=>n.metadata&&"orderLines"in n.metadata?n.metadata.orderLines.some(g=>g.decision==="approved"):!1),y=n=>{n.status=N.Done,n.read=!0;const l={Parameter:"Create Credit Note",Data:n,LoggedUser:c.loggedUser};ee("NTF | Notifications Actions",l),te({message:"Credit Note Created",type:"positive",position:"top-right"})},C=n=>{n.status=N.Done,n.read=!0;const l={Parameter:"Decline Credit Note",Data:n,LoggedUser:c.loggedUser};ee("NTF | Notifications Actions",l),te({message:"Credit Note Declined",type:"negative",position:"top-right"})};return(n,g)=>(q(),R(E,null,[s.value.type==="task"&&s.value.status===P(N).Pending?(q(),w(de,{key:0,header:""},{default:a(()=>[p(" Total lines: "+I(h.value)+" \xBB Approved: "+I(b.value)+" | Declined: "+I(S.value),1)]),_:1})):$("",!0),t(P(xt),{ref_key:"carouselRef",ref:u,modelValue:P(o),"onUpdate:modelValue":g[3]||(g[3]=l=>Ve(o)?o.value=l:o=l),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{control:a(()=>[i.value.length>1?(q(),w(_t,{key:0,position:"top-right",offset:[6,6],class:"q-gutter-xs"},{default:a(()=>[t(A,{dense:"",color:"grey-3","text-color":"primary",icon:"sym_o_arrow_left",onClick:g[0]||(g[0]=l=>{var k;return(k=u.value)==null?void 0:k.previous()})}),t(A,{dense:"",color:"grey-3","text-color":"primary",icon:"sym_o_arrow_right",onClick:g[1]||(g[1]=l=>{var k;return(k=u.value)==null?void 0:k.next()})})]),_:1})):$("",!0)]),default:a(()=>[(q(!0),R(E,null,Z(i.value,l=>(q(),w(yt,{key:l.dataLineId,name:l.dataLineId},{default:a(()=>[t(T,null,{default:a(()=>[t(m,{side:""},{default:a(()=>[t(ue,{rounded:"","text-color":"white",color:"cyan",label:l.service},null,8,["label"]),p(" "+I(l.description),1)]),_:2},1024)]),_:2},1024),xe(t(T,null,{default:a(()=>[t(m,{side:""},{default:a(()=>[t(ue,{"text-color":"white",label:l.venue},null,8,["label"])]),_:2},1024)]),_:2},1536),[[Se,l.venue]]),t(ce,{class:"q-my-md"}),t(T,{class:"items-start"},{default:a(()=>[t(m,{horizontal:""},{default:a(()=>[t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Unit Price ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(P(j)(l.unitPrice)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Quantity ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(l.quantity),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Total ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(P(j)(l.total)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Quantity to Credit")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(l.creditQty),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Before fees ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(P(j)(l.creditQty*l.unitPrice)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Fee Pct ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(l.cancellationFeePct)+"% ",1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Fee Amount")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(P(j)(l.cancellationFeeAmount)),1)]),_:2},1024)]),_:2},1024),t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Total to Credit ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(P(j)(l.creditTotal)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(ce,{class:"q-my-md"}),s.value.type==="task"&&s.value.status===P(N).Pending?(q(),w(T,{key:0},{default:a(()=>[t(m,null,{default:a(()=>[t(bt,{class:"full-width",style:{"border-style":"solid","border-width":"1px","border-color":"grey"},spread:"",dense:"",modelValue:l.decision,"onUpdate:modelValue":[k=>l.decision=k,g[2]||(g[2]=k=>{var L;return(L=u.value)==null?void 0:L.next()})],"toggle-color":l.decision==="approved"?"green":l.decision==="declined"?"red":"grey",options:[{label:"Decline",value:"declined",icon:"sym_o_close"},{label:"Approve",value:"approved",icon:"sym_o_check"}]},null,8,["modelValue","onUpdate:modelValue","toggle-color"])]),_:2},1024)]),_:2},1024)):$("",!0),t(T,{else:"",class:"justify-center"},{default:a(()=>[t(de,{header:"",class:"text-h1 text-bold text-red-12"},{default:a(()=>{var k;return[p(I((k=s.value.status)==null?void 0:k.toUpperCase()),1)]}),_:1})]),_:1})]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),kt,s.value.type==="task"&&s.value.status===P(N).Pending?(q(),w(T,{key:1,class:"q-gutter-x-md full-width",disable:!v(s.value).value},{default:a(()=>[t(A,{dense:"",icon:"sym_o_close",color:"red-6",label:"All Declined",onClick:g[4]||(g[4]=l=>C(s.value)),disable:r(s.value).value},null,8,["disable"]),t(A,{dense:"",icon:"sym_o_check",color:"green-6",label:"Create Credit Note",onClick:g[5]||(g[5]=l=>y(s.value)),disable:!r(s.value).value},null,8,["disable"])]),_:1},8,["disable"])):$("",!0)],64))}});var qt=ge(It,[["__scopeId","data-v-48a7258e"]]);const Pe=e=>(Ie("data-v-1f509306"),e=e(),qe(),e),Tt=Pe(()=>ve("br",null,null,-1)),wt=Pe(()=>ve("br",null,null,-1)),Dt=ae({__name:"CoreFinanceCard",props:{propData:{type:Object,default:null}},setup(e){const c=ne(),d=e,s=_(()=>d.propData),i=_(()=>{var u,o;return(o=(u=s.value)==null?void 0:u.metadata)==null?void 0:o.requestFinanceCore}),h=(u,o,v,r,y)=>{u.status=o,u.read=!0;let C="";if(u.content){const k=u.content.indexOf("asked to update ")+16;C=u.content.substring(k)}const n=`${(C.charAt(0).toUpperCase()+C.slice(1)).replace(/<\/?strong>/g,"")} has been ${o} by ${c.loggedUser.fullName}`,l={Parameter:`${o===N.Declined?"Decline":"Approve"} Update Core Finance`,Data:{...u,activity:{action:v,description:n}},LoggedUser:c.loggedUser};ee("NTF | Notifications Actions",l),te({message:r,type:y,position:"top-right"})},b=u=>{h(u,N.Declined,"Request Update Finance Declined","Core Finance Update Declined","negative")},S=u=>{h(u,N.Approved,"Update Finance","Core Finance Update Approved","positive")};return(u,o)=>(q(),R(E,null,[i.value.price||i.value.priceType?(q(),w(O,{key:0},{default:a(()=>[t(O,{class:"bg-blue-3 q-py-sm"},{default:a(()=>[i.value.price?(q(),w(Y,{key:0,horizontal:""},{default:a(()=>[t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Price ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(P(j)(i.value.price.oldValue||0))+" \xBB "+I(P(j)(i.value.price.newValue||0)),1)]),_:1})]),_:1})]),_:1})):$("",!0),i.value.priceType?(q(),w(Y,{key:1,horizontal:""},{default:a(()=>[t(T,null,{default:a(()=>[t(m,null,{default:a(()=>[p(" Type ")]),_:1}),t(m,{side:""},{default:a(()=>[p(I(i.value.priceType.oldValue)+" \xBB "+I(i.value.priceType.newValue),1)]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})):$("",!0),i.value.itemLocations?(q(),w(O,{key:1},{default:a(()=>[t(O,{class:"bg-blue-3"},{default:a(()=>[t(Y,null,{default:a(()=>[p(" Item Locations ")]),_:1}),(q(!0),R(E,null,Z(Object.entries(i.value.itemLocations),([v,r])=>(q(),w(T,{key:v},{default:a(()=>[t(m,null,{default:a(()=>[t(ue,{rounded:"",label:r.abbr},null,8,["label"])]),_:2},1024),t(m,null,{default:a(()=>[p(I(r.oldPrice),1)]),_:2},1024),t(m,null,{default:a(()=>[p(I(r.newPrice),1)]),_:2},1024),t(m,null,{default:a(()=>[p(I(r.sapProductNumber),1)]),_:2},1024)]),_:2},1024))),128)),Tt]),_:1})]),_:1})):$("",!0),i.value.itemUnicable?(q(),w(O,{key:2},{default:a(()=>[t(O,{class:"bg-blue-3"},{default:a(()=>[t(Y,null,{default:a(()=>[p(" Item Unicable ")]),_:1}),(q(!0),R(E,null,Z(Object.entries(i.value.itemUnicable),([v,r])=>(q(),w(T,{key:v},{default:a(()=>[t(m,null,{default:a(()=>[p(I(r.type),1)]),_:2},1024),t(m,null,{default:a(()=>[p(I(r.oldPrice),1)]),_:2},1024),t(m,null,{default:a(()=>[p(I(r.newPrice),1)]),_:2},1024)]),_:2},1024))),128)),wt]),_:1})]),_:1})):$("",!0),s.value.type==="task"&&s.value.status===P(N).Pending?(q(),w(T,{key:3,class:"q-gutter-x-md full-width items-end justify-end"},{default:a(()=>[t(A,{dense:"",icon:"sym_o_close",color:"red-6",label:"Declined",class:"q-pr-md",onClick:o[0]||(o[0]=v=>b(s.value))}),t(A,{dense:"",icon:"sym_o_check",color:"green-6",label:"Approve",class:"q-pr-md",onClick:o[1]||(o[1]=v=>S(s.value))})]),_:1})):$("",!0)],64))}});var Pt=ge(Dt,[["__scopeId","data-v-1f509306"]]);const Bt=ae({__name:"FinanceCard",props:{propData:{type:Object,default:null}},setup(e){const c=ne(),d=e,s=_(()=>d.propData),i=b=>{b.status=N.Declined,b.read=!0;const u={Parameter:b.title==="Request to Update Finance"?"Decline Update Finance":"Decline Credit Services",Data:b,LoggedUser:c.loggedUser};ee("NTF | Notifications Actions",u),te({message:"Task Declined",type:"negative",position:"top-right"})},h=b=>{b.status=N.Done,b.read=!0;const u={Parameter:b.title==="Request to Update Finance"?"Approve Update Finance":"Approve Credit Services",Data:b,LoggedUser:c.loggedUser};ee("NTF | Notifications Actions",u),te({message:"Task Approved",type:"positive",position:"top-right"})};return(b,S)=>s.value.type==="task"&&s.value.status===P(N).Pending?(q(),w(T,{key:0,class:"q-gutter-x-md full-width"},{default:a(()=>[t(A,{dense:"",icon:"sym_o_close",color:"red-6",label:"Decline",onClick:S[0]||(S[0]=u=>i(s.value))}),t(A,{dense:"",icon:"sym_o_check",color:"green-6",label:"Approve",onClick:S[1]||(S[1]=u=>h(s.value))})]),_:1})):$("",!0)}});var Qt=ge(Bt,[["__scopeId","data-v-c3c8415e"]]);const Nt=["innerHTML"],At=ae({__name:"NotificationsList",setup(e){const c=Te(),d=ne(),s=_(()=>c.notificationComponents.map(({name:o,props:v})=>({component:h[o],props:v}))),i=o=>{o.title==="Request Credit Note"?c.notificationComponents=[{name:"CreditLinesCarousel",props:{propData:o}}]:o.title==="Request to Update Finance"&&o.type==="task"?c.notificationComponents=[{name:"FinanceCard",props:{propData:o}}]:o.title==="Request to Update Core Finance"?c.notificationComponents=[{name:"CoreFinanceCard",props:{propData:o}}]:c.notificationComponents=[]},h={CreditLinesCarousel:qt,CoreFinanceCard:Pt,FinanceCard:Qt},b=o=>{switch(o){case"approved":return"sym_o_check";case"done":return"sym_o_check";case"declined":return"sym_o_close";case"partiallyDeclined":return"sym_o_close";default:return"sym_o_pending"}},S=o=>{switch(o){case"approved":return"green";case"done":return"green";case"declined":return"grey";case"partiallyDeclined":return"orange-6";default:return"blue-6"}},u=o=>c.users.find(r=>r.userId===(o.content&&r.fullName&&o.content.startsWith(r.fullName)?o.senderId:o.recipientId))||{color:"grey",initials:"NA"};return(o,v)=>(q(),w(Je,{bordered:"",class:"rounded-borders q-ma-md"},{default:a(()=>[(q(!0),R(E,null,Z(P(d).loggedUser.notifications,(r,y)=>(q(),w(pt,{key:y,"expand-separator":"","hide-expand-icon":"",group:"notifications",onBeforeShow:C=>i(r)},{header:a(()=>[t(m,{avatar:""},{default:a(()=>[t(Oe,{size:"sm","text-color":"white",style:je({backgroundColor:u(r).color})},{default:a(()=>[p(I(u(r).initials),1)]),_:2},1032,["style"])]),_:2},1024),t(m,null,{default:a(()=>[p(I(r.title),1)]),_:2},1024),t(m,{side:""},{default:a(()=>[p(I(new Date(r.timestampUnix*1e3).toLocaleDateString("en-GB"))+" ",1),t(ue,{align:"bottom",rounded:"",color:S(r.status)},{default:a(()=>[t(X,{name:b(r.status)},null,8,["name"]),p(" "+I(P(be)(r.type)),1)]),_:2},1032,["color"])]),_:2},1024)]),default:a(()=>[t(O,null,{default:a(()=>[t(nt,null,{default:a(()=>[t(Xe),t(at,{dense:"",class:"text-white q-pa-sm",color:S(r.status),label:P(be)(r.status)},{default:a(()=>[t(X,{name:b(r.status)},null,8,["name"])]),_:2},1032,["color","label"])]),_:2},1024),t(Y,null,{default:a(()=>[ve("div",{innerHTML:r.content},null,8,Nt),(q(!0),R(E,null,Z(s.value,(C,B)=>(q(),w(Re(C.component),Ee(C.props,{key:B}),null,16))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onBeforeShow"]))),128))]),_:1}))}});const $t=ae({__name:"NotificationsPage",setup(e){const c=Te(),d=ne();return ze(()=>{d.readSettings(),c.readAllUsers()}),(s,i)=>(q(),w(Ke,{view:"hHh lpR fFf"},{default:a(()=>[t(Ge,null,{default:a(()=>[t(Me,{class:"text-white bg-primary"},{default:a(()=>[t(X,{name:"sym_o_notifications",size:"md"}),t(He,null,{default:a(()=>[p(" Notifications ")]),_:1})]),_:1})]),_:1}),t(Ye,{style:{"background-color":"var(--primary-white)"}},{default:a(()=>[t(We,null,{default:a(()=>[t(At)]),_:1})]),_:1})]),_:1}))}});var Zt=ge($t,[["__scopeId","data-v-6a60d745"]]);export{Zt as default};
