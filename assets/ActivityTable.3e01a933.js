import{u as Ue,d as he,Q as tl,c as j,b as ll}from"./QList.291bd828.js";import{n as al,o as rl,p as Ut,b as ol,e as nl,Q as ce,d as H,a as de}from"./QSeparator.8f075170.js";import{k as u,aS as ht,D as F,a as Ct,h as X,l as i,m as oe,Z as sl,a4 as Se,n as le,aF as wt,aG as pt,aN as ot,I as Ye,Y as nt,t as J,T as kt,v as Tt,ae as il,ad as ul,x as qt,z as cl,A as st,au as dl,at as it,aT as We,aU as ut,aV as vl,J as At,aW as fl,ab as ge,U as Q,L as ml,e as bl,o as $,f as re,w as b,g as s,Q as D,M as ve,O as fe,N as me,aO as ct,a5 as ee,a0 as gl,a3 as _l,R as E,P as _e,K as G,aR as dt,_ as yl,aX as vt,aY as De,a1 as Sl,a2 as Ul}from"./index.c0f6129f.js";import{Q as hl}from"./QBtnGroup.74aa5ca1.js";import{a as Cl,Q as wl}from"./QToolbar.a926ce6b.js";import{j as pl,n as kl,Q as ft,b as Tl,c as Je,a as Ee}from"./QCardActions.e06cbccf.js";import{o as ql,u as Al,a as Fe,Q as xl}from"./QCheckbox.9418787b.js";const xt=[{label:"Activity ID",value:"activityId",table:"z_ACT_Activity",field:"_kplt_Activity",type:"text",sql:"act"},{label:"Created At",value:"createdAt",table:"z_ACT_Activity",field:"CreatedAtUnix",type:"number",sql:"act"},{label:"Performer User ID",value:"performerUserId",table:"z_ACT_Activity",field:"_kflt_User_Performer",type:"text",sql:"act"},{label:"Performer User Name",value:"performerUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use1"},{label:"Performer User Surname",value:"performerUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use1"},{label:"Related User ID",value:"relatedUserId",table:"z_ACT_Activity",field:"_kflt_User_Related",type:"text",sql:"act"},{label:"Related User Name",value:"relatedUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use2"},{label:"Related User Surname",value:"relatedUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use2"},{label:"Performer User Group ID",value:"performerUserGroupId",table:"z_ACT_Activity",field:"PerformerUserGroupId",type:"text",sql:"act"},{label:"Action",value:"action",table:"z_ACT_Activity",field:"Action",type:"text",sql:"act"},{label:"Description",value:"description",table:"z_ACT_Activity",field:"Description",type:"text",sql:"act"},{label:"Note",value:"note",table:"z_ACT_Activity",field:"Note",type:"text",sql:"act"}],P=u(()=>ht(xt));u(()=>F("SELECT "+P.value.map(t=>t)+" FROM z_ACT_Activity AS act").value);const Ol=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin', 'Login User', 'Logout User', 'Re-Login ServiceScript', 'Login Dev', 'Logout Dev')`,e.value}),Pa=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin')`,e.value}),Na=u(()=>{const t=[0,1,9,10].map(c=>xt[c]),n=ht(t),m=F("SELECT "+n.join(", ")+" FROM  z_ACT_Activity AS act");return m.value+=` WHERE act."Action" IN ('Submit Submission') AND act."_kflt_User_Performer" IS NULL`,m.value}),Ia=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" NOT IN ('Login Admin', 'Logout Admin', 'Submit Submission') AND act."_kflt_User_Performer" IS NULL`,e.value}),Rl=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Create User')`,e.value}),Dl=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Update User Group')`,e.value}),El=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" = 'Update User Status' AND act."Description" LIKE '%to Inactive%'`,e.value}),Fa=u(()=>{const e=Ct(),t=F("SELECT "+P.value.map(n=>n)+" FROM z_ACT_Activity AS act");return P.value.some(n=>n.indexOf("use1.")!==-1)&&(t.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(n=>n.indexOf("use2.")!==-1)&&(t.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),t.value+=` WHERE act."_kflt_User_Performer" ='${e.selectedUser.userId}' OR act."_kflt_User_Related" ='${e.selectedUser.userId}'`,t.value}),La=u(()=>{const e=F("SELECT "+P.value.map(t=>t)+" FROM z_ACT_Activity AS act");return P.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),P.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=' WHERE act."_kflt_User_Performer" IS NOT NULL',e.value});var K=X({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const m=le(),{proxy:{$q:c}}=m,U=f=>{n("click",f)};return()=>{if(e.props===void 0)return i("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:U},oe(t.default));let f,g;const S=m.vnode.key;if(S){if(f=e.props.colsMap[S],f===void 0)return}else f=e.props.col;if(f.sortable===!0){const a=f.align==="right"?"unshift":"push";g=sl(t.default,[]),g[a](i(Se,{class:f.__iconClass,name:c.iconSet.table.arrowUp}))}else g=oe(t.default);const y={class:f.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:f.headerStyle,onClick:a=>{f.sortable===!0&&e.props.sort(f),U(a)}};return i("th",y,g)}}});const Pl=i("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[i("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),i("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Nl=X({name:"QRadio",props:{...Ue,...wt,...pl,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:m}=le(),c=he(e,m.$q),U=pt(e,ql),f=F(null),{refocusTargetEl:g,refocusTarget:S}=Al(e,f),y=u(()=>ot(e.modelValue)===ot(e.val)),a=u(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(c.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),C=u(()=>{const A=e.color!==void 0&&(e.keepColor===!0||y.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${y.value===!0?"truthy":"falsy"}${A}`}),o=u(()=>(y.value===!0?e.checkedIcon:e.uncheckedIcon)||null),O=u(()=>e.disable===!0?-1:e.tabindex||0),R=u(()=>{const A={type:"radio"};return e.name!==void 0&&Object.assign(A,{".checked":y.value===!0,"^checked":y.value===!0?"checked":void 0,name:e.name,value:e.val}),A}),T=kl(R);function p(A){A!==void 0&&(nt(A),S(A)),e.disable!==!0&&y.value!==!0&&n("update:modelValue",e.val,A)}function z(A){(A.keyCode===13||A.keyCode===32)&&nt(A)}function V(A){(A.keyCode===13||A.keyCode===32)&&p(A)}return Object.assign(m,{set:p}),()=>{const A=o.value!==null?[i("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[i(Se,{class:"q-radio__icon",name:o.value})])]:[Pl];e.disable!==!0&&T(A,"unshift"," q-radio__native q-ma-none q-pa-none");const h=[i("div",{class:C.value,style:U.value,"aria-hidden":"true"},A)];g.value!==null&&h.push(g.value);const v=e.label!==void 0?Ye(t.default,[e.label]):oe(t.default);return v!==void 0&&h.push(i("div",{class:"q-radio__label q-anchor--skip"},v)),i("div",{ref:f,class:a.value,tabindex:O.value,role:"radio","aria-label":e.label,"aria-checked":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:z,onKeyup:V},h)}}});const Ot={radio:Nl,checkbox:Fe,toggle:xl},Il=Object.keys(Ot);var Pe=X({name:"QOptionGroup",props:{...Ue,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(t=>"value"in t&&"label"in t)},name:String,type:{default:"radio",validator:e=>Il.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:t,slots:n}){const{proxy:{$q:m}}=le(),c=Array.isArray(e.modelValue);e.type==="radio"?c===!0&&console.error("q-option-group: model should not be array"):c===!1&&console.error("q-option-group: model should be array in your case");const U=he(e,m),f=u(()=>Ot[e.type]),g=u(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),S=u(()=>{const a={role:"group"};return e.type==="radio"&&(a.role="radiogroup",e.disable===!0&&(a["aria-disabled"]="true")),a});function y(a){t("update:modelValue",a)}return()=>i("div",{class:g.value,...S.value},e.options.map((a,C)=>{const o=n["label-"+C]!==void 0?()=>n["label-"+C](a):n.label!==void 0?()=>n.label(a):void 0;return i("div",[i(f.value,{modelValue:e.modelValue,val:a.value,name:a.name===void 0?e.name:a.name,disable:e.disable||a.disable,label:o===void 0?a.label:null,leftLabel:a.leftLabel===void 0?e.leftLabel:a.leftLabel,color:a.color===void 0?e.color:a.color,checkedIcon:a.checkedIcon,uncheckedIcon:a.uncheckedIcon,dark:a.dark||U.value,size:a.size===void 0?e.size:a.size,dense:e.dense,keepColor:a.keepColor===void 0?e.keepColor:a.keepColor,"onUpdate:modelValue":y},o)])}))}}),te=X({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=le(),m=u(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return i("td",{class:m.value},oe(t.default));const c=n.vnode.key,U=(e.props.colsMap!==void 0?e.props.colsMap[c]:null)||e.props.col;if(U===void 0)return;const{row:f}=e.props;return i("td",{class:m.value+U.__tdClass(f),style:U.__tdStyle(f)},oe(t.default))}}}),Fl=X({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const n=u(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>i("tr",{class:n.value},oe(t.default))}});const Ll=["horizontal","vertical","cell","none"];var zl=X({name:"QMarkupTable",props:{...Ue,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Ll.includes(e)}},setup(e,{slots:t}){const n=le(),m=he(e,n.proxy.$q),c=u(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(m.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>i("div",{class:c.value},[i("table",{class:"q-table"},oe(t.default))])}});function Rt(e,t){return i("div",e,[i("table",{class:"q-table"},t)])}const Vl={list:tl,table:zl},Bl=["list","table","__qtable"];var Ml=X({name:"QVirtualScroll",props:{...al,type:{type:String,default:"list",validator:e=>Bl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:n}){let m;const c=F(null),U=u(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:f,localResetVirtualScroll:g,padVirtualScroll:S,onVirtualScrollEvt:y}=rl({virtualScrollLength:U,getVirtualScrollTarget:R,getVirtualScrollEl:O}),a=u(()=>{if(U.value===0)return[];const V=(A,h)=>({index:f.value.from+h,item:A});return e.itemsFn===void 0?e.items.slice(f.value.from,f.value.to).map(V):e.itemsFn(f.value.from,f.value.to-f.value.from).map(V)}),C=u(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),o=u(()=>e.scrollTarget!==void 0?{}:{tabindex:0});J(U,()=>{g()}),J(()=>e.scrollTarget,()=>{p(),T()});function O(){return c.value.$el||c.value}function R(){return m}function T(){m=cl(O(),e.scrollTarget),m.addEventListener("scroll",y,st.passive)}function p(){m!==void 0&&(m.removeEventListener("scroll",y,st.passive),m=void 0)}function z(){let V=S(e.type==="list"?"div":"tbody",a.value.map(t.default));return t.before!==void 0&&(V=t.before().concat(V)),Ye(t.after,V)}return kt(()=>{g()}),Tt(()=>{T()}),il(()=>{T()}),ul(()=>{p()}),qt(()=>{p()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Rt({ref:c,class:"q-table__middle "+C.value},z()):i(Vl[e.type],{...n,ref:c,class:[n.class,C.value],...o.value},z)}}});const $l={xs:2,sm:4,md:6,lg:10,xl:14};function mt(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Ql=X({name:"QLinearProgress",props:{...Ue,...wt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=le(),m=he(e,n.$q),c=pt(e,$l),U=u(()=>e.indeterminate===!0||e.query===!0),f=u(()=>e.reverse!==e.query),g=u(()=>({...c.value!==null?c.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),S=u(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=u(()=>mt(e.buffer!==void 0?e.buffer:1,f.value,n.$q)),a=u(()=>`with${e.instantFeedback===!0?"out":""}-transition`),C=u(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${m.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),o=u(()=>mt(U.value===!0?1:e.value,f.value,n.$q)),O=u(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${U.value===!0?"in":""}determinate`),R=u(()=>({width:`${e.value*100}%`})),T=u(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const p=[i("div",{class:C.value,style:y.value}),i("div",{class:O.value,style:o.value})];return e.stripe===!0&&U.value===!1&&p.push(i("div",{class:T.value,style:R.value})),i("div",{class:S.value,style:g.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ye(t.default,p))}}});let ye=0;const Gl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},jl=["update:fullscreen","fullscreen"];function Hl(){const e=le(),{props:t,emit:n,proxy:m}=e;let c,U,f;const g=F(!1);dl(e)===!0&&J(()=>m.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&a()}),J(()=>t.fullscreen,C=>{g.value!==C&&S()}),J(g,C=>{n("update:fullscreen",C),n("fullscreen",C)});function S(){g.value===!0?a():y()}function y(){g.value!==!0&&(g.value=!0,f=m.$el.parentNode,f.replaceChild(U,m.$el),document.body.appendChild(m.$el),ye++,ye===1&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:a},it.add(c))}function a(){g.value===!0&&(c!==void 0&&(it.remove(c),c=void 0),f.replaceChild(m.$el,U),g.value=!1,ye=Math.max(0,ye-1),ye===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),m.$el.scrollIntoView!==void 0&&setTimeout(()=>{m.$el.scrollIntoView()})))}return kt(()=>{U=document.createElement("span")}),Tt(()=>{t.fullscreen===!0&&y()}),qt(a),Object.assign(m,{toggleFullscreen:S,setFullscreen:y,exitFullscreen:a}),{inFullscreen:g,toggleFullscreen:S}}function Jl(e,t){return new Date(e)-new Date(t)}const Wl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Yl(e,t,n,m){const c=u(()=>{const{sortBy:g}=t.value;return g&&n.value.find(S=>S.name===g)||null}),U=u(()=>e.sortMethod!==void 0?e.sortMethod:(g,S,y)=>{const a=n.value.find(O=>O.name===S);if(a===void 0||a.field===void 0)return g;const C=y===!0?-1:1,o=typeof a.field=="function"?O=>a.field(O):O=>O[a.field];return g.sort((O,R)=>{let T=o(O),p=o(R);return a.rawSort!==void 0?a.rawSort(T,p,O,R)*C:T==null?-1*C:p==null?1*C:a.sort!==void 0?a.sort(T,p,O,R)*C:We(T)===!0&&We(p)===!0?(T-p)*C:ut(T)===!0&&ut(p)===!0?Jl(T,p)*C:typeof T=="boolean"&&typeof p=="boolean"?(T-p)*C:([T,p]=[T,p].map(z=>(z+"").toLocaleString().toLowerCase()),T<p?-1*C:T===p?0:C)})});function f(g){let S=e.columnSortOrder;if(vl(g)===!0)g.sortOrder&&(S=g.sortOrder),g=g.name;else{const C=n.value.find(o=>o.name===g);C!==void 0&&C.sortOrder&&(S=C.sortOrder)}let{sortBy:y,descending:a}=t.value;y!==g?(y=g,a=S==="da"):e.binaryStateSort===!0?a=!a:a===!0?S==="ad"?y=null:a=!1:S==="ad"?a=!0:y=null,m({sortBy:y,descending:a,page:1})}return{columnToSort:c,computedSortMethod:U,sort:f}}const Kl={filter:[String,Object],filterMethod:Function};function Xl(e,t){const n=u(()=>e.filterMethod!==void 0?e.filterMethod:(m,c,U,f)=>{const g=c?c.toLowerCase():"";return m.filter(S=>U.some(y=>{const a=f(y,S)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(g)!==-1}))});return J(()=>e.filter,()=>{At(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function Zl(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function bt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const ea={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ta(e,t){const{props:n,emit:m}=e,c=F(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),U=u(()=>{const a=n["onUpdate:pagination"]!==void 0?{...c.value,...n.pagination}:c.value;return bt(a)}),f=u(()=>U.value.rowsNumber!==void 0);function g(a){S({pagination:a,filter:n.filter})}function S(a={}){At(()=>{m("request",{pagination:a.pagination||U.value,filter:a.filter||n.filter,getCellValue:t})})}function y(a,C){const o=bt({...U.value,...a});if(Zl(U.value,o)===!0){f.value===!0&&C===!0&&g(o);return}if(f.value===!0){g(o);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?m("update:pagination",o):c.value=o}return{innerPagination:c,computedPagination:U,isServerSide:f,requestServerInteraction:S,setPagination:y}}function la(e,t,n,m,c,U){const{props:f,emit:g,proxy:{$q:S}}=e,y=u(()=>m.value===!0?n.value.rowsNumber||0:U.value),a=u(()=>{const{page:h,rowsPerPage:v}=n.value;return(h-1)*v}),C=u(()=>{const{page:h,rowsPerPage:v}=n.value;return h*v}),o=u(()=>n.value.page===1),O=u(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/n.value.rowsPerPage))),R=u(()=>C.value===0?!0:n.value.page>=O.value),T=u(()=>(f.rowsPerPageOptions.includes(t.value.rowsPerPage)?f.rowsPerPageOptions:[t.value.rowsPerPage].concat(f.rowsPerPageOptions)).map(v=>({label:v===0?S.lang.table.allRows:""+v,value:v})));J(O,(h,v)=>{if(h===v)return;const r=n.value.page;h&&!r?c({page:1}):h<r&&c({page:h})});function p(){c({page:1})}function z(){const{page:h}=n.value;h>1&&c({page:h-1})}function V(){const{page:h,rowsPerPage:v}=n.value;C.value>0&&h*v<y.value&&c({page:h+1})}function A(){c({page:O.value})}return f["onUpdate:pagination"]!==void 0&&g("update:pagination",{...n.value}),{firstRowIndex:a,lastRowIndex:C,isFirstPage:o,isLastPage:R,pagesNumber:O,computedRowsPerPageOptions:T,computedRowsNumber:y,firstPage:p,prevPage:z,nextPage:V,lastPage:A}}const aa={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},ra=["update:selected","selection"];function oa(e,t,n,m){const c=u(()=>{const R={};return e.selected.map(m.value).forEach(T=>{R[T]=!0}),R}),U=u(()=>e.selection!=="none"),f=u(()=>e.selection==="single"),g=u(()=>e.selection==="multiple"),S=u(()=>n.value.length!==0&&n.value.every(R=>c.value[m.value(R)]===!0)),y=u(()=>S.value!==!0&&n.value.some(R=>c.value[m.value(R)]===!0)),a=u(()=>e.selected.length);function C(R){return c.value[R]===!0}function o(){t("update:selected",[])}function O(R,T,p,z){t("selection",{rows:T,added:p,keys:R,evt:z});const V=f.value===!0?p===!0?T:[]:p===!0?e.selected.concat(T):e.selected.filter(A=>R.includes(m.value(A))===!1);t("update:selected",V)}return{hasSelectionMode:U,singleSelection:f,multipleSelection:g,allRowsSelected:S,someRowsSelected:y,rowsSelectedNumber:a,isRowSelected:C,clearSelection:o,updateSelection:O}}function gt(e){return Array.isArray(e)?e.slice():[]}const na={expanded:Array},sa=["update:expanded"];function ia(e,t){const n=F(gt(e.expanded));J(()=>e.expanded,f=>{n.value=gt(f)});function m(f){return n.value.includes(f)}function c(f){e.expanded!==void 0?t("update:expanded",f):n.value=f}function U(f,g){const S=n.value.slice(),y=S.indexOf(f);g===!0?y===-1&&(S.push(f),c(S)):y!==-1&&(S.splice(y,1),c(S))}return{isRowExpanded:m,setExpanded:c,updateExpanded:U}}const ua={visibleColumns:Array};function ca(e,t,n){const m=u(()=>{if(e.columns!==void 0)return e.columns;const g=e.rows[0];return g!==void 0?Object.keys(g).map(S=>({name:S,label:S.toUpperCase(),field:S,align:We(g[S])?"right":"left",sortable:!0})):[]}),c=u(()=>{const{sortBy:g,descending:S}=t.value;return(e.visibleColumns!==void 0?m.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):m.value).map(a=>{const C=a.align||"right",o=`text-${C}`;return{...a,align:C,__iconClass:`q-table__sort-icon q-table__sort-icon--${C}`,__thClass:o+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===g?` sorted ${S===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>o+" "+a.classes:O=>o+" "+a.classes(O):()=>o}})}),U=u(()=>{const g={};return c.value.forEach(S=>{g[S.name]=S}),g}),f=u(()=>e.tableColspan!==void 0?e.tableColspan:c.value.length+(n.value===!0?1:0));return{colList:m,computedCols:c,computedColsMap:U,computedColspan:f}}const Ne="q-table__bottom row items-center",Dt={};Ut.forEach(e=>{Dt[e]={}});var da=X({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Dt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ue,...Gl,...ua,...Kl,...ea,...na,...aa,...Wl},emits:["request","virtualScroll",...jl,...sa,...ra],setup(e,{slots:t,emit:n}){const m=le(),{proxy:{$q:c}}=m,U=he(e,c),{inFullscreen:f,toggleFullscreen:g}=Hl(),S=u(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),y=F(null),a=F(null),C=u(()=>e.grid!==!0&&e.virtualScroll===!0),o=u(()=>" q-table__card"+(U.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),O=u(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":o.value)+(U.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(f.value===!0?" fullscreen scroll":"")),R=u(()=>O.value+(e.loading===!0?" q-table--loading":""));J(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+O.value,()=>{C.value===!0&&a.value!==null&&a.value.reset()});const{innerPagination:T,computedPagination:p,isServerSide:z,requestServerInteraction:V,setPagination:A}=ta(m,ie),{computedFilterMethod:h}=Xl(e,A),{isRowExpanded:v,setExpanded:r,updateExpanded:d}=ia(e,n),x=u(()=>{let l=e.rows;if(z.value===!0||l.length===0)return l;const{sortBy:_,descending:w}=p.value;return e.filter&&(l=h.value(l,e.filter,W.value,ie)),Nt.value!==null&&(l=It.value(e.rows===l?l.slice():l,_,w)),l}),Z=u(()=>x.value.length),L=u(()=>{let l=x.value;if(z.value===!0)return l;const{rowsPerPage:_}=p.value;return _!==0&&(ke.value===0&&e.rows!==l?l.length>Te.value&&(l=l.slice(0,Te.value)):l=l.slice(ke.value,Te.value)),l}),{hasSelectionMode:B,singleSelection:Le,multipleSelection:Ce,allRowsSelected:we,someRowsSelected:be,rowsSelectedNumber:ne,isRowSelected:se,clearSelection:Et,updateSelection:pe}=oa(e,n,L,S),{colList:Pt,computedCols:W,computedColsMap:Ke,computedColspan:Xe}=ca(e,p,B),{columnToSort:Nt,computedSortMethod:It,sort:ze}=Yl(e,p,Pt,A),{firstRowIndex:ke,lastRowIndex:Te,isFirstPage:Ve,isLastPage:Be,pagesNumber:qe,computedRowsPerPageOptions:Ft,computedRowsNumber:Ae,firstPage:Me,prevPage:$e,nextPage:Qe,lastPage:Ge}=la(m,T,p,z,A,Z),Lt=u(()=>L.value.length===0),zt=u(()=>{const l={};return Ut.forEach(_=>{l[_]=e[_]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function Vt(){C.value===!0&&a.value.reset()}function Bt(){if(e.grid===!0)return Zt();const l=e.hideHeader!==!0?at:null;if(C.value===!0){const w=t["top-row"],k=t["bottom-row"],q={default:I=>et(I.item,t.body,I.index)};if(w!==void 0){const I=i("tbody",w({cols:W.value}));q.before=l===null?()=>I:()=>[l()].concat(I)}else l!==null&&(q.before=l);return k!==void 0&&(q.after=()=>i("tbody",k({cols:W.value}))),i(Ml,{ref:a,class:e.tableClass,style:e.tableStyle,...zt.value,scrollTarget:e.virtualScrollTarget,items:L.value,type:"__qtable",tableColspan:Xe.value,onVirtualScroll:$t},q)}const _=[Qt()];return l!==null&&_.unshift(l()),Rt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},_)}function Mt(l,_){if(a.value!==null){a.value.scrollTo(l,_);return}l=parseInt(l,10);const w=y.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(w!==null){const k=y.value.querySelector(".q-table__middle.scroll"),q=w.offsetTop-e.virtualScrollStickySizeStart,I=q<k.scrollTop?"decrease":"increase";k.scrollTop=q,n("virtualScroll",{index:l,from:0,to:T.value.rowsPerPage-1,direction:I})}}function $t(l){n("virtualScroll",l)}function Ze(){return[i(Ql,{class:"q-table__linear-progress",color:e.color,dark:U.value,indeterminate:!0,trackColor:"transparent"})]}function et(l,_,w){const k=S.value(l),q=se(k);if(_!==void 0)return _(tt({key:k,row:l,pageIndex:w,__trClass:q?"selected":""}));const I=t["body-cell"],N=W.value.map(M=>{const Oe=t[`body-cell-${M.name}`],Re=Oe!==void 0?Oe:I;return Re!==void 0?Re(Gt({key:k,row:l,pageIndex:w,col:M})):i("td",{class:M.__tdClass(l),style:M.__tdStyle(l)},ie(M,l))});if(B.value===!0){const M=t["body-selection"],Oe=M!==void 0?M(jt({key:k,row:l,pageIndex:w})):[i(Fe,{modelValue:q,color:e.color,dark:U.value,dense:e.dense,"onUpdate:modelValue":(Re,el)=>{pe([k],[l],Re,el)}})];N.unshift(i("td",{class:"q-table--col-auto-width"},Oe))}const Y={key:k,class:{selected:q}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=M=>{n("RowClick",M,l,w)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=M=>{n("RowDblclick",M,l,w)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=M=>{n("RowContextmenu",M,l,w)}),i("tr",Y,N)}function Qt(){const l=t.body,_=t["top-row"],w=t["bottom-row"];let k=L.value.map((q,I)=>et(q,l,I));return _!==void 0&&(k=_({cols:W.value}).concat(k)),w!==void 0&&(k=k.concat(w({cols:W.value}))),i("tbody",k)}function tt(l){return je(l),l.cols=l.cols.map(_=>ge({..._},"value",()=>ie(_,l.row))),l}function Gt(l){return je(l),ge(l,"value",()=>ie(l.col,l.row)),l}function jt(l){return je(l),l}function je(l){Object.assign(l,{cols:W.value,colsMap:Ke.value,sort:ze,rowIndex:ke.value+l.pageIndex,color:e.color,dark:U.value,dense:e.dense}),B.value===!0&&ge(l,"selected",()=>se(l.key),(_,w)=>{pe([l.key],[l.row],_,w)}),ge(l,"expand",()=>v(l.key),_=>{d(l.key,_)})}function ie(l,_){const w=typeof l.field=="function"?l.field(_):_[l.field];return l.format!==void 0?l.format(w,_):w}const ue=u(()=>({pagination:p.value,pagesNumber:qe.value,isFirstPage:Ve.value,isLastPage:Be.value,firstPage:Me,prevPage:$e,nextPage:Qe,lastPage:Ge,inFullscreen:f.value,toggleFullscreen:g}));function Ht(){const l=t.top,_=t["top-left"],w=t["top-right"],k=t["top-selection"],q=B.value===!0&&k!==void 0&&ne.value>0,I="q-table__top relative-position row items-center";if(l!==void 0)return i("div",{class:I},[l(ue.value)]);let N;if(q===!0?N=k(ue.value).slice():(N=[],_!==void 0?N.push(i("div",{class:"q-table__control"},[_(ue.value)])):e.title&&N.push(i("div",{class:"q-table__control"},[i("div",{class:["q-table__title",e.titleClass]},e.title)]))),w!==void 0&&(N.push(i("div",{class:"q-table__separator col"})),N.push(i("div",{class:"q-table__control"},[w(ue.value)]))),N.length!==0)return i("div",{class:I},N)}const lt=u(()=>be.value===!0?null:we.value);function at(){const l=Jt();return e.loading===!0&&t.loading===void 0&&l.push(i("tr",{class:"q-table__progress"},[i("th",{class:"relative-position",colspan:Xe.value},Ze())])),i("thead",l)}function Jt(){const l=t.header,_=t["header-cell"];if(l!==void 0)return l(He({header:!0})).slice();const w=W.value.map(k=>{const q=t[`header-cell-${k.name}`],I=q!==void 0?q:_,N=He({col:k});return I!==void 0?I(N):i(K,{key:k.name,props:N},()=>k.label)});if(Le.value===!0&&e.grid!==!0)w.unshift(i("th",{class:"q-table--col-auto-width"}," "));else if(Ce.value===!0){const k=t["header-selection"],q=k!==void 0?k(He({})):[i(Fe,{color:e.color,modelValue:lt.value,dark:U.value,dense:e.dense,"onUpdate:modelValue":rt})];w.unshift(i("th",{class:"q-table--col-auto-width"},q))}return[i("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},w)]}function He(l){return Object.assign(l,{cols:W.value,sort:ze,colsMap:Ke.value,color:e.color,dark:U.value,dense:e.dense}),Ce.value===!0&&ge(l,"selected",()=>lt.value,rt),l}function rt(l){be.value===!0&&(l=!1),pe(L.value.map(S.value),L.value,l)}const xe=u(()=>{const l=[e.iconFirstPage||c.iconSet.table.firstPage,e.iconPrevPage||c.iconSet.table.prevPage,e.iconNextPage||c.iconSet.table.nextPage,e.iconLastPage||c.iconSet.table.lastPage];return c.lang.rtl===!0?l.reverse():l});function Wt(){if(e.hideBottom===!0)return;if(Lt.value===!0){if(e.hideNoData===!0)return;const w=e.loading===!0?e.loadingLabel||c.lang.table.loading:e.filter?e.noResultsLabel||c.lang.table.noResults:e.noDataLabel||c.lang.table.noData,k=t["no-data"],q=k!==void 0?[k({message:w,icon:c.iconSet.table.warning,filter:e.filter})]:[i(Se,{class:"q-table__bottom-nodata-icon",name:c.iconSet.table.warning}),w];return i("div",{class:Ne+" q-table__bottom--nodata"},q)}const l=t.bottom;if(l!==void 0)return i("div",{class:Ne},[l(ue.value)]);const _=e.hideSelectedBanner!==!0&&B.value===!0&&ne.value>0?[i("div",{class:"q-table__control"},[i("div",[(e.selectedRowsLabel||c.lang.table.selectedRecords)(ne.value)])])]:[];if(e.hidePagination!==!0)return i("div",{class:Ne+" justify-end"},Kt(_));if(_.length!==0)return i("div",{class:Ne},_)}function Yt(l){A({page:1,rowsPerPage:l.value})}function Kt(l){let _;const{rowsPerPage:w}=p.value,k=e.paginationLabel||c.lang.table.pagination,q=t.pagination,I=e.rowsPerPageOptions.length>1;if(l.push(i("div",{class:"q-table__separator col"})),I===!0&&l.push(i("div",{class:"q-table__control"},[i("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||c.lang.table.recordsPerPage]),i(ol,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:w,options:Ft.value,displayValue:w===0?c.lang.table.allRows:w,dark:U.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Yt})])),q!==void 0)_=q(ue.value);else if(_=[i("span",w!==0?{class:"q-table__bottom-item"}:{},[w?k(ke.value+1,Math.min(Te.value,Ae.value),Ae.value):k(1,Z.value,Ae.value)])],w!==0&&qe.value>1){const N={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(N.size="sm"),qe.value>2&&_.push(i(Q,{key:"pgFirst",...N,icon:xe.value[0],disable:Ve.value,onClick:Me})),_.push(i(Q,{key:"pgPrev",...N,icon:xe.value[1],disable:Ve.value,onClick:$e}),i(Q,{key:"pgNext",...N,icon:xe.value[2],disable:Be.value,onClick:Qe})),qe.value>2&&_.push(i(Q,{key:"pgLast",...N,icon:xe.value[3],disable:Be.value,onClick:Ge}))}return l.push(i("div",{class:"q-table__control"},_)),l}function Xt(){const l=e.gridHeader===!0?[i("table",{class:"q-table"},[at()])]:e.loading===!0&&t.loading===void 0?Ze():void 0;return i("div",{class:"q-table__middle"},l)}function Zt(){const l=t.item!==void 0?t.item:_=>{const w=_.cols.map(q=>i("div",{class:"q-table__grid-item-row"},[i("div",{class:"q-table__grid-item-title"},[q.label]),i("div",{class:"q-table__grid-item-value"},[q.value])]));if(B.value===!0){const q=t["body-selection"],I=q!==void 0?q(_):[i(Fe,{modelValue:_.selected,color:e.color,dark:U.value,dense:e.dense,"onUpdate:modelValue":(N,Y)=>{pe([_.key],[_.row],N,Y)}})];w.unshift(i("div",{class:"q-table__grid-item-row"},I),i(nl,{dark:U.value}))}const k={class:["q-table__grid-item-card"+o.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(k.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(k.onClick=q=>{n("RowClick",q,_.row,_.pageIndex)}),e.onRowDblclick!==void 0&&(k.onDblclick=q=>{n("RowDblclick",q,_.row,_.pageIndex)})),i("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(_.selected===!0?" q-table__grid-item--selected":"")},[i("div",k,w)])};return i("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},L.value.map((_,w)=>l(tt({key:S.value(_),row:_,pageIndex:w}))))}return Object.assign(m.proxy,{requestServerInteraction:V,setPagination:A,firstPage:Me,prevPage:$e,nextPage:Qe,lastPage:Ge,isRowSelected:se,clearSelection:Et,isRowExpanded:v,setExpanded:r,sort:ze,resetVirtualScroll:Vt,scrollTo:Mt,getCellValue:ie}),fl(m.proxy,{filteredSortedRows:()=>x.value,computedRows:()=>L.value,computedRowsNumber:()=>Ae.value}),()=>{const l=[Ht()],_={ref:y,class:R.value};return e.grid===!0?l.push(Xt()):Object.assign(_,{class:[_.class,e.cardClass],style:e.cardStyle}),l.push(Bt(),Wt()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),i("div",_,l)}}});function _t(e){setTimeout(()=>{window.URL.revokeObjectURL(e.href)},1e4),e.remove()}function va(e,t,n={}){const{mimeType:m,byteOrderMark:c,encoding:U}=typeof n=="string"?{mimeType:n}:n,f=U!==void 0?new TextEncoder(U).encode([t]):t,g=c!==void 0?[c,f]:[f],S=new Blob(g,{type:m||"application/octet-stream"}),y=document.createElement("a");y.href=window.URL.createObjectURL(S),y.setAttribute("download",e),typeof y.download=="undefined"&&y.setAttribute("target","_blank"),y.classList.add("hidden"),y.style.position="fixed",document.body.appendChild(y);try{return y.click(),_t(y),!0}catch(a){return _t(y),a}}const yt=()=>new Date(Date.UTC(new Date().getUTCFullYear(),new Date().getUTCMonth(),new Date().getUTCDate(),new Date().getUTCHours(),new Date().getUTCMinutes(),new Date().getUTCSeconds())),fa=e=>new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),ma=e=>{const t=new Date(e.getUTCFullYear(),e.getUTCMonth(),1);return t.setUTCHours(0,0,0,0),t},Ie=e=>e.toISOString().split("T")[0],St=e=>new Date(e);const ae=e=>(Sl("data-v-614c0d28"),e=e(),Ul(),e),ba=ae(()=>G("span",{style:{"font-weight":"bold"}},"Selection:",-1)),ga=ae(()=>G("span",{style:{"font-weight":"bold"}},"Timeframe:",-1)),_a=ae(()=>G("span",{style:{"font-weight":"bold"}},"Performer Users:",-1)),ya=ae(()=>G("span",{style:{"font-weight":"bold"}},"Performer Groups:",-1)),Sa=ae(()=>G("span",{style:{"font-weight":"bold"}},"Related Users:",-1)),Ua=ae(()=>G("span",{style:{"font-weight":"bold"}},"Actions:",-1)),ha=ae(()=>G("span",{style:{"font-weight":"bold"}},"Decription Filter:",-1)),Ca=ae(()=>G("span",{style:{"font-weight":"bold"}},"Size:",-1)),wa={class:"q-ma-md column",style:{gap:"0.6rem"}},pa={class:"q-ma-md column",style:{gap:"0.6rem"}},ka={class:"q-mx-md"},Ta=ml({__name:"ActivityTable",props:{showSelections:{type:Boolean,default:!0}},setup(e){const t=bl(),n=Ct(),m=F(null),c=F([{name:"rowNumber",label:"rowNumber",align:"right",field:"",sortable:!1},{name:"activityId",label:"ID",align:"left",field:"activityId",sortable:!1},{name:"date",label:"Date",align:"left",field:"date",sortable:!1},{name:"time",label:"Time",align:"left",field:"time",sortable:!1},{name:"performerUserFullName",label:"User",align:"left",field:"performerUserFullName",sortable:!1},{name:"performerUserGroupName",label:"Group",align:"left",field:"performerUserGroupName",sortable:!1},{name:"relatedUserFullName",label:"Related User",align:"left",field:"relatedUserFullName",sortable:!1},{name:"action",label:"Action",align:"left",field:"action",sortable:!1},{name:"description",label:"Description",align:"left",field:"description",sortable:!1}]),U=["rowNumber","date","time","performerUserFullName","performerUserGroupName","relatedUserFullName","action","description"],f=F(!1),g=yt(),S=ma(g),y=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"monthToDate",label:"Month to Date"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}],a=[{value:"access",label:"Access"},{value:"userCreated",label:"New Users"},{value:"userUpdateGroup",label:"Group Changes"},{value:"userInactive",label:"Inactivated"}],C=h=>{switch(o.value.selection=h,o.value.performerUserId=[],o.value.relatedUserId=[],o.value.actions=[],o.value.term="",h){case"access":t.readActivity(Ol.value);break;case"userCreated":t.readActivity(Rl.value);break;case"userUpdateGroup":t.readActivity(Dl.value);break;case"userInactive":t.readActivity(El.value);break}},o=F({term:"",selection:"access",timeframe:"monthToDate",dateStart:Ie(S),dateEnd:Ie(g),searchColumns:["description"],performerUserId:[],performerUserGroupId:[],relatedUserId:[],actions:[]}),O=u(()=>[...new Set(t.activity.map(h=>h.action))]),R=u(()=>t.activity.map(h=>({value:h.performerUserId,label:h.performerUserFullName})).filter((h,v,r)=>v===r.findIndex(d=>d.label===h.label&&d.value===h.value))),T=u(()=>t.activity.map(h=>({value:h.performerUserGroupId||"",label:h.performerUserGroupName||""})).filter((h,v,r)=>v===r.findIndex(d=>d.label===h.label&&d.value===h.value))),p=u(()=>t.activity.map(h=>({value:h.relatedUserId,label:h.relatedUserFullName})).filter((h,v,r)=>v===r.findIndex(d=>d.label===h.label&&d.value===h.value))),z=h=>{o.value.timeframe=h;const v=yt(),r=fa(v);let d=new Date,x=new Date;switch(h){case"today":d=r,x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),23,59,59));break;case"yesterday":d=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()-1)),x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()-1,23,59,59));break;case"monthToDate":d=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),1)),x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),23,59,59));break;case"lastMonth":d=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth()-1,1)),x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),0));break;case"custom":d=new Date(o.value.dateStart),x=new Date(o.value.dateEnd),isNaN(d.getTime())||isNaN(x.getTime())?De({message:"Invalid custom date range",color:"negative",icon:"warning"}):x<d&&De({message:"End date cannot be before start date",color:"negative",icon:"warning"});break}o.value.dateStart=Ie(d),o.value.dateEnd=Ie(x)},V=u(()=>{const h=St(o.value.dateStart),v=St(o.value.dateEnd);return t.activity.filter(r=>{var we,be,ne,se;const d=new Date(r.createdAt),x=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate())),Z=x>=h&&x<=v,L=!((we=o.value.performerUserId)!=null&&we.length)||o.value.performerUserId.includes(r.performerUserId),B=!((be=o.value.relatedUserId)!=null&&be.length)||o.value.relatedUserId.includes(r.relatedUserId),Le=!((ne=o.value.actions)!=null&&ne.length)||o.value.actions.includes(r.action),Ce=!((se=o.value.performerUserGroupId)!=null&&se.length)||r.performerUserGroupId&&o.value.performerUserGroupId.includes(r.performerUserGroupId);return Z&&L&&B&&Le&&Ce})}),A=()=>{if(!m.value)return;const h=m.value.filteredSortedRows,v=[c.value.map(L=>vt(L.label))].concat(h.map(L=>c.value.map(B=>vt(typeof B.field=="function"?B.field(L):L[B.field===void 0?B.name:B.field])).join(","))).join(`\r
`),r=new Date,x=`User Activity ${`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()} ${r.getHours()}-${r.getMinutes()}-${r.getSeconds()}`}.csv`;va(x,v,"text/csv")!==!0?De({message:"Browser denied file download...",color:"negative",icon:"warning"}):De({message:"File downloaded successfully...",color:"positive",icon:"download"})};return J(()=>n.selectedUser,()=>{o.value.performerUserId=[],o.value.relatedUserId=[],o.value.actions=[],o.value.term=""}),(h,v)=>($(),re(ft,null,{default:b(()=>[s(da,{ref_key:"tableRef",ref:m,rows:V.value,columns:c.value,"row-key":"activityId","rows-per-page-options":[-1],"visible-columns":U,filter:o.value.term,dense:"","hide-pagination":"","virtual-scroll":"",class:"header-table",style:{"min-height":"90vh",overflow:"auto",margin:"0.4rem"}},{top:b(()=>[s(j,{class:"text-h3"},{default:b(()=>[D(" Activity ")]),_:1}),s(ce),e.showSelections?($(),re(hl,{key:0},{default:b(()=>[($(),ve(me,null,fe(a,r=>s(Q,{class:"q-px-md",key:r.value,dense:"",label:r.label,color:o.value.selection===r.value?"blue":"primary",onClick:d=>C(r.value)},null,8,["label","color","onClick"])),64))]),_:1})):ct("",!0),s(ce),s(H,{class:"bg-blue text-white q-ma-md"},{default:b(()=>[s(ee,{icon:"priority_high"}),D(" Dates in UTC ")]),_:1}),s(Q,{color:"primary",icon:"download",label:"Download",onClick:A}),s(Q,{dense:"",icon:f.value?"more_vert":"more_horiz",onClick:v[0]||(v[0]=r=>f.value=!f.value),class:"q-ml-md"},null,8,["icon"]),gl(s(Cl,null,{default:b(()=>[s(ft,{class:"col"},{default:b(()=>[s(Tl,{class:"q-pa-md",style:{"background-color":"var(--primary-white)"}},{default:b(()=>[s(wl,null,{default:b(()=>[D(" Summary ")]),_:1}),e.showSelections?($(),re(j,{key:0},{default:b(()=>[ba,s(H,{color:"teal-3"},{default:b(()=>{var r;return[D(E(((r=a.find(d=>d.value===o.value.selection))==null?void 0:r.label)||""),1)]}),_:1})]),_:1})):ct("",!0),s(j,null,{default:b(()=>[ga,s(H,{color:"orange-3"},{default:b(()=>{var r;return[D(E(((r=y.find(d=>d.value===o.value.timeframe))==null?void 0:r.label)||""),1)]}),_:1}),D("from "+E(o.value.dateStart)+" to "+E(o.value.dateEnd),1)]),_:1}),s(j,null,{default:b(()=>{var r;return[_a,($(!0),ve(me,null,fe([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.performerUserFullName))],(d,x)=>($(),re(H,{key:x,color:"purple-3"},{default:b(()=>[D(E(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[ya,($(!0),ve(me,null,fe([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.performerUserGroupName))],(d,x)=>($(),re(H,{key:x,color:"teal-3"},{default:b(()=>[D(E(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[Sa,($(!0),ve(me,null,fe([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.relatedUserFullName).filter(Boolean))],(d,x)=>($(),re(H,{key:x,color:"light-green-3"},{default:b(()=>[D(E(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[Ua,($(!0),ve(me,null,fe([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.action))],(d,x)=>($(),re(H,{color:"blue-3",key:x},{default:b(()=>[D(E(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[ha,D(" "+E(((r=o.value.term)==null?void 0:r.length)>0?o.value.term:"None"),1)]}),_:1}),s(j,null,{default:b(()=>{var r;return[Ca,D(" Showing "+E((r=m.value)==null?void 0:r.computedRowsNumber)+" of "+E(_e(t).activity.length)+" Rows where ",1),s(H,{color:"pink-3"},{default:b(()=>[D(E(_e(n).selectedUser.fullName),1)]),_:1}),D("was involved")]}),_:1})]),_:1})]),_:1})]),_:1},512),[[_l,f.value]])]),"header-cell-rowNumber":b(r=>[s(K,{props:r},{default:b(()=>[s(Se,{size:"sm",name:"tag"})]),_:2},1032,["props"])]),"header-cell-date":b(r=>[s(K,{props:r},{default:b(()=>[s(de,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":"primary"}),D(" "+E(r.col.label),1)]),default:b(()=>[G("div",wa,[($(),ve(me,null,fe(y,d=>s(Q,{key:d.value,outline:"",label:d.label,color:o.value.timeframe===d.value?"primary":"",onClick:x=>z(d.value)},null,8,["label","color","onClick"])),64))]),G("div",pa,[s(Je,{outlined:"",debounce:"300",modelValue:o.value.dateStart,"onUpdate:modelValue":v[1]||(v[1]=d=>o.value.dateStart=d),label:"Date Start",type:"date",disable:o.value.timeframe!=="custom"},null,8,["modelValue","disable"]),s(Je,{outlined:"",debounce:"300",modelValue:o.value.dateEnd,"onUpdate:modelValue":v[2]||(v[2]=d=>o.value.dateEnd=d),label:"Date End",type:"date",disable:o.value.timeframe!=="custom"},null,8,["modelValue","disable"])])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-time":b(r=>[s(K,{props:r},{default:b(()=>[s(j,{style:{"font-size":"16px"}},{default:b(()=>[D(E(r.col.label),1)]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserFullName":b(r=>[s(K,{props:r},{default:b(()=>[s(de,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.performerUserId&&o.value.performerUserId.length>0?"primary":""},null,8,["text-color"]),D(" "+E(r.col.label),1)]),default:b(()=>[s(Ee,{style:{width:"256px"}},{default:b(()=>[s(ce),s(Q,{dense:"",label:"Clear",onClick:v[3]||(v[3]=d=>o.value.performerUserId=[])})]),_:1}),s(Pe,{modelValue:o.value.performerUserId,"onUpdate:modelValue":v[4]||(v[4]=d=>o.value.performerUserId=d),options:R.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserGroupName":b(r=>[s(K,{props:r},{default:b(()=>[s(de,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.performerUserGroupId&&o.value.performerUserGroupId.length>0?"primary":""},null,8,["text-color"]),D(" "+E(r.col.label),1)]),default:b(()=>[s(Ee,{style:{width:"256px"}},{default:b(()=>[s(ce),s(Q,{dense:"",label:"Clear",onClick:v[5]||(v[5]=d=>o.value.performerUserGroupId=[])})]),_:1}),s(Pe,{modelValue:o.value.performerUserGroupId,"onUpdate:modelValue":v[6]||(v[6]=d=>o.value.performerUserGroupId=d),options:T.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-relatedUserFullName":b(r=>[s(K,{props:r},{default:b(()=>[s(de,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.relatedUserId&&o.value.relatedUserId.length>0?"primary":""},null,8,["text-color"]),D(" "+E(r.col.label),1)]),default:b(()=>[s(Ee,{style:{width:"256px"}},{default:b(()=>[s(ce),s(Q,{dense:"",label:"Clear",onClick:v[7]||(v[7]=d=>o.value.relatedUserId=[])})]),_:1}),s(Pe,{modelValue:o.value.relatedUserId,"onUpdate:modelValue":v[8]||(v[8]=d=>o.value.relatedUserId=d),options:p.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-action":b(r=>[s(K,{props:r},{default:b(()=>[s(de,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.actions&&o.value.actions.length>0?"primary":""},null,8,["text-color"]),D(" "+E(r.col.label),1)]),default:b(()=>[s(Ee,{style:{width:"192px"}},{default:b(()=>[s(ce),s(Q,{dense:"",label:"Clear",onClick:v[9]||(v[9]=d=>o.value.actions=[])})]),_:1}),s(Pe,{modelValue:o.value.actions,"onUpdate:modelValue":v[10]||(v[10]=d=>o.value.actions=d),options:O.value.map(d=>({label:d,value:d})),type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-description":b(r=>[s(K,{props:r},{default:b(()=>[s(de,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"search",size:"sm","text-color":o.value.term!==""?"primary":""},null,8,["text-color"]),D(" "+E(r.col.label),1)]),default:b(()=>[G("div",ka,[s(Je,{outlined:"",dense:"",debounce:"300",modelValue:o.value.term,"onUpdate:modelValue":v[12]||(v[12]=d=>o.value.term=d),type:"search",placeholder:"Description search\u2026",style:{"align-self":"center"}},{append:b(()=>[s(Se,{name:o.value.term?"close":"search",class:dt({"cursor-pointer":o.value.term}),onClick:v[11]||(v[11]=d=>o.value.term?o.value.term="":null)},null,8,["name","class"])]),_:1},8,["modelValue"])])]),_:2},1024)]),_:2},1032,["props"])]),body:b(r=>[s(Fl,{props:r},{default:b(()=>[s(te,{class:"text-grey"},{default:b(()=>[D(E(r.rowIndex+1),1)]),_:2},1024),s(te,{key:"date",props:r},{default:b(()=>[D(E(r.row.date),1)]),_:2},1032,["props"]),s(te,{key:"time",props:r},{default:b(()=>[D(E(r.row.time),1)]),_:2},1032,["props"]),s(te,{key:"performerUserFullName",props:r},{default:b(()=>[s(ll,null,{default:b(()=>[D(E(r.row.performerUserFullName),1)]),_:2},1024)]),_:2},1032,["props"]),s(te,{key:"performerUserGroupName",props:r},{default:b(()=>[s(H,{"text-color":"white",color:"cyan",label:r.row.performerUserGroupName},null,8,["label"])]),_:2},1032,["props"]),s(te,{key:"relatedUserFullName",props:r},{default:b(()=>[G("span",{class:dt({"text-grey":!r.row.relatedUserFullName})},E(r.row.relatedUserFullName||"No one"),3)]),_:2},1032,["props"]),s(te,{key:"action",props:r},{default:b(()=>{var d;return[s(H,{"text-color":"white",color:((d=_e(t).activityActions.find(x=>x.action===r.row.action))==null?void 0:d.color)||"grey"},{default:b(()=>{var x,Z;return[s(ee,{size:"sm","text-color":"white",icon:((x=_e(t).activityActions.find(L=>L.action===r.row.action))==null?void 0:x.icon)||"question_mark",color:((Z=_e(t).activityActions.find(L=>L.action===r.row.action))==null?void 0:Z.color)||"grey"},null,8,["icon","color"]),D(" "+E(r.row.action),1)]}),_:2},1032,["color"])]}),_:2},1032,["props"]),s(te,{key:"description",props:r},{default:b(()=>[D(E(r.row.description),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1}))}});var za=yl(Ta,[["__scopeId","data-v-614c0d28"]]);export{za as A,Pa as a,Ia as b,La as c,Na as s,Fa as u};
