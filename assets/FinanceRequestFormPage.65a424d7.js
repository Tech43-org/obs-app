import{Q as D}from"./QToolbarTitle.4776f29c.js";import{_ as T,i as z,u as A,a as B,e as M,O as g,$ as O,z as q,U as I,o as b,k as v,w as a,l as e,p as i,Q as U,m as n,a5 as f,t as o,n as F,aU as h,a9 as j,aT as w,bi as H}from"./index.47b229d6.js";import{Q as S}from"./QSpace.cf08d7d1.js";import{Q as x,a as N}from"./QItem.343513fa.js";import{Q as $}from"./QToolbar.e6f71e44.js";import{Q as E}from"./QHeader.3ca3a623.js";import{Q as c,b as m,a as s}from"./use-form.71310db8.js";import{Q as P}from"./QChip.1ab6b5fc.js";import{Q as d}from"./QInput.c34e1e6a.js";import{Q as G}from"./QSelect.52f5a7be.js";import{Q as J}from"./QPage.b48c2029.js";import{Q as K,a as W}from"./QLayout.25196ca5.js";import{Q as X}from"./QFile.07afc42c.js";const Y={class:"row"},Z={class:"row items-center"},ee={class:"text-h6"},ae={class:"ellipsis"},le=z({__name:"FinanceRequestFormPage",setup(te){const V=A(),Q=B(),l=M(),p=g(),r=g();O(()=>{V.readSettings(),Q.readAllUsers(),l.readFinanceRequestData()});const C=q(()=>{switch(l.financeRequest.fieldName){case"Finance_Penalty":return"Penalty";case"Finance_Price":return"Price";case"Finance_Discount":return"Discount";case"Finance_SAP_ProductNumber":return"SAP Number";default:return""}}),_=q(()=>{switch(l.financeRequest.fieldName){case"Finance_Price":return"\u20AC";case"Finance_SAP_ProductNumber":return"#";default:return""}}),R=q(()=>{switch(l.financeRequest.fieldName){case"Finance_Penalty":return"%";case"Finance_Discount":return"%";default:return""}});async function k(y){r.value&&URL.revokeObjectURL(r.value),r.value=URL.createObjectURL(y);const u=await H(r.value);l.financeRequest.file&&p.value&&(l.financeRequest.file.base64=u,l.financeRequest.file.name=p.value.name)}I(()=>{r.value&&URL.revokeObjectURL(r.value)});const L=q(()=>!l.financeRequest.newValue||!l.financeRequest.userRecipient);return(y,u)=>(b(),v(K,{view:"hHh lpR fFf"},{default:a(()=>[e(E,null,{default:a(()=>[e($,{class:"bg-primary"},{default:a(()=>[e(D,null,{default:a(()=>[i(" Request Finance ")]),_:1}),e(x,null,{default:a(()=>[e(U,{color:"primary",type:"cancel",label:"Cancel",onClick:u[0]||(u[0]=t=>n(l).cancelFinanceRequest())}),e(S),e(U,{color:"primary",type:"submit",label:"Submit Request",onClick:u[1]||(u[1]=t=>n(l).sendFinanceRequest()),disable:L.value},null,8,["disable"])]),_:1})]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(J,null,{default:a(()=>[e(c,null,{default:a(()=>[f("div",Y,[e(m,{header:""},{default:a(()=>[i(o(n(l).financeRequest.itemCode),1)]),_:1}),e(S),f("span",null,[e(P,{color:"blue-5","text-color":"white"},{default:a(()=>[i(o(n(l).financeRequest.customerRecipient),1)]),_:1})])]),e(x,null,{default:a(()=>[e(m,null,{default:a(()=>[i(o(n(l).financeRequest.itemDescription),1)]),_:1})]),_:1})]),_:1}),f("div",Z,[e(c,{class:"col"},{default:a(()=>[e(s,null,{default:a(()=>[e(m,null,{default:a(()=>[i("Requester")]),_:1}),e(d,{modelValue:n(V).loggedUser.fullName,"onUpdate:modelValue":u[2]||(u[2]=t=>n(V).loggedUser.fullName=t),readonly:"",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{class:"col"},{default:a(()=>[e(s,null,{default:a(()=>[e(m,null,{default:a(()=>[i("Request to")]),_:1}),e(G,{modelValue:n(l).financeRequest.userRecipient,"onUpdate:modelValue":u[3]||(u[3]=t=>n(l).financeRequest.userRecipient=t),options:n(Q).userDeptHeads,"option-value":"fullName","option-label":"fullName",dense:""},{option:a(t=>[e(x,null,{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(F,{size:"sm","text-color":"white",style:h({backgroundColor:t.opt.color})},{default:a(()=>[i(o(t.opt.initials),1)]),_:2},1032,["style"])]),_:2},1024),e(N,null,{default:a(()=>[f("span",ee,o(t.opt.fullName),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),e(c,{class:"row items-center"},{default:a(()=>[e(s,{class:"col-8"},{default:a(()=>[e(d,{modelValue:n(l).financeRequest.requestMessage,"onUpdate:modelValue":u[4]||(u[4]=t=>n(l).financeRequest.requestMessage=t),label:"Request Message",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),e(s,{class:"col-4"},{default:a(()=>[e(n(X),{modelValue:p.value,"onUpdate:modelValue":[u[5]||(u[5]=t=>p.value=t),k],label:"Select Attachment",outlined:"",clearable:"",dense:""},{file:a(({file:t})=>[e(P,{size:"sm",color:"primary text-white"},{default:a(()=>[e(F,null,{default:a(()=>[e(j,{name:"sym_o_description"})]),_:1}),f("div",ae,o(t.name),1)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(s,{horizontal:"",class:"items-center"},{default:a(()=>[e(s,{class:"col-4 q-py-md"},{default:a(()=>[e(m,{header:""},{default:a(()=>[i(o(C.value),1)]),_:1})]),_:1}),n(l).financeRequest.fieldType==="Number"?(b(),v(s,{key:0,horizontal:""},{default:a(()=>[e(s,{class:"col-6 q-py-md"},{default:a(()=>[e(d,{modelValue:n(l).financeRequest.originalValue,"onUpdate:modelValue":u[6]||(u[6]=t=>n(l).financeRequest.originalValue=t),modelModifiers:{number:!0},label:"Original Value",type:"number",outlined:"",dense:"","input-class":"text-right",prefix:_.value,suffix:R.value,disable:""},null,8,["modelValue","prefix","suffix"])]),_:1}),e(s,{class:"col-6 q-py-md"},{default:a(()=>[e(d,{modelValue:n(l).financeRequest.newValue,"onUpdate:modelValue":u[7]||(u[7]=t=>n(l).financeRequest.newValue=t),modelModifiers:{number:!0},label:"New Value",type:"number",outlined:"",dense:"",prefix:_.value,suffix:R.value,"input-class":"text-right"},null,8,["modelValue","prefix","suffix"])]),_:1})]),_:1})):w("",!0),n(l).financeRequest.fieldType==="Text"?(b(),v(s,{key:1,horizontal:""},{default:a(()=>[e(s,{class:"col-6 q-py-md"},{default:a(()=>[e(d,{modelValue:n(l).financeRequest.originalValue,"onUpdate:modelValue":u[8]||(u[8]=t=>n(l).financeRequest.originalValue=t),label:"Original Value",outlined:"",dense:"",prefix:_.value,suffix:R.value,disable:""},null,8,["modelValue","prefix","suffix"])]),_:1}),e(s,{class:"col-6 q-py-md"},{default:a(()=>[e(d,{modelValue:n(l).financeRequest.newValue,"onUpdate:modelValue":u[9]||(u[9]=t=>n(l).financeRequest.newValue=t),label:"New Value",outlined:"",dense:"",prefix:_.value,suffix:R.value},null,8,["modelValue","prefix","suffix"])]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var qe=T(le,[["__scopeId","data-v-401ea2b8"]]);export{qe as default};
