import{bc as Qe,s as Y,ab as be,O as re,z as g,F as K,H as he,A as b,C as Ce,a0 as xe,a8 as Se,B as _e,a9 as X,ae as Ae,az as Ue,Q as A,V as ke,G as Fe,ao as $e,b5 as Ne,i as Z,u as ee,o as S,X as j,m as P,k as T,w as t,aT as U,l as a,bd as Ve,a2 as z,_ as ve,be as Q,p as v,t as x,a1 as J,bf as O,aW as Le,a3 as qe,a4 as Ie,a5 as ge,aR as se,a_ as ue,a as we,n as Oe,aU as je,bg as fe,q as ze,aV as Re,$ as He}from"./index.47b229d6.js";import{Q as Me}from"./QToolbarTitle.4776f29c.js";import{Q as Ee}from"./QToolbar.e6f71e44.js";import{Q as Ge}from"./QHeader.3ca3a623.js";import{Q as We}from"./QPage.b48c2029.js";import{Q as Ke,a as Xe}from"./QLayout.25196ca5.js";import{u as Te,b as De,Q as I,a as d}from"./QItem.343513fa.js";import{Q as ie}from"./QBadge.2a03477d.js";import{Q as Je}from"./QSpace.cf08d7d1.js";import{u as Ye,a as Ze,b as et,Q as tt}from"./QChip.1ab6b5fc.js";import{Q as at}from"./QCardActions.fcd35bda.js";import{u as ye,b as de,c as nt,e as lt,Q as L,a as W}from"./use-form.71310db8.js";import{Q as ot}from"./QSlideTransition.4604540d.js";import{Q as ce}from"./QSeparator.e99be468.js";import{Q as rt}from"./QList.bb4d5fb2.js";import{Q as st}from"./QBtnGroup.8051563c.js";import{u as ut,a as it,b as dt,c as ct}from"./use-panel.595eae45.js";import{u as vt,a as gt,b as mt}from"./use-fullscreen.997f9e1a.js";import"./touch.3df10340.js";import"./use-cache.b0833c75.js";const V=Qe({}),pt=Object.keys(be);var _t=Y({name:"QExpansionItem",props:{...be,...Ye,...Te,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ze,"click","afterShow","afterHide"],setup(e,{slots:i,emit:s}){const{proxy:{$q:m}}=Ce(),u=De(e,m),h=re(e.modelValue!==null?e.modelValue:e.defaultOpened),f=re(null),k=ye(),{show:p,hide:n,toggle:_}=et({showing:h});let l,y;const o=g(()=>`q-expansion-item q-item-type q-expansion-item--${h.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),C=g(()=>{if(e.contentInsetLevel===void 0)return null;const c=m.lang.rtl===!0?"Right":"Left";return{["padding"+c]:e.contentInsetLevel*56+"px"}}),r=g(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),w=g(()=>{const c={};return pt.forEach(F=>{c[F]=e[F]}),c}),q=g(()=>r.value===!0||e.expandIconToggle!==!0),$=g(()=>e.expandedIcon!==void 0&&h.value===!0?e.expandedIcon:e.expandIcon||m.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),te=g(()=>e.disable!==!0&&(r.value===!0||e.expandIconToggle===!0)),me=g(()=>({expanded:h.value===!0,detailsId:e.targetUid,toggle:_,show:p,hide:n})),R=g(()=>{const c=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:m.lang.label[h.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":h.value===!0?"true":"false","aria-controls":k,"aria-label":c}});K(()=>e.group,c=>{y!==void 0&&y(),c!==void 0&&N()});function H(c){r.value!==!0&&_(c),s("click",c)}function M(c){c.keyCode===13&&E(c,!0)}function E(c,F){F!==!0&&f.value!==null&&f.value.focus(),_(c),Ae(c)}function pe(){s("afterShow")}function D(){s("afterHide")}function N(){l===void 0&&(l=ye()),h.value===!0&&(V[e.group]=l);const c=K(h,oe=>{oe===!0?V[e.group]=l:V[e.group]===l&&delete V[e.group]}),F=K(()=>V[e.group],(oe,Be)=>{Be===l&&oe!==void 0&&oe!==l&&n()});y=()=>{c(),F(),V[e.group]===l&&delete V[e.group],y=void 0}}function G(){const c={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},F=[b(X,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&h.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:$.value})];return te.value===!0&&(Object.assign(c,{tabindex:0,...R.value,onClick:E,onKeyup:M}),F.unshift(b("div",{ref:f,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),b(d,c,()=>F)}function B(){let c;return i.header!==void 0?c=[].concat(i.header(me.value)):(c=[b(d,()=>[b(de,{lines:e.labelLines},()=>e.label||""),e.caption?b(de,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&c[e.switchToggleSide===!0?"push":"unshift"](b(d,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>b(X,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&c[e.switchToggleSide===!0?"unshift":"push"](G()),c}function ae(){const c={ref:"item",style:e.headerStyle,class:e.headerClass,dark:u.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return q.value===!0&&(c.clickable=!0,c.onClick=H,Object.assign(c,r.value===!0?w.value:R.value)),b(I,c,B)}function ne(){return xe(b("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:k},_e(i.default)),[[Se,h.value]])}function le(){const c=[ae(),b(ot,{duration:e.duration,onShow:pe,onHide:D},ne)];return e.expandSeparator===!0&&c.push(b(ce,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:u.value}),b(ce,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:u.value})),c}return e.group!==void 0&&N(),he(()=>{y!==void 0&&y()}),()=>b("div",{class:o.value},[b("div",{class:"q-expansion-item__container relative-position"},le())])}}),ft=Y({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:i}){const s=g(()=>`q-carousel__control absolute absolute-${e.position}`),m=g(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>b("div",{class:s.value,style:m.value},_e(i.default))}}),yt=Y({name:"QBtnToggle",props:{...nt,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(i=>("label"in i||"icon"in i||"slot"in i)&&"value"in i)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:i,emit:s}){const m=g(()=>e.options.find(y=>y.value===e.modelValue)!==void 0),u=g(()=>({type:"hidden",name:e.name,value:e.modelValue})),h=lt(u),f=g(()=>Ue(e)),k=g(()=>({rounded:e.rounded,dense:e.dense,...f.value})),p=g(()=>e.options.map((y,o)=>{const{attrs:C,value:r,slot:w,...q}=y;return{slot:w,props:{key:o,"aria-pressed":r===e.modelValue?"true":"false",...C,...q,...k.value,disable:e.disable===!0||q.disable===!0,color:r===e.modelValue?_(q,"toggleColor"):_(q,"color"),textColor:r===e.modelValue?_(q,"toggleTextColor"):_(q,"textColor"),noCaps:_(q,"noCaps")===!0,noWrap:_(q,"noWrap")===!0,size:_(q,"size"),padding:_(q,"padding"),ripple:_(q,"ripple"),stack:_(q,"stack")===!0,stretch:_(q,"stretch")===!0,onClick($){n(r,y,$)}}}}));function n(y,o,C){e.readonly!==!0&&(e.modelValue===y?e.clearable===!0&&(s("update:modelValue",null,null),s("clear")):s("update:modelValue",y,o),s("click",C))}function _(y,o){return y[o]===void 0?e[o]:y[o]}function l(){const y=p.value.map(o=>b(A,o.props,o.slot!==void 0?i[o.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&m.value===!0&&h(y,"push"),ke(i.default,y)}return()=>b(st,{class:"q-btn-toggle",...f.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},l)}}),bt=Y({name:"QCarouselSlide",props:{...ut,imgSrc:String},setup(e,{slots:i}){const s=g(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>b("div",{class:"q-carousel__slide",style:s.value},_e(i.default))}});const ht=["top","right","bottom","left"],Ct=["regular","flat","outline","push","unelevated"];var xt=Y({name:"QCarousel",props:{...Te,...it,...vt,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ct.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>ht.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...gt,...dt],setup(e,{slots:i}){const{proxy:{$q:s}}=Ce(),m=De(e,s);let u=null,h;const{updatePanelsList:f,getPanelContent:k,panelDirectives:p,goToPanel:n,previousPanel:_,nextPanel:l,getEnabledPanels:y,panelIndex:o}=ct(),{inFullscreen:C}=mt(),r=g(()=>C.value!==!0&&e.height!==void 0?{height:e.height}:{}),w=g(()=>e.vertical===!0?"vertical":"horizontal"),q=g(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(C.value===!0?" fullscreen":"")+(m.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${w.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${R.value}`:"")),$=g(()=>{const D=[e.prevIcon||s.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||s.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&s.lang.rtl===!0?D.reverse():D}),te=g(()=>e.navigationIcon||s.iconSet.carousel.navigationIcon),me=g(()=>e.navigationActiveIcon||te.value),R=g(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),H=g(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));K(()=>e.modelValue,()=>{e.autoplay&&M()}),K(()=>e.autoplay,D=>{D?M():u!==null&&(clearTimeout(u),u=null)});function M(){const D=Ne(e.autoplay)===!0?Math.abs(e.autoplay):5e3;u!==null&&clearTimeout(u),u=setTimeout(()=>{u=null,D>=0?l():_()},D)}Fe(()=>{e.autoplay&&M()}),he(()=>{u!==null&&clearTimeout(u)});function E(D,N){return b("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${D} q-carousel__navigation--${R.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[b("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},y().map(N))])}function pe(){const D=[];if(e.navigation===!0){const N=i["navigation-icon"]!==void 0?i["navigation-icon"]:B=>b(A,{key:"nav"+B.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${B.active===!0?"":"in"}active`,...B.btnProps,onClick:B.onClick}),G=h-1;D.push(E("buttons",(B,ae)=>{const ne=B.props.name,le=o.value===ae;return N({index:ae,maxIndex:G,name:ne,active:le,btnProps:{icon:le===!0?me.value:te.value,size:"sm",...H.value},onClick:()=>{n(ne)}})}))}else if(e.thumbnails===!0){const N=e.controlColor!==void 0?` text-${e.controlColor}`:"";D.push(E("thumbnails",G=>{const B=G.props;return b("img",{key:"tmb#"+B.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${B.name===e.modelValue?"":"in"}active`+N,src:B.imgSrc||B["img-src"],onClick:()=>{n(B.name)}})}))}return e.arrows===!0&&o.value>=0&&((e.infinite===!0||o.value>0)&&D.push(b("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${w.value} absolute flex flex-center`},[b(A,{icon:$.value[0],...H.value,onClick:_})])),(e.infinite===!0||o.value<h-1)&&D.push(b("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${w.value} absolute flex flex-center`},[b(A,{icon:$.value[1],...H.value,onClick:l})]))),ke(i.control,D)}return()=>(h=f(i),b("div",{class:q.value,style:r.value},[$e("div",{class:"q-carousel__slides-container"},k(),"sl-cont",e.swipeable,()=>p.value)].concat(pe())))}});const St=e=>(qe("data-v-cacf8ed6"),e=e(),Ie(),e),kt=St(()=>ge("br",null,null,-1)),qt=Z({__name:"CreditLinesCarousel",props:{propData:{type:Object,default:null}},setup(e){var y;const i=ee(),s=e,m=g(()=>s.propData),u=g(()=>s.propData.metadata&&"orderLines"in s.propData.metadata?s.propData.metadata.orderLines:[]),h=g(()=>s.propData.metadata&&"orderLines"in s.propData.metadata?s.propData.metadata.orderLines.length:0),f=g(()=>s.propData.metadata&&"orderLines"in s.propData.metadata?s.propData.metadata.orderLines.filter(o=>o.decision==="approved").length:0),k=g(()=>s.propData.metadata&&"orderLines"in s.propData.metadata?s.propData.metadata.orderLines.filter(o=>o.decision==="declined").length:0),p=re(null);let n=re(u.value&&((y=u.value[0])==null?void 0:y.dataLineId)||0);const _=o=>g(()=>o.metadata&&"orderLines"in o.metadata?o.metadata.orderLines.every(C=>C.decision&&C.decision.trim()!==""):!1),l=o=>{f.value>0&&k.value===0?o.status=Q.Approved:f.value===0&&k.value>0?o.status=Q.Declined:f.value>0&&k.value>0&&(o.status=Q.PartiallyApproved),o.read=!0;const C={Data:o,LoggedUser:i.loggedUser};se("NTF | Decision Credit",C),ue({message:"Credit Note Created",type:"positive",position:"top-right"})};return(o,C)=>(S(),j(z,null,[m.value.type==="task"&&m.value.status===P(Q).Pending?(S(),T(de,{key:0,header:""},{default:t(()=>[v(" Total lines: "+x(h.value)+" \xBB Approved: "+x(f.value)+" | Declined: "+x(k.value),1)]),_:1})):U("",!0),a(P(xt),{ref_key:"carouselRef",ref:p,modelValue:P(n),"onUpdate:modelValue":C[3]||(C[3]=r=>Ve(n)?n.value=r:n=r),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{control:t(()=>[u.value.length>1?(S(),T(ft,{key:0,position:"top-right",offset:[6,6],class:"q-gutter-xs"},{default:t(()=>[a(A,{dense:"",color:"grey-3","text-color":"primary",icon:"sym_o_arrow_left",onClick:C[0]||(C[0]=r=>{var w;return(w=p.value)==null?void 0:w.previous()})}),a(A,{dense:"",color:"grey-3","text-color":"primary",icon:"sym_o_arrow_right",onClick:C[1]||(C[1]=r=>{var w;return(w=p.value)==null?void 0:w.next()})})]),_:1})):U("",!0)]),default:t(()=>[(S(!0),j(z,null,J(u.value,r=>(S(),T(bt,{key:r.dataLineId,name:r.dataLineId},{default:t(()=>[a(I,null,{default:t(()=>[a(d,{side:""},{default:t(()=>[a(ie,{rounded:"","text-color":"white",color:"cyan",label:r.service},null,8,["label"]),v(" "+x(r.description),1)]),_:2},1024)]),_:2},1024),xe(a(I,null,{default:t(()=>[a(d,{side:""},{default:t(()=>[a(ie,{"text-color":"white",label:r.venue},null,8,["label"])]),_:2},1024)]),_:2},1536),[[Se,r.venue]]),a(ce,{class:"q-my-md"}),a(I,{class:"items-start"},{default:t(()=>[a(d,{horizontal:""},{default:t(()=>[a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Unit Price ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(P(O)(r.unitPrice)),1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Quantity ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(r.quantity),1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Total ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(P(O)(r.total)),1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Quantity to Credit")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(r.creditQty),1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Before fees ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(P(O)(r.creditQty*r.unitPrice)),1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Fee Pct ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(r.cancellationFeePct)+"% ",1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Fee Amount")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(P(O)(r.cancellationFeeAmount)),1)]),_:2},1024)]),_:2},1024),a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Total to Credit ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(P(O)(r.creditTotal)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(ce,{class:"q-my-md"}),m.value.type==="task"&&m.value.status===P(Q).Pending?(S(),T(I,{key:0},{default:t(()=>[a(d,null,{default:t(()=>[a(yt,{class:"full-width",style:{"border-style":"solid","border-width":"1px","border-color":"grey"},spread:"",dense:"",modelValue:r.decision,"onUpdate:modelValue":[w=>r.decision=w,C[2]||(C[2]=w=>{var q;return(q=p.value)==null?void 0:q.next()})],"toggle-color":r.decision==="approved"?"green":r.decision==="declined"?"red":"grey",options:[{label:"Decline",value:"declined",icon:"sym_o_close"},{label:"Approve",value:"approved",icon:"sym_o_check"}]},null,8,["modelValue","onUpdate:modelValue","toggle-color"])]),_:2},1024)]),_:2},1024)):(S(),T(I,{key:1,class:"justify-center"},{default:t(()=>[a(de,{header:"",class:Le(r.decision==="approved"?"green-6":r.decision==="declined"?"red-6":"grey-6")},{default:t(()=>{var w;return[v(x((w=m.value.status)==null?void 0:w.toUpperCase()),1)]}),_:2},1032,["class"])]),_:2},1024))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),kt,m.value.type==="task"&&m.value.status===P(Q).Pending?(S(),T(I,{key:1,class:"full-width items-end justify-end",disable:!_(m.value).value},{default:t(()=>[a(A,{dense:"",class:"q-pr-md",icon:h.value===f.value?"sym_o_check":h.value===k.value?"sym_o_close":"sym_o_check_circle",color:"primary",label:"Submit Decision",onClick:C[4]||(C[4]=r=>l(m.value))},null,8,["icon"])]),_:1},8,["disable"])):U("",!0)],64))}});var It=ve(qt,[["__scopeId","data-v-cacf8ed6"]]);const Pe=e=>(qe("data-v-1f509306"),e=e(),Ie(),e),wt=Pe(()=>ge("br",null,null,-1)),Tt=Pe(()=>ge("br",null,null,-1)),Dt=Z({__name:"CoreFinanceCard",props:{propData:{type:Object,default:null}},setup(e){const i=ee(),s=e,m=g(()=>s.propData),u=g(()=>{var p,n;return(n=(p=m.value)==null?void 0:p.metadata)==null?void 0:n.requestFinanceCore}),h=(p,n,_,l,y)=>{p.status=n,p.read=!0;let o="";if(p.content){const $=p.content.indexOf("asked to update ")+16;o=p.content.substring($)}const r=`${(o.charAt(0).toUpperCase()+o.slice(1)).replace(/<\/?strong>/g,"")} has been ${n} by ${i.loggedUser.fullName}`,q={Parameter:`${n===Q.Declined?"Decline":"Approve"} Update Core Finance`,Data:{...p,activity:{action:_,description:r}},LoggedUser:i.loggedUser};se("NTF | Notifications Actions",q),ue({message:l,type:y,position:"top-right"})},f=p=>{h(p,Q.Declined,"Request Update Finance Declined","Core Finance Update Declined","negative")},k=p=>{h(p,Q.Approved,"Update Finance","Core Finance Update Approved","positive")};return(p,n)=>(S(),j(z,null,[u.value.price||u.value.priceType?(S(),T(L,{key:0},{default:t(()=>[a(L,{class:"bg-blue-3 q-py-sm"},{default:t(()=>[u.value.price?(S(),T(W,{key:0,horizontal:""},{default:t(()=>[a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Price ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(P(O)(u.value.price.oldValue||0))+" \xBB "+x(P(O)(u.value.price.newValue||0)),1)]),_:1})]),_:1})]),_:1})):U("",!0),u.value.priceType?(S(),T(W,{key:1,horizontal:""},{default:t(()=>[a(I,null,{default:t(()=>[a(d,null,{default:t(()=>[v(" Type ")]),_:1}),a(d,{side:""},{default:t(()=>[v(x(u.value.priceType.oldValue)+" \xBB "+x(u.value.priceType.newValue),1)]),_:1})]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1})):U("",!0),u.value.itemLocations?(S(),T(L,{key:1},{default:t(()=>[a(L,{class:"bg-blue-3"},{default:t(()=>[a(W,null,{default:t(()=>[v(" Item Locations ")]),_:1}),(S(!0),j(z,null,J(Object.entries(u.value.itemLocations),([_,l])=>(S(),T(I,{key:_},{default:t(()=>[a(d,null,{default:t(()=>[a(ie,{rounded:"",label:l.abbr},null,8,["label"])]),_:2},1024),a(d,null,{default:t(()=>[v(x(l.oldPrice),1)]),_:2},1024),a(d,null,{default:t(()=>[v(x(l.newPrice),1)]),_:2},1024),a(d,null,{default:t(()=>[v(x(l.sapProductNumber),1)]),_:2},1024)]),_:2},1024))),128)),wt]),_:1})]),_:1})):U("",!0),u.value.itemUnicable?(S(),T(L,{key:2},{default:t(()=>[a(L,{class:"bg-blue-3"},{default:t(()=>[a(W,null,{default:t(()=>[v(" Item Unicable ")]),_:1}),(S(!0),j(z,null,J(Object.entries(u.value.itemUnicable),([_,l])=>(S(),T(I,{key:_},{default:t(()=>[a(d,null,{default:t(()=>[v(x(l.type),1)]),_:2},1024),a(d,null,{default:t(()=>[v(x(l.oldPrice),1)]),_:2},1024),a(d,null,{default:t(()=>[v(x(l.newPrice),1)]),_:2},1024)]),_:2},1024))),128)),Tt]),_:1})]),_:1})):U("",!0),m.value.type==="task"&&m.value.status===P(Q).Pending?(S(),T(I,{key:3,class:"q-gutter-x-md full-width items-end justify-end"},{default:t(()=>[a(A,{dense:"",icon:"sym_o_close",color:"red-6",label:"Declined",class:"q-pr-md",onClick:n[0]||(n[0]=_=>f(m.value))}),a(A,{dense:"",icon:"sym_o_check",color:"green-6",label:"Approve",class:"q-pr-md",onClick:n[1]||(n[1]=_=>k(m.value))})]),_:1})):U("",!0)],64))}});var Pt=ve(Dt,[["__scopeId","data-v-1f509306"]]);const Bt=Z({__name:"FinanceCard",props:{propData:{type:Object,default:null}},setup(e){const i=ee(),s=e,m=g(()=>s.propData),u=f=>{f.status=Q.Declined,f.read=!0;const p={Parameter:f.title==="Request to Update Finance"?"Decline Update Finance":"Decline Credit Services",Data:f,LoggedUser:i.loggedUser};se("NTF | Notifications Actions",p),ue({message:"Task Declined",type:"negative",position:"top-right"})},h=f=>{f.status=Q.Done,f.read=!0;const p={Parameter:f.title==="Request to Update Finance"?"Approve Update Finance":"Approve Credit Services",Data:f,LoggedUser:i.loggedUser};se("NTF | Notifications Actions",p),ue({message:"Task Approved",type:"positive",position:"top-right"})};return(f,k)=>m.value.type==="task"&&m.value.status===P(Q).Pending?(S(),T(I,{key:0,class:"q-gutter-x-md full-width items-end justify-end"},{default:t(()=>[a(A,{dense:"",icon:"sym_o_close",color:"red-6",label:"Decline",onClick:k[0]||(k[0]=p=>u(m.value))}),a(A,{dense:"",icon:"sym_o_check",color:"green-6",label:"Approve",onClick:k[1]||(k[1]=p=>h(m.value))})]),_:1})):U("",!0)}});var Qt=ve(Bt,[["__scopeId","data-v-77660b53"]]);const At=["innerHTML"],Ut=Z({__name:"NotificationsList",setup(e){const i=we(),s=ee(),m=g(()=>i.notificationComponents.map(({name:n,props:_})=>({component:h[n],props:_}))),u=n=>{n.title==="Request Credit Note"?i.notificationComponents=[{name:"CreditLinesCarousel",props:{propData:n}}]:n.title==="Request to Update Finance"&&n.type==="task"?i.notificationComponents=[{name:"FinanceCard",props:{propData:n}}]:n.title==="Request to Update Core Finance"?i.notificationComponents=[{name:"CoreFinanceCard",props:{propData:n}}]:i.notificationComponents=[]},h={CreditLinesCarousel:It,CoreFinanceCard:Pt,FinanceCard:Qt},f=n=>{switch(n){case"approved":return"sym_o_check";case"done":return"sym_o_check";case"declined":return"sym_o_close";case"partiallyApproved":return"sym_o_close";default:return"sym_o_pending"}},k=n=>{switch(n){case"approved":return"green";case"done":return"green";case"declined":return"grey";case"partiallyApproved":return"orange-6";default:return"blue-6"}},p=n=>i.users.find(l=>l.userId===(n.content&&l.fullName&&n.content.startsWith(l.fullName)?n.senderId:n.recipientId))||{color:"grey",initials:"NA"};return(n,_)=>(S(),T(rt,{bordered:"",class:"rounded-borders q-ma-md"},{default:t(()=>[(S(!0),j(z,null,J(P(s).loggedUser.notifications,(l,y)=>(S(),T(_t,{key:y,"expand-separator":"","hide-expand-icon":"",group:"notifications",onBeforeShow:o=>u(l)},{header:t(()=>[a(d,{avatar:""},{default:t(()=>[a(Oe,{size:"sm","text-color":"white",style:je({backgroundColor:p(l).color})},{default:t(()=>[v(x(p(l).initials),1)]),_:2},1032,["style"])]),_:2},1024),a(d,null,{default:t(()=>[v(x(l.title),1)]),_:2},1024),a(d,{side:""},{default:t(()=>[v(x(new Date(l.timestampUnix*1e3).toLocaleDateString("en-GB"))+" ",1),a(ie,{align:"bottom",rounded:"",color:k(l.status)},{default:t(()=>[a(X,{name:f(l.status)},null,8,["name"]),v(" "+x(P(fe)(l.type)),1)]),_:2},1032,["color"])]),_:2},1024)]),default:t(()=>[a(L,null,{default:t(()=>[a(at,null,{default:t(()=>[a(Je),a(tt,{dense:"",class:"text-white q-pa-sm",color:k(l.status),label:P(fe)(l.status)},{default:t(()=>[a(X,{name:f(l.status)},null,8,["name"])]),_:2},1032,["color","label"])]),_:2},1024),a(W,null,{default:t(()=>[ge("div",{innerHTML:l.content},null,8,At),(S(!0),j(z,null,J(m.value,(o,C)=>(S(),T(ze(o.component),Re(o.props,{key:C}),null,16))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onBeforeShow"]))),128))]),_:1}))}});const Ft=Z({__name:"NotificationsPage",setup(e){const i=we(),s=ee();return He(()=>{s.readSettings(),i.readAllUsers()}),(m,u)=>(S(),T(Ke,{view:"hHh lpR fFf"},{default:t(()=>[a(Ge,null,{default:t(()=>[a(Ee,{class:"text-white bg-primary"},{default:t(()=>[a(X,{name:"sym_o_notifications",size:"md"}),a(Me,null,{default:t(()=>[v(" Notifications ")]),_:1})]),_:1})]),_:1}),a(Xe,{style:{"background-color":"var(--primary-white)"}},{default:t(()=>[a(We,null,{default:t(()=>[a(Ut)]),_:1})]),_:1})]),_:1}))}});var aa=ve(Ft,[["__scopeId","data-v-6a60d745"]]);export{aa as default};
