import{j as tl,n as ll,Q as ot,b as j,a as al,c as Je}from"./QInput.b85f7136.js";import{Q as ce}from"./QSpace.0f37ca39.js";import{z as u,aU as Ut,N as F,a as ht,s as X,A as i,B as oe,V as rl,a4 as Se,C as le,aH as pt,aI as Ct,aP as nt,U as Ye,ac as st,F as J,a6 as wt,G as kt,ae as ol,ad as nl,H as Tt,J as sl,K as it,ay as il,ax as ut,aV as We,aW as ct,aX as ul,P as qt,aY as cl,aa as _e,Q as $,i as dl,e as vl,aZ as dt,a_ as fl,a$ as Ee,b0 as vt,o as Q,k as re,w as b,l as s,p as E,g as de,$ as ve,a0 as fe,aQ as ft,n as ee,Z as ml,a3 as bl,t as P,m as ge,W as G,aT as mt,_ as _l,b1 as bt,b2 as Pe,a1 as gl,a2 as yl,b3 as Sl}from"./index.8cd1fc12.js";import{Q as Ul}from"./QBtnGroup.64a1b5cc.js";import{m as hl,n as pl,o as At,Q as Cl,a as H}from"./QSelect.2918293f.js";import{Q as wl}from"./QToolbarTitle.76a55207.js";import{Q as kl}from"./QToolbar.ce4cdfe6.js";import{a as Tl,Q as me}from"./QSeparator.63ad9983.js";import{Q as Ne}from"./QCardActions.50f426e1.js";import{u as Ue,b as he,a as ql}from"./QItem.f10a42e6.js";import{o as Al,u as xl,a as Fe,Q as Ol}from"./QCheckbox.8a01b8e6.js";import{Q as Rl}from"./QList.76e513dd.js";const xt=[{label:"Activity ID",value:"activityId",table:"z_ACT_Activity",field:"_kplt_Activity",type:"text",sql:"act"},{label:"Created At",value:"createdAt",table:"z_ACT_Activity",field:"CreatedAtUnix",type:"number",sql:"act"},{label:"Performer User ID",value:"performerUserId",table:"z_ACT_Activity",field:"_kflt_User_Performer",type:"text",sql:"act"},{label:"Performer User Name",value:"performerUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use1"},{label:"Performer User Surname",value:"performerUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use1"},{label:"Related User ID",value:"relatedUserId",table:"z_ACT_Activity",field:"_kflt_User_Related",type:"text",sql:"act"},{label:"Related User Name",value:"relatedUserName",table:"z_CD_USE_Users",field:"Name",type:"text",sql:"use2"},{label:"Related User Surname",value:"relatedUserSurname",table:"z_CD_USE_Users",field:"Surname",type:"text",sql:"use2"},{label:"Performer User Group ID",value:"performerUserGroupId",table:"z_ACT_Activity",field:"PerformerUserGroupId",type:"text",sql:"act"},{label:"Action",value:"action",table:"z_ACT_Activity",field:"Action",type:"text",sql:"act"},{label:"Description",value:"description",table:"z_ACT_Activity",field:"Description",type:"text",sql:"act"},{label:"Note",value:"note",table:"z_ACT_Activity",field:"Note",type:"text",sql:"act"}],N=u(()=>Ut(xt));u(()=>F("SELECT "+N.value.map(t=>t)+" FROM z_ACT_Activity AS act").value);const El=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin', 'Login User', 'Logout User', 'Re-Login ServiceScript', 'Login Dev', 'Logout Dev')`,e.value}),Va=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Login Admin', 'Logout Admin')`,e.value}),za=u(()=>{const t=[0,1,9,10].map(c=>xt[c]),n=Ut(t),m=F("SELECT "+n.join(", ")+" FROM  z_ACT_Activity AS act");return m.value+=` WHERE act."Action" IN ('Submit Submission', 'Update Order Status') AND act."_kflt_User_Performer" IS NULL`,m.value}),Ba=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" NOT IN ('Login Admin', 'Logout Admin', 'Submit Submission', 'Update Order Status') AND act."_kflt_User_Performer" IS NULL`,e.value}),Pl=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Create User')`,e.value}),Nl=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" IN ('Update User Group')`,e.value}),Il=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM  z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=` WHERE act."Action" = 'Update User Status' AND act."Description" LIKE '%to Inactive%'`,e.value}),Ma=u(()=>{const e=ht(),t=F("SELECT "+N.value.map(n=>n)+" FROM z_ACT_Activity AS act");return N.value.some(n=>n.indexOf("use1.")!==-1)&&(t.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(n=>n.indexOf("use2.")!==-1)&&(t.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),t.value+=` WHERE act."_kflt_User_Performer" ='${e.selectedUser.userId}' OR act."_kflt_User_Related" ='${e.selectedUser.userId}'`,t.value}),Qa=u(()=>{const e=F("SELECT "+N.value.map(t=>t)+" FROM z_ACT_Activity AS act");return N.value.some(t=>t.indexOf("use1.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use1 ON use1."_kplt_User" = act."_kflt_User_Performer" '),N.value.some(t=>t.indexOf("use2.")!==-1)&&(e.value+=' LEFT OUTER JOIN z_CD_USE_Users AS use2 ON use2."_kplt_User" = act."_kflt_User_Related" '),e.value+=' WHERE act."_kflt_User_Performer" IS NOT NULL',e.value});var K=X({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const m=le(),{proxy:{$q:c}}=m,U=f=>{n("click",f)};return()=>{if(e.props===void 0)return i("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:U},oe(t.default));let f,_;const S=m.vnode.key;if(S){if(f=e.props.colsMap[S],f===void 0)return}else f=e.props.col;if(f.sortable===!0){const a=f.align==="right"?"unshift":"push";_=rl(t.default,[]),_[a](i(Se,{class:f.__iconClass,name:c.iconSet.table.arrowUp}))}else _=oe(t.default);const y={class:f.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:f.headerStyle,onClick:a=>{f.sortable===!0&&e.props.sort(f),U(a)}};return i("th",y,_)}}});const Dl=i("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[i("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),i("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Fl=X({name:"QRadio",props:{...Ue,...pt,...tl,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:m}=le(),c=he(e,m.$q),U=Ct(e,Al),f=F(null),{refocusTargetEl:_,refocusTarget:S}=xl(e,f),y=u(()=>nt(e.modelValue)===nt(e.val)),a=u(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(c.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),p=u(()=>{const A=e.color!==void 0&&(e.keepColor===!0||y.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${y.value===!0?"truthy":"falsy"}${A}`}),o=u(()=>(y.value===!0?e.checkedIcon:e.uncheckedIcon)||null),O=u(()=>e.disable===!0?-1:e.tabindex||0),R=u(()=>{const A={type:"radio"};return e.name!==void 0&&Object.assign(A,{".checked":y.value===!0,"^checked":y.value===!0?"checked":void 0,name:e.name,value:e.val}),A}),T=ll(R);function w(A){A!==void 0&&(st(A),S(A)),e.disable!==!0&&y.value!==!0&&n("update:modelValue",e.val,A)}function V(A){(A.keyCode===13||A.keyCode===32)&&st(A)}function z(A){(A.keyCode===13||A.keyCode===32)&&w(A)}return Object.assign(m,{set:w}),()=>{const A=o.value!==null?[i("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[i(Se,{class:"q-radio__icon",name:o.value})])]:[Dl];e.disable!==!0&&T(A,"unshift"," q-radio__native q-ma-none q-pa-none");const h=[i("div",{class:p.value,style:U.value,"aria-hidden":"true"},A)];_.value!==null&&h.push(_.value);const v=e.label!==void 0?Ye(t.default,[e.label]):oe(t.default);return v!==void 0&&h.push(i("div",{class:"q-radio__label q-anchor--skip"},v)),i("div",{ref:f,class:a.value,tabindex:O.value,role:"radio","aria-label":e.label,"aria-checked":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:w,onKeydown:V,onKeyup:z},h)}}});const Ot={radio:Fl,checkbox:Fe,toggle:Ol},Ll=Object.keys(Ot);var Ie=X({name:"QOptionGroup",props:{...Ue,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(t=>"value"in t&&"label"in t)},name:String,type:{default:"radio",validator:e=>Ll.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:t,slots:n}){const{proxy:{$q:m}}=le(),c=Array.isArray(e.modelValue);e.type==="radio"?c===!0&&console.error("q-option-group: model should not be array"):c===!1&&console.error("q-option-group: model should be array in your case");const U=he(e,m),f=u(()=>Ot[e.type]),_=u(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),S=u(()=>{const a={role:"group"};return e.type==="radio"&&(a.role="radiogroup",e.disable===!0&&(a["aria-disabled"]="true")),a});function y(a){t("update:modelValue",a)}return()=>i("div",{class:_.value,...S.value},e.options.map((a,p)=>{const o=n["label-"+p]!==void 0?()=>n["label-"+p](a):n.label!==void 0?()=>n.label(a):void 0;return i("div",[i(f.value,{modelValue:e.modelValue,val:a.value,name:a.name===void 0?e.name:a.name,disable:e.disable||a.disable,label:o===void 0?a.label:null,leftLabel:a.leftLabel===void 0?e.leftLabel:a.leftLabel,color:a.color===void 0?e.color:a.color,checkedIcon:a.checkedIcon,uncheckedIcon:a.uncheckedIcon,dark:a.dark||U.value,size:a.size===void 0?e.size:a.size,dense:e.dense,keepColor:a.keepColor===void 0?e.keepColor:a.keepColor,"onUpdate:modelValue":y},o)])}))}}),te=X({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=le(),m=u(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return i("td",{class:m.value},oe(t.default));const c=n.vnode.key,U=(e.props.colsMap!==void 0?e.props.colsMap[c]:null)||e.props.col;if(U===void 0)return;const{row:f}=e.props;return i("td",{class:m.value+U.__tdClass(f),style:U.__tdStyle(f)},oe(t.default))}}}),Vl=X({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const n=u(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>i("tr",{class:n.value},oe(t.default))}});const zl=["horizontal","vertical","cell","none"];var Bl=X({name:"QMarkupTable",props:{...Ue,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>zl.includes(e)}},setup(e,{slots:t}){const n=le(),m=he(e,n.proxy.$q),c=u(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(m.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>i("div",{class:c.value},[i("table",{class:"q-table"},oe(t.default))])}});function Rt(e,t){return i("div",e,[i("table",{class:"q-table"},t)])}const Ml={list:Rl,table:Bl},Ql=["list","table","__qtable"];var $l=X({name:"QVirtualScroll",props:{...hl,type:{type:String,default:"list",validator:e=>Ql.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:n}){let m;const c=F(null),U=u(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:f,localResetVirtualScroll:_,padVirtualScroll:S,onVirtualScrollEvt:y}=pl({virtualScrollLength:U,getVirtualScrollTarget:R,getVirtualScrollEl:O}),a=u(()=>{if(U.value===0)return[];const z=(A,h)=>({index:f.value.from+h,item:A});return e.itemsFn===void 0?e.items.slice(f.value.from,f.value.to).map(z):e.itemsFn(f.value.from,f.value.to-f.value.from).map(z)}),p=u(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),o=u(()=>e.scrollTarget!==void 0?{}:{tabindex:0});J(U,()=>{_()}),J(()=>e.scrollTarget,()=>{w(),T()});function O(){return c.value.$el||c.value}function R(){return m}function T(){m=sl(O(),e.scrollTarget),m.addEventListener("scroll",y,it.passive)}function w(){m!==void 0&&(m.removeEventListener("scroll",y,it.passive),m=void 0)}function V(){let z=S(e.type==="list"?"div":"tbody",a.value.map(t.default));return t.before!==void 0&&(z=t.before().concat(z)),Ye(t.after,z)}return wt(()=>{_()}),kt(()=>{T()}),ol(()=>{T()}),nl(()=>{w()}),Tt(()=>{w()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Rt({ref:c,class:"q-table__middle "+p.value},V()):i(Ml[e.type],{...n,ref:c,class:[n.class,p.value],...o.value},V)}}});const Gl={xs:2,sm:4,md:6,lg:10,xl:14};function _t(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var jl=X({name:"QLinearProgress",props:{...Ue,...pt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=le(),m=he(e,n.$q),c=Ct(e,Gl),U=u(()=>e.indeterminate===!0||e.query===!0),f=u(()=>e.reverse!==e.query),_=u(()=>({...c.value!==null?c.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),S=u(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=u(()=>_t(e.buffer!==void 0?e.buffer:1,f.value,n.$q)),a=u(()=>`with${e.instantFeedback===!0?"out":""}-transition`),p=u(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${m.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),o=u(()=>_t(U.value===!0?1:e.value,f.value,n.$q)),O=u(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${U.value===!0?"in":""}determinate`),R=u(()=>({width:`${e.value*100}%`})),T=u(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const w=[i("div",{class:p.value,style:y.value}),i("div",{class:O.value,style:o.value})];return e.stripe===!0&&U.value===!1&&w.push(i("div",{class:T.value,style:R.value})),i("div",{class:S.value,style:_.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ye(t.default,w))}}});let ye=0;const Hl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Jl=["update:fullscreen","fullscreen"];function Wl(){const e=le(),{props:t,emit:n,proxy:m}=e;let c,U,f;const _=F(!1);il(e)===!0&&J(()=>m.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&a()}),J(()=>t.fullscreen,p=>{_.value!==p&&S()}),J(_,p=>{n("update:fullscreen",p),n("fullscreen",p)});function S(){_.value===!0?a():y()}function y(){_.value!==!0&&(_.value=!0,f=m.$el.parentNode,f.replaceChild(U,m.$el),document.body.appendChild(m.$el),ye++,ye===1&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:a},ut.add(c))}function a(){_.value===!0&&(c!==void 0&&(ut.remove(c),c=void 0),f.replaceChild(m.$el,U),_.value=!1,ye=Math.max(0,ye-1),ye===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),m.$el.scrollIntoView!==void 0&&setTimeout(()=>{m.$el.scrollIntoView()})))}return wt(()=>{U=document.createElement("span")}),kt(()=>{t.fullscreen===!0&&y()}),Tt(a),Object.assign(m,{toggleFullscreen:S,setFullscreen:y,exitFullscreen:a}),{inFullscreen:_,toggleFullscreen:S}}function Yl(e,t){return new Date(e)-new Date(t)}const Kl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Xl(e,t,n,m){const c=u(()=>{const{sortBy:_}=t.value;return _&&n.value.find(S=>S.name===_)||null}),U=u(()=>e.sortMethod!==void 0?e.sortMethod:(_,S,y)=>{const a=n.value.find(O=>O.name===S);if(a===void 0||a.field===void 0)return _;const p=y===!0?-1:1,o=typeof a.field=="function"?O=>a.field(O):O=>O[a.field];return _.sort((O,R)=>{let T=o(O),w=o(R);return a.rawSort!==void 0?a.rawSort(T,w,O,R)*p:T==null?-1*p:w==null?1*p:a.sort!==void 0?a.sort(T,w,O,R)*p:We(T)===!0&&We(w)===!0?(T-w)*p:ct(T)===!0&&ct(w)===!0?Yl(T,w)*p:typeof T=="boolean"&&typeof w=="boolean"?(T-w)*p:([T,w]=[T,w].map(V=>(V+"").toLocaleString().toLowerCase()),T<w?-1*p:T===w?0:p)})});function f(_){let S=e.columnSortOrder;if(ul(_)===!0)_.sortOrder&&(S=_.sortOrder),_=_.name;else{const p=n.value.find(o=>o.name===_);p!==void 0&&p.sortOrder&&(S=p.sortOrder)}let{sortBy:y,descending:a}=t.value;y!==_?(y=_,a=S==="da"):e.binaryStateSort===!0?a=!a:a===!0?S==="ad"?y=null:a=!1:S==="ad"?a=!0:y=null,m({sortBy:y,descending:a,page:1})}return{columnToSort:c,computedSortMethod:U,sort:f}}const Zl={filter:[String,Object],filterMethod:Function};function ea(e,t){const n=u(()=>e.filterMethod!==void 0?e.filterMethod:(m,c,U,f)=>{const _=c?c.toLowerCase():"";return m.filter(S=>U.some(y=>{const a=f(y,S)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(_)!==-1}))});return J(()=>e.filter,()=>{qt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function ta(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function gt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const la={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function aa(e,t){const{props:n,emit:m}=e,c=F(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),U=u(()=>{const a=n["onUpdate:pagination"]!==void 0?{...c.value,...n.pagination}:c.value;return gt(a)}),f=u(()=>U.value.rowsNumber!==void 0);function _(a){S({pagination:a,filter:n.filter})}function S(a={}){qt(()=>{m("request",{pagination:a.pagination||U.value,filter:a.filter||n.filter,getCellValue:t})})}function y(a,p){const o=gt({...U.value,...a});if(ta(U.value,o)===!0){f.value===!0&&p===!0&&_(o);return}if(f.value===!0){_(o);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?m("update:pagination",o):c.value=o}return{innerPagination:c,computedPagination:U,isServerSide:f,requestServerInteraction:S,setPagination:y}}function ra(e,t,n,m,c,U){const{props:f,emit:_,proxy:{$q:S}}=e,y=u(()=>m.value===!0?n.value.rowsNumber||0:U.value),a=u(()=>{const{page:h,rowsPerPage:v}=n.value;return(h-1)*v}),p=u(()=>{const{page:h,rowsPerPage:v}=n.value;return h*v}),o=u(()=>n.value.page===1),O=u(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/n.value.rowsPerPage))),R=u(()=>p.value===0?!0:n.value.page>=O.value),T=u(()=>(f.rowsPerPageOptions.includes(t.value.rowsPerPage)?f.rowsPerPageOptions:[t.value.rowsPerPage].concat(f.rowsPerPageOptions)).map(v=>({label:v===0?S.lang.table.allRows:""+v,value:v})));J(O,(h,v)=>{if(h===v)return;const r=n.value.page;h&&!r?c({page:1}):h<r&&c({page:h})});function w(){c({page:1})}function V(){const{page:h}=n.value;h>1&&c({page:h-1})}function z(){const{page:h,rowsPerPage:v}=n.value;p.value>0&&h*v<y.value&&c({page:h+1})}function A(){c({page:O.value})}return f["onUpdate:pagination"]!==void 0&&_("update:pagination",{...n.value}),{firstRowIndex:a,lastRowIndex:p,isFirstPage:o,isLastPage:R,pagesNumber:O,computedRowsPerPageOptions:T,computedRowsNumber:y,firstPage:w,prevPage:V,nextPage:z,lastPage:A}}const oa={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},na=["update:selected","selection"];function sa(e,t,n,m){const c=u(()=>{const R={};return e.selected.map(m.value).forEach(T=>{R[T]=!0}),R}),U=u(()=>e.selection!=="none"),f=u(()=>e.selection==="single"),_=u(()=>e.selection==="multiple"),S=u(()=>n.value.length!==0&&n.value.every(R=>c.value[m.value(R)]===!0)),y=u(()=>S.value!==!0&&n.value.some(R=>c.value[m.value(R)]===!0)),a=u(()=>e.selected.length);function p(R){return c.value[R]===!0}function o(){t("update:selected",[])}function O(R,T,w,V){t("selection",{rows:T,added:w,keys:R,evt:V});const z=f.value===!0?w===!0?T:[]:w===!0?e.selected.concat(T):e.selected.filter(A=>R.includes(m.value(A))===!1);t("update:selected",z)}return{hasSelectionMode:U,singleSelection:f,multipleSelection:_,allRowsSelected:S,someRowsSelected:y,rowsSelectedNumber:a,isRowSelected:p,clearSelection:o,updateSelection:O}}function yt(e){return Array.isArray(e)?e.slice():[]}const ia={expanded:Array},ua=["update:expanded"];function ca(e,t){const n=F(yt(e.expanded));J(()=>e.expanded,f=>{n.value=yt(f)});function m(f){return n.value.includes(f)}function c(f){e.expanded!==void 0?t("update:expanded",f):n.value=f}function U(f,_){const S=n.value.slice(),y=S.indexOf(f);_===!0?y===-1&&(S.push(f),c(S)):y!==-1&&(S.splice(y,1),c(S))}return{isRowExpanded:m,setExpanded:c,updateExpanded:U}}const da={visibleColumns:Array};function va(e,t,n){const m=u(()=>{if(e.columns!==void 0)return e.columns;const _=e.rows[0];return _!==void 0?Object.keys(_).map(S=>({name:S,label:S.toUpperCase(),field:S,align:We(_[S])?"right":"left",sortable:!0})):[]}),c=u(()=>{const{sortBy:_,descending:S}=t.value;return(e.visibleColumns!==void 0?m.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):m.value).map(a=>{const p=a.align||"right",o=`text-${p}`;return{...a,align:p,__iconClass:`q-table__sort-icon q-table__sort-icon--${p}`,__thClass:o+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===_?` sorted ${S===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>o+" "+a.classes:O=>o+" "+a.classes(O):()=>o}})}),U=u(()=>{const _={};return c.value.forEach(S=>{_[S.name]=S}),_}),f=u(()=>e.tableColspan!==void 0?e.tableColspan:c.value.length+(n.value===!0?1:0));return{colList:m,computedCols:c,computedColsMap:U,computedColspan:f}}const De="q-table__bottom row items-center",Et={};At.forEach(e=>{Et[e]={}});var fa=X({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Et,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ue,...Hl,...da,...Zl,...la,...ia,...oa,...Kl},emits:["request","virtualScroll",...Jl,...ua,...na],setup(e,{slots:t,emit:n}){const m=le(),{proxy:{$q:c}}=m,U=he(e,c),{inFullscreen:f,toggleFullscreen:_}=Wl(),S=u(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),y=F(null),a=F(null),p=u(()=>e.grid!==!0&&e.virtualScroll===!0),o=u(()=>" q-table__card"+(U.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),O=u(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":o.value)+(U.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(f.value===!0?" fullscreen scroll":"")),R=u(()=>O.value+(e.loading===!0?" q-table--loading":""));J(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+O.value,()=>{p.value===!0&&a.value!==null&&a.value.reset()});const{innerPagination:T,computedPagination:w,isServerSide:V,requestServerInteraction:z,setPagination:A}=aa(m,ie),{computedFilterMethod:h}=ea(e,A),{isRowExpanded:v,setExpanded:r,updateExpanded:d}=ca(e,n),x=u(()=>{let l=e.rows;if(V.value===!0||l.length===0)return l;const{sortBy:g,descending:C}=w.value;return e.filter&&(l=h.value(l,e.filter,W.value,ie)),It.value!==null&&(l=Dt.value(e.rows===l?l.slice():l,g,C)),l}),Z=u(()=>x.value.length),L=u(()=>{let l=x.value;if(V.value===!0)return l;const{rowsPerPage:g}=w.value;return g!==0&&(ke.value===0&&e.rows!==l?l.length>Te.value&&(l=l.slice(0,Te.value)):l=l.slice(ke.value,Te.value)),l}),{hasSelectionMode:B,singleSelection:Le,multipleSelection:pe,allRowsSelected:Ce,someRowsSelected:be,rowsSelectedNumber:ne,isRowSelected:se,clearSelection:Pt,updateSelection:we}=sa(e,n,L,S),{colList:Nt,computedCols:W,computedColsMap:Ke,computedColspan:Xe}=va(e,w,B),{columnToSort:It,computedSortMethod:Dt,sort:Ve}=Xl(e,w,Nt,A),{firstRowIndex:ke,lastRowIndex:Te,isFirstPage:ze,isLastPage:Be,pagesNumber:qe,computedRowsPerPageOptions:Ft,computedRowsNumber:Ae,firstPage:Me,prevPage:Qe,nextPage:$e,lastPage:Ge}=ra(m,T,w,V,A,Z),Lt=u(()=>L.value.length===0),Vt=u(()=>{const l={};return At.forEach(g=>{l[g]=e[g]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function zt(){p.value===!0&&a.value.reset()}function Bt(){if(e.grid===!0)return Zt();const l=e.hideHeader!==!0?at:null;if(p.value===!0){const C=t["top-row"],k=t["bottom-row"],q={default:D=>et(D.item,t.body,D.index)};if(C!==void 0){const D=i("tbody",C({cols:W.value}));q.before=l===null?()=>D:()=>[l()].concat(D)}else l!==null&&(q.before=l);return k!==void 0&&(q.after=()=>i("tbody",k({cols:W.value}))),i($l,{ref:a,class:e.tableClass,style:e.tableStyle,...Vt.value,scrollTarget:e.virtualScrollTarget,items:L.value,type:"__qtable",tableColspan:Xe.value,onVirtualScroll:Qt},q)}const g=[$t()];return l!==null&&g.unshift(l()),Rt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},g)}function Mt(l,g){if(a.value!==null){a.value.scrollTo(l,g);return}l=parseInt(l,10);const C=y.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(C!==null){const k=y.value.querySelector(".q-table__middle.scroll"),q=C.offsetTop-e.virtualScrollStickySizeStart,D=q<k.scrollTop?"decrease":"increase";k.scrollTop=q,n("virtualScroll",{index:l,from:0,to:T.value.rowsPerPage-1,direction:D})}}function Qt(l){n("virtualScroll",l)}function Ze(){return[i(jl,{class:"q-table__linear-progress",color:e.color,dark:U.value,indeterminate:!0,trackColor:"transparent"})]}function et(l,g,C){const k=S.value(l),q=se(k);if(g!==void 0)return g(tt({key:k,row:l,pageIndex:C,__trClass:q?"selected":""}));const D=t["body-cell"],I=W.value.map(M=>{const Oe=t[`body-cell-${M.name}`],Re=Oe!==void 0?Oe:D;return Re!==void 0?Re(Gt({key:k,row:l,pageIndex:C,col:M})):i("td",{class:M.__tdClass(l),style:M.__tdStyle(l)},ie(M,l))});if(B.value===!0){const M=t["body-selection"],Oe=M!==void 0?M(jt({key:k,row:l,pageIndex:C})):[i(Fe,{modelValue:q,color:e.color,dark:U.value,dense:e.dense,"onUpdate:modelValue":(Re,el)=>{we([k],[l],Re,el)}})];I.unshift(i("td",{class:"q-table--col-auto-width"},Oe))}const Y={key:k,class:{selected:q}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=M=>{n("RowClick",M,l,C)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=M=>{n("RowDblclick",M,l,C)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=M=>{n("RowContextmenu",M,l,C)}),i("tr",Y,I)}function $t(){const l=t.body,g=t["top-row"],C=t["bottom-row"];let k=L.value.map((q,D)=>et(q,l,D));return g!==void 0&&(k=g({cols:W.value}).concat(k)),C!==void 0&&(k=k.concat(C({cols:W.value}))),i("tbody",k)}function tt(l){return je(l),l.cols=l.cols.map(g=>_e({...g},"value",()=>ie(g,l.row))),l}function Gt(l){return je(l),_e(l,"value",()=>ie(l.col,l.row)),l}function jt(l){return je(l),l}function je(l){Object.assign(l,{cols:W.value,colsMap:Ke.value,sort:Ve,rowIndex:ke.value+l.pageIndex,color:e.color,dark:U.value,dense:e.dense}),B.value===!0&&_e(l,"selected",()=>se(l.key),(g,C)=>{we([l.key],[l.row],g,C)}),_e(l,"expand",()=>v(l.key),g=>{d(l.key,g)})}function ie(l,g){const C=typeof l.field=="function"?l.field(g):g[l.field];return l.format!==void 0?l.format(C,g):C}const ue=u(()=>({pagination:w.value,pagesNumber:qe.value,isFirstPage:ze.value,isLastPage:Be.value,firstPage:Me,prevPage:Qe,nextPage:$e,lastPage:Ge,inFullscreen:f.value,toggleFullscreen:_}));function Ht(){const l=t.top,g=t["top-left"],C=t["top-right"],k=t["top-selection"],q=B.value===!0&&k!==void 0&&ne.value>0,D="q-table__top relative-position row items-center";if(l!==void 0)return i("div",{class:D},[l(ue.value)]);let I;if(q===!0?I=k(ue.value).slice():(I=[],g!==void 0?I.push(i("div",{class:"q-table__control"},[g(ue.value)])):e.title&&I.push(i("div",{class:"q-table__control"},[i("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(I.push(i("div",{class:"q-table__separator col"})),I.push(i("div",{class:"q-table__control"},[C(ue.value)]))),I.length!==0)return i("div",{class:D},I)}const lt=u(()=>be.value===!0?null:Ce.value);function at(){const l=Jt();return e.loading===!0&&t.loading===void 0&&l.push(i("tr",{class:"q-table__progress"},[i("th",{class:"relative-position",colspan:Xe.value},Ze())])),i("thead",l)}function Jt(){const l=t.header,g=t["header-cell"];if(l!==void 0)return l(He({header:!0})).slice();const C=W.value.map(k=>{const q=t[`header-cell-${k.name}`],D=q!==void 0?q:g,I=He({col:k});return D!==void 0?D(I):i(K,{key:k.name,props:I},()=>k.label)});if(Le.value===!0&&e.grid!==!0)C.unshift(i("th",{class:"q-table--col-auto-width"}," "));else if(pe.value===!0){const k=t["header-selection"],q=k!==void 0?k(He({})):[i(Fe,{color:e.color,modelValue:lt.value,dark:U.value,dense:e.dense,"onUpdate:modelValue":rt})];C.unshift(i("th",{class:"q-table--col-auto-width"},q))}return[i("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function He(l){return Object.assign(l,{cols:W.value,sort:Ve,colsMap:Ke.value,color:e.color,dark:U.value,dense:e.dense}),pe.value===!0&&_e(l,"selected",()=>lt.value,rt),l}function rt(l){be.value===!0&&(l=!1),we(L.value.map(S.value),L.value,l)}const xe=u(()=>{const l=[e.iconFirstPage||c.iconSet.table.firstPage,e.iconPrevPage||c.iconSet.table.prevPage,e.iconNextPage||c.iconSet.table.nextPage,e.iconLastPage||c.iconSet.table.lastPage];return c.lang.rtl===!0?l.reverse():l});function Wt(){if(e.hideBottom===!0)return;if(Lt.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||c.lang.table.loading:e.filter?e.noResultsLabel||c.lang.table.noResults:e.noDataLabel||c.lang.table.noData,k=t["no-data"],q=k!==void 0?[k({message:C,icon:c.iconSet.table.warning,filter:e.filter})]:[i(Se,{class:"q-table__bottom-nodata-icon",name:c.iconSet.table.warning}),C];return i("div",{class:De+" q-table__bottom--nodata"},q)}const l=t.bottom;if(l!==void 0)return i("div",{class:De},[l(ue.value)]);const g=e.hideSelectedBanner!==!0&&B.value===!0&&ne.value>0?[i("div",{class:"q-table__control"},[i("div",[(e.selectedRowsLabel||c.lang.table.selectedRecords)(ne.value)])])]:[];if(e.hidePagination!==!0)return i("div",{class:De+" justify-end"},Kt(g));if(g.length!==0)return i("div",{class:De},g)}function Yt(l){A({page:1,rowsPerPage:l.value})}function Kt(l){let g;const{rowsPerPage:C}=w.value,k=e.paginationLabel||c.lang.table.pagination,q=t.pagination,D=e.rowsPerPageOptions.length>1;if(l.push(i("div",{class:"q-table__separator col"})),D===!0&&l.push(i("div",{class:"q-table__control"},[i("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||c.lang.table.recordsPerPage]),i(Cl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:Ft.value,displayValue:C===0?c.lang.table.allRows:C,dark:U.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Yt})])),q!==void 0)g=q(ue.value);else if(g=[i("span",C!==0?{class:"q-table__bottom-item"}:{},[C?k(ke.value+1,Math.min(Te.value,Ae.value),Ae.value):k(1,Z.value,Ae.value)])],C!==0&&qe.value>1){const I={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(I.size="sm"),qe.value>2&&g.push(i($,{key:"pgFirst",...I,icon:xe.value[0],disable:ze.value,onClick:Me})),g.push(i($,{key:"pgPrev",...I,icon:xe.value[1],disable:ze.value,onClick:Qe}),i($,{key:"pgNext",...I,icon:xe.value[2],disable:Be.value,onClick:$e})),qe.value>2&&g.push(i($,{key:"pgLast",...I,icon:xe.value[3],disable:Be.value,onClick:Ge}))}return l.push(i("div",{class:"q-table__control"},g)),l}function Xt(){const l=e.gridHeader===!0?[i("table",{class:"q-table"},[at()])]:e.loading===!0&&t.loading===void 0?Ze():void 0;return i("div",{class:"q-table__middle"},l)}function Zt(){const l=t.item!==void 0?t.item:g=>{const C=g.cols.map(q=>i("div",{class:"q-table__grid-item-row"},[i("div",{class:"q-table__grid-item-title"},[q.label]),i("div",{class:"q-table__grid-item-value"},[q.value])]));if(B.value===!0){const q=t["body-selection"],D=q!==void 0?q(g):[i(Fe,{modelValue:g.selected,color:e.color,dark:U.value,dense:e.dense,"onUpdate:modelValue":(I,Y)=>{we([g.key],[g.row],I,Y)}})];C.unshift(i("div",{class:"q-table__grid-item-row"},D),i(Tl,{dark:U.value}))}const k={class:["q-table__grid-item-card"+o.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(k.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(k.onClick=q=>{n("RowClick",q,g.row,g.pageIndex)}),e.onRowDblclick!==void 0&&(k.onDblclick=q=>{n("RowDblclick",q,g.row,g.pageIndex)})),i("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(g.selected===!0?" q-table__grid-item--selected":"")},[i("div",k,C)])};return i("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},L.value.map((g,C)=>l(tt({key:S.value(g),row:g,pageIndex:C}))))}return Object.assign(m.proxy,{requestServerInteraction:z,setPagination:A,firstPage:Me,prevPage:Qe,nextPage:$e,lastPage:Ge,isRowSelected:se,clearSelection:Pt,isRowExpanded:v,setExpanded:r,sort:Ve,resetVirtualScroll:zt,scrollTo:Mt,getCellValue:ie}),cl(m.proxy,{filteredSortedRows:()=>x.value,computedRows:()=>L.value,computedRowsNumber:()=>Ae.value}),()=>{const l=[Ht()],g={ref:y,class:R.value};return e.grid===!0?l.push(Xt()):Object.assign(g,{class:[g.class,e.cardClass],style:e.cardStyle}),l.push(Bt(),Wt()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),i("div",g,l)}}});function St(e){setTimeout(()=>{window.URL.revokeObjectURL(e.href)},1e4),e.remove()}function ma(e,t,n={}){const{mimeType:m,byteOrderMark:c,encoding:U}=typeof n=="string"?{mimeType:n}:n,f=U!==void 0?new TextEncoder(U).encode([t]):t,_=c!==void 0?[c,f]:[f],S=new Blob(_,{type:m||"application/octet-stream"}),y=document.createElement("a");y.href=window.URL.createObjectURL(S),y.setAttribute("download",e),typeof y.download=="undefined"&&y.setAttribute("target","_blank"),y.classList.add("hidden"),y.style.position="fixed",document.body.appendChild(y);try{return y.click(),St(y),!0}catch(a){return St(y),a}}const ae=e=>(gl("data-v-7f6c20c6"),e=e(),yl(),e),ba=ae(()=>G("span",{style:{"font-weight":"bold"}},"Selection:",-1)),_a=ae(()=>G("span",{style:{"font-weight":"bold"}},"Timeframe:",-1)),ga=ae(()=>G("span",{style:{"font-weight":"bold"}},"Performer Users:",-1)),ya=ae(()=>G("span",{style:{"font-weight":"bold"}},"Performer Groups:",-1)),Sa=ae(()=>G("span",{style:{"font-weight":"bold"}},"Related Users:",-1)),Ua=ae(()=>G("span",{style:{"font-weight":"bold"}},"Actions:",-1)),ha=ae(()=>G("span",{style:{"font-weight":"bold"}},"Decription Filter:",-1)),pa=ae(()=>G("span",{style:{"font-weight":"bold"}},"Size:",-1)),Ca={class:"q-ma-md column",style:{gap:"0.6rem"}},wa={class:"q-ma-md column",style:{gap:"0.6rem"}},ka={class:"q-mx-md"},Ta=dl({__name:"ActivityTable",props:{showSelections:{type:Boolean,default:!0}},setup(e){const t=vl(),n=ht(),m=F(null),c=F([{name:"rowNumber",label:"rowNumber",align:"right",field:"",sortable:!1},{name:"activityId",label:"ID",align:"left",field:"activityId",sortable:!1},{name:"date",label:"Date",align:"left",field:"date",sortable:!1},{name:"time",label:"Time",align:"left",field:"time",sortable:!1},{name:"performerUserFullName",label:"User",align:"left",field:"performerUserFullName",sortable:!1},{name:"performerUserGroupName",label:"Group",align:"left",field:"performerUserGroupName",sortable:!1},{name:"relatedUserFullName",label:"Related User",align:"left",field:"relatedUserFullName",sortable:!1},{name:"action",label:"Action",align:"left",field:"action",sortable:!1},{name:"description",label:"Description",align:"left",field:"description",sortable:!1}]),U=["rowNumber","date","time","performerUserFullName","performerUserGroupName","relatedUserFullName","action","description"],f=F(!1),_=dt(),S=fl(_),y=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"monthToDate",label:"Month to Date"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}],a=[{value:"access",label:"Access"},{value:"userCreated",label:"New Users"},{value:"userUpdateGroup",label:"Group Changes"},{value:"userInactive",label:"Inactivated"}],p=h=>{switch(o.value.selection=h,o.value.performerUserId=[],o.value.relatedUserId=[],o.value.actions=[],o.value.term="",h){case"access":t.readActivity(El.value);break;case"userCreated":t.readActivity(Pl.value);break;case"userUpdateGroup":t.readActivity(Nl.value);break;case"userInactive":t.readActivity(Il.value);break}},o=F({term:"",selection:"access",timeframe:"monthToDate",dateStart:Ee(S),dateEnd:Ee(_),searchColumns:["description"],performerUserId:[],performerUserGroupId:[],relatedUserId:[],actions:[]}),O=u(()=>[...new Set(t.activity.map(h=>h.action))]),R=u(()=>t.activity.map(h=>({value:h.performerUserId,label:h.performerUserFullName})).filter((h,v,r)=>v===r.findIndex(d=>d.label===h.label&&d.value===h.value))),T=u(()=>t.activity.map(h=>({value:h.performerUserGroupId||"",label:h.performerUserGroupName||""})).filter((h,v,r)=>v===r.findIndex(d=>d.label===h.label&&d.value===h.value))),w=u(()=>t.activity.map(h=>({value:h.relatedUserId,label:h.relatedUserFullName})).filter((h,v,r)=>v===r.findIndex(d=>d.label===h.label&&d.value===h.value))),V=h=>{o.value.timeframe=h;const v=dt(),r=Sl(v);let d=new Date,x=new Date;switch(h){case"today":d=r,x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),23,59,59));break;case"yesterday":d=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()-1)),x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()-1,23,59,59));break;case"monthToDate":d=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),1)),x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),23,59,59));break;case"lastMonth":d=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth()-1,1)),x=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),0));break;case"custom":d=new Date(o.value.dateStart),x=new Date(o.value.dateEnd),isNaN(d.getTime())||isNaN(x.getTime())?Pe({message:"Invalid custom date range",color:"negative",icon:"warning"}):x<d&&Pe({message:"End date cannot be before start date",color:"negative",icon:"warning"});break}o.value.dateStart=Ee(d),o.value.dateEnd=Ee(x)},z=u(()=>{const h=vt(o.value.dateStart),v=vt(o.value.dateEnd);return t.activity.filter(r=>{var Ce,be,ne,se;const d=new Date(r.createdAt),x=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate())),Z=x>=h&&x<=v,L=!((Ce=o.value.performerUserId)!=null&&Ce.length)||o.value.performerUserId.includes(r.performerUserId),B=!((be=o.value.relatedUserId)!=null&&be.length)||o.value.relatedUserId.includes(r.relatedUserId),Le=!((ne=o.value.actions)!=null&&ne.length)||o.value.actions.includes(r.action),pe=!((se=o.value.performerUserGroupId)!=null&&se.length)||r.performerUserGroupId&&o.value.performerUserGroupId.includes(r.performerUserGroupId);return Z&&L&&B&&Le&&pe})}),A=()=>{if(!m.value)return;const h=m.value.filteredSortedRows,v=[c.value.map(L=>bt(L.label))].concat(h.map(L=>c.value.map(B=>bt(typeof B.field=="function"?B.field(L):L[B.field===void 0?B.name:B.field])).join(","))).join(`\r
`),r=new Date,x=`User Activity ${`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()} ${r.getHours()}-${r.getMinutes()}-${r.getSeconds()}`}.csv`;ma(x,v,"text/csv")!==!0?Pe({message:"Browser denied file download...",color:"negative",icon:"warning"}):Pe({message:"File downloaded successfully...",color:"positive",icon:"download"})};return J(()=>n.selectedUser,()=>{o.value.performerUserId=[],o.value.relatedUserId=[],o.value.actions=[],o.value.term=""}),(h,v)=>(Q(),re(ot,null,{default:b(()=>[s(fa,{ref_key:"tableRef",ref:m,rows:z.value,columns:c.value,"row-key":"activityId","rows-per-page-options":[-1],"visible-columns":U,filter:o.value.term,dense:"","hide-pagination":"","virtual-scroll":"",class:"header-table",style:{"min-height":"80vh",margin:"0.4rem"}},{top:b(()=>[s(j,{class:"text-h3"},{default:b(()=>[E(" Activity ")]),_:1}),s(ce),e.showSelections?(Q(),re(Ul,{key:0},{default:b(()=>[(Q(),de(fe,null,ve(a,r=>s($,{class:"q-px-md",key:r.value,dense:"",label:r.label,color:o.value.selection===r.value?"blue":"primary",onClick:d=>p(r.value)},null,8,["label","color","onClick"])),64))]),_:1})):ft("",!0),s(ce),s(H,{class:"bg-blue text-white q-ma-md"},{default:b(()=>[s(ee,{icon:"priority_high"}),E(" Dates in UTC ")]),_:1}),s($,{color:"primary",icon:"download",label:"Download",onClick:A}),s($,{dense:"",icon:f.value?"more_vert":"more_horiz",onClick:v[0]||(v[0]=r=>f.value=!f.value),class:"q-ml-md"},null,8,["icon"]),ml(s(kl,null,{default:b(()=>[s(ot,{class:"col"},{default:b(()=>[s(al,{class:"q-pa-md",style:{"background-color":"var(--primary-white)"}},{default:b(()=>[s(wl,null,{default:b(()=>[E(" Summary ")]),_:1}),e.showSelections?(Q(),re(j,{key:0},{default:b(()=>[ba,s(H,{color:"teal-3"},{default:b(()=>{var r;return[E(P(((r=a.find(d=>d.value===o.value.selection))==null?void 0:r.label)||""),1)]}),_:1})]),_:1})):ft("",!0),s(j,null,{default:b(()=>[_a,s(H,{color:"orange-3"},{default:b(()=>{var r;return[E(P(((r=y.find(d=>d.value===o.value.timeframe))==null?void 0:r.label)||""),1)]}),_:1}),E("from "+P(o.value.dateStart)+" to "+P(o.value.dateEnd),1)]),_:1}),s(j,null,{default:b(()=>{var r;return[ga,(Q(!0),de(fe,null,ve([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.performerUserFullName))],(d,x)=>(Q(),re(H,{key:x,color:"purple-3"},{default:b(()=>[E(P(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[ya,(Q(!0),de(fe,null,ve([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.performerUserGroupName))],(d,x)=>(Q(),re(H,{key:x,color:"teal-3"},{default:b(()=>[E(P(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[Sa,(Q(!0),de(fe,null,ve([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.relatedUserFullName).filter(Boolean))],(d,x)=>(Q(),re(H,{key:x,color:"light-green-3"},{default:b(()=>[E(P(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[Ua,(Q(!0),de(fe,null,ve([...new Set((r=m.value)==null?void 0:r.computedRows.map(d=>d.action))],(d,x)=>(Q(),re(H,{color:"blue-3",key:x},{default:b(()=>[E(P(d),1)]),_:2},1024))),128))]}),_:1}),s(j,null,{default:b(()=>{var r;return[ha,E(" "+P(((r=o.value.term)==null?void 0:r.length)>0?o.value.term:"None"),1)]}),_:1}),s(j,null,{default:b(()=>{var r;return[pa,E(" Showing "+P((r=m.value)==null?void 0:r.computedRowsNumber)+" of "+P(ge(t).activity.length)+" Rows where ",1),s(H,{color:"pink-3"},{default:b(()=>[E(P(ge(n).selectedUser.fullName),1)]),_:1}),E("was involved")]}),_:1})]),_:1})]),_:1})]),_:1},512),[[bl,f.value]])]),"header-cell-rowNumber":b(r=>[s(K,{props:r},{default:b(()=>[s(Se,{size:"sm",name:"tag"})]),_:2},1032,["props"])]),"header-cell-date":b(r=>[s(K,{props:r},{default:b(()=>[s(me,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":"primary"}),E(" "+P(r.col.label),1)]),default:b(()=>[G("div",Ca,[(Q(),de(fe,null,ve(y,d=>s($,{key:d.value,outline:"",label:d.label,color:o.value.timeframe===d.value?"primary":"",onClick:x=>V(d.value)},null,8,["label","color","onClick"])),64))]),G("div",wa,[s(Je,{outlined:"",debounce:"300",modelValue:o.value.dateStart,"onUpdate:modelValue":v[1]||(v[1]=d=>o.value.dateStart=d),label:"Date Start",type:"date",disable:o.value.timeframe!=="custom"},null,8,["modelValue","disable"]),s(Je,{outlined:"",debounce:"300",modelValue:o.value.dateEnd,"onUpdate:modelValue":v[2]||(v[2]=d=>o.value.dateEnd=d),label:"Date End",type:"date",disable:o.value.timeframe!=="custom"},null,8,["modelValue","disable"])])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-time":b(r=>[s(K,{props:r},{default:b(()=>[s(j,{style:{"font-size":"16px"}},{default:b(()=>[E(P(r.col.label),1)]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserFullName":b(r=>[s(K,{props:r},{default:b(()=>[s(me,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.performerUserId&&o.value.performerUserId.length>0?"primary":""},null,8,["text-color"]),E(" "+P(r.col.label),1)]),default:b(()=>[s(Ne,{style:{width:"256px"}},{default:b(()=>[s(ce),s($,{dense:"",label:"Clear",onClick:v[3]||(v[3]=d=>o.value.performerUserId=[])})]),_:1}),s(Ie,{modelValue:o.value.performerUserId,"onUpdate:modelValue":v[4]||(v[4]=d=>o.value.performerUserId=d),options:R.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-performerUserGroupName":b(r=>[s(K,{props:r},{default:b(()=>[s(me,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.performerUserGroupId&&o.value.performerUserGroupId.length>0?"primary":""},null,8,["text-color"]),E(" "+P(r.col.label),1)]),default:b(()=>[s(Ne,{style:{width:"256px"}},{default:b(()=>[s(ce),s($,{dense:"",label:"Clear",onClick:v[5]||(v[5]=d=>o.value.performerUserGroupId=[])})]),_:1}),s(Ie,{modelValue:o.value.performerUserGroupId,"onUpdate:modelValue":v[6]||(v[6]=d=>o.value.performerUserGroupId=d),options:T.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-relatedUserFullName":b(r=>[s(K,{props:r},{default:b(()=>[s(me,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.relatedUserId&&o.value.relatedUserId.length>0?"primary":""},null,8,["text-color"]),E(" "+P(r.col.label),1)]),default:b(()=>[s(Ne,{style:{width:"256px"}},{default:b(()=>[s(ce),s($,{dense:"",label:"Clear",onClick:v[7]||(v[7]=d=>o.value.relatedUserId=[])})]),_:1}),s(Ie,{modelValue:o.value.relatedUserId,"onUpdate:modelValue":v[8]||(v[8]=d=>o.value.relatedUserId=d),options:w.value,type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-action":b(r=>[s(K,{props:r},{default:b(()=>[s(me,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"filter_list",size:"sm","text-color":o.value.actions&&o.value.actions.length>0?"primary":""},null,8,["text-color"]),E(" "+P(r.col.label),1)]),default:b(()=>[s(Ne,{style:{width:"192px"}},{default:b(()=>[s(ce),s($,{dense:"",label:"Clear",onClick:v[9]||(v[9]=d=>o.value.actions=[])})]),_:1}),s(Ie,{modelValue:o.value.actions,"onUpdate:modelValue":v[10]||(v[10]=d=>o.value.actions=d),options:O.value.map(d=>({label:d,value:d})),type:"checkbox"},null,8,["modelValue","options"])]),_:2},1024)]),_:2},1032,["props"])]),"header-cell-description":b(r=>[s(K,{props:r},{default:b(()=>[s(me,{dense:"",round:""},{label:b(()=>[s(ee,{icon:"search",size:"sm","text-color":o.value.term!==""?"primary":""},null,8,["text-color"]),E(" "+P(r.col.label),1)]),default:b(()=>[G("div",ka,[s(Je,{outlined:"",dense:"",debounce:"300",modelValue:o.value.term,"onUpdate:modelValue":v[12]||(v[12]=d=>o.value.term=d),type:"search",placeholder:"Description search\u2026",style:{"align-self":"center"}},{append:b(()=>[s(Se,{name:o.value.term?"close":"search",class:mt({"cursor-pointer":o.value.term}),onClick:v[11]||(v[11]=d=>o.value.term?o.value.term="":null)},null,8,["name","class"])]),_:1},8,["modelValue"])])]),_:2},1024)]),_:2},1032,["props"])]),body:b(r=>[s(Vl,{props:r},{default:b(()=>[s(te,{class:"text-grey"},{default:b(()=>[E(P(r.rowIndex+1),1)]),_:2},1024),s(te,{key:"date",props:r},{default:b(()=>[E(P(r.row.date),1)]),_:2},1032,["props"]),s(te,{key:"time",props:r},{default:b(()=>[E(P(r.row.time),1)]),_:2},1032,["props"]),s(te,{key:"performerUserFullName",props:r},{default:b(()=>[s(ql,null,{default:b(()=>[E(P(r.row.performerUserFullName),1)]),_:2},1024)]),_:2},1032,["props"]),s(te,{key:"performerUserGroupName",props:r},{default:b(()=>[s(H,{"text-color":"white",color:"cyan",label:r.row.performerUserGroupName},null,8,["label"])]),_:2},1032,["props"]),s(te,{key:"relatedUserFullName",props:r},{default:b(()=>[G("span",{class:mt({"text-grey":!r.row.relatedUserFullName})},P(r.row.relatedUserFullName||"No one"),3)]),_:2},1032,["props"]),s(te,{key:"action",props:r},{default:b(()=>{var d;return[s(H,{"text-color":"white",color:((d=ge(t).activityActions.find(x=>x.action===r.row.action))==null?void 0:d.color)||"grey"},{default:b(()=>{var x,Z;return[s(ee,{size:"sm","text-color":"white",icon:((x=ge(t).activityActions.find(L=>L.action===r.row.action))==null?void 0:x.icon)||"question_mark",color:((Z=ge(t).activityActions.find(L=>L.action===r.row.action))==null?void 0:Z.color)||"grey"},null,8,["icon","color"]),E(" "+P(r.row.action),1)]}),_:2},1032,["color"])]}),_:2},1032,["props"]),s(te,{key:"description",props:r},{default:b(()=>[E(P(r.row.description),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1}))}});var $a=_l(Ta,[["__scopeId","data-v-7f6c20c6"]]);export{$a as A,Va as a,Ba as b,Qa as c,za as s,Ma as u};
