import{Q as T}from"./QToolbarTitle.6ebfd223.js";import{Q as $}from"./QToolbar.e3686791.js";import{Q as k}from"./QHeader.f5c53173.js";import{Q as x}from"./QSelect.5c83a3d5.js";import{Q as M,a as q,c as b}from"./QInput.0e99fb1a.js";import{Q as S}from"./QSpace.7b12d9cc.js";import{Q as I}from"./QPage.51b6104b.js";import{b as L,Q as D,a as A}from"./QLayout.380fbd32.js";import{s as j,v as K,x as V,N as R,O as E,z as m,F as g,H as G,U as J,A as Q,C as W,D as X,_ as Y,i as Z,u as ee,a as te,f as le,a6 as ae,o as ue,k as ne,w as i,l as n,p as oe,m as r,Q as C}from"./index.492ac16c.js";import{Q as re}from"./QItem.c004fb31.js";var se=j({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:y,emit:v}){const{proxy:{$q:a}}=W(),l=K(X,V);if(l===V)return console.error("QFooter needs to be child of QLayout"),V;const s=R(parseInt(o.heightHint,10)),d=R(!0),t=R(E.value===!0||l.isContainer.value===!0?0:window.innerHeight),u=m(()=>o.reveal===!0||l.view.value.indexOf("F")>-1||a.platform.is.ios&&l.isContainer.value===!0),h=m(()=>l.isContainer.value===!0?l.containerHeight.value:t.value),F=m(()=>{if(o.modelValue!==!0)return 0;if(u.value===!0)return d.value===!0?s.value:0;const e=l.scroll.value.position+h.value+s.value-l.height.value;return e>0?e:0}),_=m(()=>o.modelValue!==!0||u.value===!0&&d.value!==!0),z=m(()=>o.modelValue===!0&&_.value===!0&&o.reveal===!0),U=m(()=>"q-footer q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-bottom"+(o.bordered===!0?" q-footer--bordered":"")+(_.value===!0?" q-footer--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus"+(u.value!==!0?" hidden":""):"")),O=m(()=>{const e=l.rows.value.bottom,f={};return e[0]==="l"&&l.left.space===!0&&(f[a.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),e[2]==="r"&&l.right.space===!0&&(f[a.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),f});function c(e,f){l.update("footer",e,f)}function p(e,f){e.value!==f&&(e.value=f)}function H({height:e}){p(s,e),c("size",e)}function B(){if(o.reveal!==!0)return;const{direction:e,position:f,inflectionPoint:P}=l.scroll.value;p(d,e==="up"||f-P<100||l.height.value-h.value-f-s.value<300)}function N(e){z.value===!0&&p(d,!0),v("focusin",e)}g(()=>o.modelValue,e=>{c("space",e),p(d,!0),l.animate()}),g(F,e=>{c("offset",e)}),g(()=>o.reveal,e=>{e===!1&&p(d,o.modelValue)}),g(d,e=>{l.animate(),v("reveal",e)}),g([s,l.scroll,l.height],B),g(()=>a.screen.height,e=>{l.isContainer.value!==!0&&p(t,e)});const w={};return l.instances.footer=w,o.modelValue===!0&&c("size",s.value),c("space",o.modelValue),c("offset",F.value),G(()=>{l.instances.footer===w&&(l.instances.footer=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const e=J(y.default,[Q(L,{debounce:0,onResize:H})]);return o.elevated===!0&&e.push(Q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),Q("footer",{class:U.value,style:O.value,onFocusin:N},e)}}});const ie=Z({__name:"FinanceRequestFormPage",setup(o){const y=ee(),v=te(),a=le();ae(()=>{y.readSettings(),v.readAllUsers(),a.readFinanceRequestData()});const l=m(()=>!a.financeRequest.newValue||!a.financeRequest.requestMessage||!a.recipientOption.value),s=m(()=>{const d=a.financeRequest.fieldType;return d==="number"?{type:"number",rules:[t=>!!t||"Required",t=>/^\d*\.?\d*$/.test(t.toString())||"Only numbers are allowed"]}:d==="date"?{type:"date",rules:[t=>!!t||"Required"]}:{type:"text",rules:[t=>!!t||"Required"]}});return(d,t)=>(ue(),ne(D,{view:"hHh lpR fFf"},{default:i(()=>[n(k,null,{default:i(()=>[n($,{class:"bg-primary"},{default:i(()=>[n(T,null,{default:i(()=>[oe(" Finance Request Form ")]),_:1})]),_:1})]),_:1}),n(A,null,{default:i(()=>[n(I,null,{default:i(()=>[n(M,{style:{"min-height":"450px"}},{default:i(()=>[n(q,null,{default:i(()=>[n(x,{modelValue:r(y).loggedUser.fullName,"onUpdate:modelValue":t[0]||(t[0]=u=>r(y).loggedUser.fullName=u),options:r(v).userOptions,label:"Requester",disable:"",outlined:"",dense:""},null,8,["modelValue","options"]),n(x,{modelValue:r(a).recipientOption,"onUpdate:modelValue":t[1]||(t[1]=u=>r(a).recipientOption=u),options:r(v).userOptions,label:"Recipient","lazy-rules":"",rules:[u=>!!u||"Required"],outlined:"",dense:""},null,8,["modelValue","options","rules"]),n(b,{modelValue:r(a).financeRequest.fieldName,"onUpdate:modelValue":t[2]||(t[2]=u=>r(a).financeRequest.fieldName=u),label:"Field",disable:"",outlined:"",dense:""},null,8,["modelValue"]),n(q,{horizontal:"",class:"q-gutter-md"},{default:i(()=>[n(b,{modelValue:r(a).financeRequest.originalValue,"onUpdate:modelValue":t[3]||(t[3]=u=>r(a).financeRequest.originalValue=u),label:"Original Value",type:s.value.type,disable:"",outlined:"",dense:"","input-style":s.value.type==="number"?"text-align: right":""},null,8,["modelValue","type","input-style"]),n(S),n(b,{modelValue:r(a).financeRequest.newValue,"onUpdate:modelValue":t[4]||(t[4]=u=>r(a).financeRequest.newValue=u),label:"New Value",type:s.value.type,rules:s.value.rules,outlined:"",dense:"","input-style":s.value.type==="number"?"text-align: right":""},null,8,["modelValue","type","rules","input-style"])]),_:1})]),_:1}),n(q,null,{default:i(()=>[n(b,{modelValue:r(a).financeRequest.requestMessage,"onUpdate:modelValue":t[5]||(t[5]=u=>r(a).financeRequest.requestMessage=u),label:"Request Message","lazy-rules":"",type:"textarea",autogrow:"",rules:[u=>!!u||"Required"],outlined:"",dense:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),n(se,{style:{"background-color":"var(--primary-white)"},class:"text-white"},{default:i(()=>[n(re,null,{default:i(()=>[n(C,{color:"primary",type:"cancel",label:"Cancel",onClick:t[6]||(t[6]=u=>r(a).cancelFinanceRequest())}),n(S),n(C,{color:"primary",type:"submit",label:"Submit Request",onClick:t[7]||(t[7]=u=>r(a).sendFinanceRequest()),disable:l.value},null,8,["disable"])]),_:1})]),_:1})]),_:1}))}});var Ve=Y(ie,[["__scopeId","data-v-58a0db1e"]]);export{Ve as default};
