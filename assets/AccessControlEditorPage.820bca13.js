import{Q as L,a as ie}from"./QToolbar.870596f9.js";import{P as C,u as G,D as p,E as V,F as r,G as o,R as v,U as B,V as U,S as l,W as $,_ as D,X as g,v as M,f as i,h as f,at as fe,au as y,B as me,g as ve,av as pe,j as _e,a7 as P,d as N,Q as R,T as j,$ as z,a0 as ge,L as ye}from"./index.4e31b32e.js";import{Q,a as be}from"./QBadge.63f83281.js";import{Q as ke}from"./QPage.06aee8f4.js";import{Q as w,b,d as H,e as K,f as q,c as W,a as xe,u as Ve,g as he,i as Le}from"./QList.c62b36e7.js";import"./QResizeObserver.94ba5b73.js";const Ce=C({__name:"GroupListCard",setup(n){const t=G(),e=a=>{t.selectedGroup=a,t.selectedLayout={id:"",name:""}};return(a,u)=>(p(),V(w,{style:{width:"16rem"}},{default:r(()=>[o(b,null,{default:r(()=>[o(L,null,{default:r(()=>[v("Groups")]),_:1})]),_:1}),o(H,null,{default:r(()=>[(p(!0),B($,null,U(l(t).groups,c=>(p(),V(K,{key:c.id,clickable:"",onClick:d=>e(c),class:"bg-grey-2 menu",active:l(t).selectedGroup===c,"active-class":"menu-active"},{default:r(()=>[o(q,null,{default:r(()=>[o(W,{class:"text-h5"},{default:r(()=>[v(g(c.name),1)]),_:2},1024)]),_:2},1024),o(q,{side:""},{default:r(()=>[o(Q,{rounded:"",color:"green"},{default:r(()=>[v(g(l(t).groupSummary[c.id].hasAccessTrue),1)]),_:2},1024),o(Q,{rounded:"",color:"red"},{default:r(()=>[v(g(l(t).groupSummary[c.id].hasAccessFalse),1)]),_:2},1024),o(Q,{rounded:"",color:"grey"},{default:r(()=>[v(g(l(t).groupSummary[c.id].hasAccessNull),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}))}});var Ge=D(Ce,[["__scopeId","data-v-e78f2a24"]]);const Se=C({__name:"LayoutsListCard",setup(n){const t=G(),e=(a,u)=>{t.selectedLayout.id=a,t.selectedLayout.name=u;const c=t.selectedGroup.layouts[a];t.selectedGroupLayout=c};return(a,u)=>(p(),V(w,{style:{width:"20rem"}},{default:r(()=>[o(b,null,{default:r(()=>[o(L,null,{default:r(()=>[v("Layouts")]),_:1})]),_:1}),o(H,null,{default:r(()=>[(p(!0),B($,null,U(l(t).selectedGroup.layouts,(c,d)=>(p(),V(K,{key:d,class:"bg-grey-2 menu",clickable:"",onClick:A=>e(d,l(t).layouts&&l(t).layouts[d]?l(t).layouts[d].name:""),active:l(t).selectedLayout.id===d,"active-class":"menu-active"},{default:r(()=>[o(q,null,{default:r(()=>[o(W,{class:"text-h5"},{default:r(()=>[v(g(l(t).layouts&&l(t).layouts[d]?l(t).layouts[d].name:""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}))}});var Ie=D(Se,[["__scopeId","data-v-c019e632"]]);function Qe(n,t){const e=M(null),a=i(()=>n.disable===!0?null:f("span",{ref:e,class:"no-outline",tabindex:-1}));function u(c){const d=t.value;c!==void 0&&c.type.indexOf("key")===0?d!==null&&document.activeElement!==d&&d.contains(document.activeElement)===!0&&d.focus():e.value!==null&&(c===void 0||d!==null&&d.contains(c.target)===!0)&&e.value.focus()}return{refocusTargetEl:a,refocusTarget:u}}var qe={xs:30,sm:35,md:40,lg:50,xl:60};const X={...Ve,...pe,...he,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:n=>n==="tf"||n==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},J=["update:modelValue"];function Y(n,t){const{props:e,slots:a,emit:u,proxy:c}=_e(),{$q:d}=c,A=xe(e,d),T=M(null),{refocusTargetEl:E,refocusTarget:Z}=Qe(e,T),ee=fe(e,qe),k=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),S=i(()=>{const s=y(e.val);return k.value===!0?e.modelValue.findIndex(_=>y(_)===s):-1}),m=i(()=>k.value===!0?S.value>-1:y(e.modelValue)===y(e.trueValue)),h=i(()=>k.value===!0?S.value===-1:y(e.modelValue)===y(e.falseValue)),O=i(()=>m.value===!1&&h.value===!1),te=i(()=>e.disable===!0?-1:e.tabindex||0),le=i(()=>`q-${n} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(A.value===!0?` q-${n}--dark`:"")+(e.dense===!0?` q-${n}--dense`:"")+(e.leftLabel===!0?" reverse":"")),ae=i(()=>{const s=m.value===!0?"truthy":h.value===!0?"falsy":"indet",_=e.color!==void 0&&(e.keepColor===!0||(n==="toggle"?m.value===!0:h.value!==!0))?` text-${e.color}`:"";return`q-${n}__inner relative-position non-selectable q-${n}__inner--${s}${_}`}),oe=i(()=>{const s={type:"checkbox"};return e.name!==void 0&&Object.assign(s,{".checked":m.value,"^checked":m.value===!0?"checked":void 0,name:e.name,value:k.value===!0?e.val:e.trueValue}),s}),ue=Le(oe),ne=i(()=>{const s={tabindex:te.value,role:n==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":O.value===!0?"mixed":m.value===!0?"true":"false"};return e.disable===!0&&(s["aria-disabled"]="true"),s});function I(s){s!==void 0&&(P(s),Z(s)),e.disable!==!0&&u("update:modelValue",se(),s)}function se(){if(k.value===!0){if(m.value===!0){const s=e.modelValue.slice();return s.splice(S.value,1),s}return e.modelValue.concat([e.val])}if(m.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(h.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function re(s){(s.keyCode===13||s.keyCode===32)&&P(s)}function ce(s){(s.keyCode===13||s.keyCode===32)&&I(s)}const de=t(m,O);return Object.assign(c,{toggle:I}),()=>{const s=de();e.disable!==!0&&ue(s,"unshift",` q-${n}__native absolute q-ma-none q-pa-none`);const _=[f("div",{class:ae.value,style:ee.value,"aria-hidden":"true"},s)];E.value!==null&&_.push(E.value);const F=e.label!==void 0?me(a.default,[e.label]):ve(a.default);return F!==void 0&&_.push(f("div",{class:`q-${n}__label q-anchor--skip`},F)),f("div",{ref:T,class:le.value,...ne.value,onClick:I,onKeydown:re,onKeyup:ce},_)}}var Be=N({name:"QToggle",props:{...X,icon:String,iconColor:String},emits:J,setup(n){function t(e,a){const u=i(()=>(e.value===!0?n.checkedIcon:a.value===!0?n.indeterminateIcon:n.uncheckedIcon)||n.icon),c=i(()=>e.value===!0?n.iconColor:null);return()=>[f("div",{class:"q-toggle__track"}),f("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},u.value!==void 0?[f(R,{name:u.value,color:c.value})]:void 0)]}return Y("toggle",t)}});const $e=f("div",{key:"svg",class:"q-checkbox__bg absolute"},[f("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[f("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),f("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var x=N({name:"QCheckbox",props:X,emits:J,setup(n){function t(e,a){const u=i(()=>(e.value===!0?n.checkedIcon:a.value===!0?n.indeterminateIcon:n.uncheckedIcon)||null);return()=>u.value!==null?[f("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[f(R,{class:"q-checkbox__icon",name:u.value})])]:[$e]}return Y("checkbox",t)}});const we=C({__name:"GroupLayoutOptionsCard",setup(n){const t=G();return(e,a)=>j((p(),V(w,{style:{width:"20rem"}},{default:r(()=>[o(b,null,{default:r(()=>[o(L,null,{default:r(()=>[v("Group Layout Options")]),_:1})]),_:1}),o(b,null,{default:r(()=>[o(Be,{modelValue:l(t).selectedGroupLayout.hasAccess,"onUpdate:modelValue":[a[0]||(a[0]=u=>l(t).selectedGroupLayout.hasAccess=u),a[1]||(a[1]=u=>l(t).updateGroupMenu(l(t).selectedGroup.id,l(t).selectedLayout.id,u,l(t).selectedLayout.name))],label:"Has Access"},null,8,["modelValue"])]),_:1}),o(b,null,{default:r(()=>[o(x,{modelValue:l(t).selectedGroupLayout.create,"onUpdate:modelValue":a[2]||(a[2]=u=>l(t).selectedGroupLayout.create=u),label:"Create"},null,8,["modelValue"]),o(x,{modelValue:l(t).selectedGroupLayout.read,"onUpdate:modelValue":a[3]||(a[3]=u=>l(t).selectedGroupLayout.read=u),label:"Read"},null,8,["modelValue"]),o(x,{modelValue:l(t).selectedGroupLayout.update,"onUpdate:modelValue":a[4]||(a[4]=u=>l(t).selectedGroupLayout.update=u),label:"Update"},null,8,["modelValue"]),o(x,{modelValue:l(t).selectedGroupLayout.delete,"onUpdate:modelValue":a[5]||(a[5]=u=>l(t).selectedGroupLayout.delete=u),label:"Delete"},null,8,["modelValue"])]),_:1}),o(b,null,{default:r(()=>[o(x,{modelValue:l(t).selectedGroupLayout.finance,"onUpdate:modelValue":a[6]||(a[6]=u=>l(t).selectedGroupLayout.finance=u),label:"Finance"},null,8,["modelValue"])]),_:1})]),_:1},512)),[[z,l(t).selectedLayout.id!==""]])}}),Ue=C({__name:"AccessControlEditorPage",setup(n){const t=G();return ge(()=>{console.log("Access Control Editor \xBB onBeforeMount"),t.readSettings(),t.groups&&t.groups.length>0&&(t.selectedGroup=t.groups[0])}),(e,a)=>(p(),B($,null,[o(be,null,{default:r(()=>[o(ie,null,{default:r(()=>[o(L,null,{default:r(()=>{var u;return[v("Access Control Editor \xBB "+g((u=l(t).selectedGroup)==null?void 0:u.name)+" \xBB "+g(l(t).selectedLayout.name),1)]}),_:1}),o(ye,{dense:"",icon:"save",label:"Save",onClick:a[0]||(a[0]=u=>l(t).saveGroup()),align:"right"})]),_:1})]),_:1}),o(ke,{class:"flex"},{default:r(()=>[o(Ge),j(o(Ie,null,null,512),[[z,l(t).selectedGroup.id!==""]]),o(we)]),_:1})],64))}});export{Ue as default};
