import{Q as Fe,a as zt}from"./QToolbar.f80bf9b1.js";import{N as J,a as te,u as we,y as R,w as z,F as $,G as j,H as g,P as f,I as c,Y as N,Q as I,a1 as W,Z as Q,K as Se,aL as lt,h as S,f as re,q as je,j as m,ay as Ht,k as _e,ax as Gt,e as dt,L as Qe,X as Wt,W as De,_ as Kt,aM as he,aN as Zt,aO as Jt,aP as Xt,aQ as Yt,V as el,l as ie,O as Ee,o as vt,aw as tl,ah as ll,s as al,t as at,D as ft,a8 as nl,a9 as rl,af as ol,ae as nt,aR as Me,aS as rt,aT as sl,J as mt,aU as il,au as oe,aV as ul}from"./index.05c0533a.js";import{k as gt,e as M,h as Ae,f as ot,d as Le,i as cl,l as dl,m as vl,n as bt,j as fl,b as ml}from"./QSeparator.6b5b6825.js";import{Q as gl,a as bl}from"./QBadge.c7734438.js";import{Q as yl}from"./QPage.6f4e4378.js";import{c as ee,a as Ce,Q as K,b as yt,u as Ie,d as ze}from"./QList.63ce7db4.js";import{a as E,Q as Z,d as Oe}from"./QCheckbox.03e1c0b7.js";import{Q as Sl}from"./QBtnGroup.cb8629a6.js";import"./QResizeObserver.030b8a2f.js";const _l=Se("br",null,null,-1),hl=J({__name:"UserCreateDrawer",setup(e){const t=te(),a=we(),v=R({subject:"",body:""});z(()=>({givenName:t.user.givenName,surname:t.user.surname}),d=>{v.value.subject=`Onboarding ${d.givenName} ${d.surname}`,v.value.body=`Please add ${d.givenName} to the Active Directory.
Name: ${d.givenName}
Surname: ${d.surname}

Thanks

This email has been sent from FileMaker by ${a.user.fullName}`},{immediate:!0});const i=()=>{t.user={givenName:"",surname:"",status:"Pending",groupId:null}};return(d,r)=>($(),j(gt,{modelValue:f(t).createMode,"onUpdate:modelValue":r[5]||(r[5]=u=>f(t).createMode=u),onBeforeShow:r[6]||(r[6]=u=>i()),width:384,bordered:"",overlay:"",side:"right"},{default:g(()=>[c(Z,null,{default:g(()=>[c(E,null,{default:g(()=>[c(Fe,null,{default:g(()=>[N(" Create User ")]),_:1}),c(ee,{class:"text-body2"},{default:g(()=>[N(" A new User will be created and, an email request to add him/her to Active Directory will be send ")]),_:1}),_l,c(I,{dense:"",label:"Create User and Send Request",icon:"person_add",color:"primary",onClick:r[0]||(r[0]=u=>f(t).createUser(v.value)),disable:!f(t).user.givenName||!f(t).user.surname},null,8,["disable"])]),_:1}),c(E,null,{default:g(()=>[c(M,{modelValue:f(t).user.givenName,"onUpdate:modelValue":r[1]||(r[1]=u=>f(t).user.givenName=u),label:"Name",rules:[u=>!!u||"Name is required"]},null,8,["modelValue","rules"]),c(M,{modelValue:f(t).user.surname,"onUpdate:modelValue":r[2]||(r[2]=u=>f(t).user.surname=u),label:"Surname",rules:[u=>!!u||"Surname is required"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),c(Z,{class:"bg-blue-2"},{default:g(()=>[c(E,null,{default:g(()=>[c(Ce,{style:{"background-color":"hsl(200, 50%, 90%)"}},{default:g(()=>[c(K,{avatar:""},{default:g(()=>[c(W,{name:"mail"})]),_:1}),c(K,null,{default:g(()=>[N(Q(f(a).bookingsSupportEmail),1)]),_:1})]),_:1}),c(M,{modelValue:v.value.subject,"onUpdate:modelValue":r[3]||(r[3]=u=>v.value.subject=u),label:"Subject"},null,8,["modelValue"]),c(M,{modelValue:v.value.body,"onUpdate:modelValue":r[4]||(r[4]=u=>v.value.body=u),label:"Body",type:"textarea",autogrow:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),wl=J({__name:"UserUpdateDrawer",setup(e){const t=te(),a=we(),v=R({subject:"",body:""}),i=R(320),d=()=>{t.user=JSON.parse(JSON.stringify(t.selectedUser))},r=()=>{if(t.selectedUser.status!=="Inactive"&&t.user.status==="Inactive"){t.user.groupId=null;const u=t.user.email;t.user.email=null,i.value=720,v.value.subject=`Deauthorize ${t.user.givenName} ${t.user.surname}`,v.value.body=`Please remove ${t.user.givenName} from the Active Directory.
Name: ${t.user.givenName}
Surname: ${t.user.surname}
Email: ${u}
 
Thanks
 
This email has been sent from FileMaker by ${a.user.fullName}`}else i.value=320};return(u,n)=>($(),j(gt,{modelValue:f(t).editMode,"onUpdate:modelValue":n[11]||(n[11]=s=>f(t).editMode=s),onBeforeShow:n[12]||(n[12]=s=>d()),onBeforeHide:n[13]||(n[13]=s=>i.value=320),width:i.value,bordered:"",overlay:"",side:"right",class:"row"},{default:g(()=>[c(Z,{class:"col"},{default:g(()=>[c(E,{horizontal:""},{default:g(()=>[c(Fe,null,{default:g(()=>[N(" Edit User ")]),_:1}),c(I,{dense:"",label:"Save Changes",icon:"save",color:"primary",onClick:n[0]||(n[0]=s=>f(t).updateUser(v.value)),disable:f(t).user.status==="Active"&&!f(t).user.groupId},null,8,["disable"])]),_:1}),c(E,null,{default:g(()=>[c(M,{modelValue:f(t).user.givenName,"onUpdate:modelValue":n[1]||(n[1]=s=>f(t).user.givenName=s),label:"Name"},null,8,["modelValue"]),c(M,{modelValue:f(t).user.surname,"onUpdate:modelValue":n[2]||(n[2]=s=>f(t).user.surname=s),label:"Surname"},null,8,["modelValue"]),c(M,{modelValue:f(t).user.loginName,"onUpdate:modelValue":n[3]||(n[3]=s=>f(t).user.loginName=s),label:"Login"},null,8,["modelValue"]),c(M,{modelValue:f(t).user.email,"onUpdate:modelValue":n[4]||(n[4]=s=>f(t).user.email=s),label:"Email",type:"email",rules:[s=>!s||/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s)||"Invalid email"]},null,8,["modelValue","rules"]),c(M,{modelValue:f(t).user.note,"onUpdate:modelValue":n[5]||(n[5]=s=>f(t).user.note=s),label:"Note",type:"textarea"},null,8,["modelValue"])]),_:1}),c(E,{style:{"background-color":"rgb(197, 198, 198)","border-radius":"4%"}},{default:g(()=>[c(Ae,{modelValue:f(t).user.status,"onUpdate:modelValue":[n[6]||(n[6]=s=>f(t).user.status=s),n[7]||(n[7]=s=>r())],label:"Status",options:f(t).statusOptions},null,8,["modelValue","options"]),c(Ae,{modelValue:f(t).user.groupId,"onUpdate:modelValue":n[8]||(n[8]=s=>f(t).user.groupId=s),"emit-value":"","map-options":"",label:"Group",clearable:"",disable:f(t).user.status!=="Active",options:f(a).groupsOptions},null,8,["modelValue","disable","options"])]),_:1}),f(t).user.status==="Active"&&(f(t).user.groupId===null||f(t).user.groupId==="")?($(),j(E,{key:0},{default:g(()=>[c(ot,{class:"bg-orange text-white",rounded:""},{avatar:g(()=>[c(W,{name:"warning"})]),default:g(()=>[N(" Select a Group before saving changes ")]),_:1})]),_:1})):lt("",!0)]),_:1}),f(t).selectedUser.status!=="Inactive"&&f(t).user.status==="Inactive"?($(),j(Z,{key:0,class:"col"},{default:g(()=>[c(E,null,{default:g(()=>[c(ot,{class:"bg-red text-white",rounded:""},{avatar:g(()=>[c(W,{name:"warning"})]),default:g(()=>[N(" You are going to inactivate this user, the email and the group associated will be removed and an email to unauthorized the user will be sent. ")]),_:1})]),_:1}),c(Z,{class:"bg-blue-2"},{default:g(()=>[c(E,null,{default:g(()=>[c(Ce,{style:{"background-color":"hsl(200, 50%, 90%)"}},{default:g(()=>[c(K,{avatar:""},{default:g(()=>[c(W,{name:"mail"})]),_:1}),c(K,null,{default:g(()=>[N(Q(f(a).bookingsSupportEmail),1)]),_:1})]),_:1}),c(M,{modelValue:v.value.subject,"onUpdate:modelValue":n[9]||(n[9]=s=>v.value.subject=s),label:"Subject"},null,8,["modelValue"]),c(M,{modelValue:v.value.body,"onUpdate:modelValue":n[10]||(n[10]=s=>v.value.body=s),label:"Body",type:"textarea",autogrow:"",hint:"The email can be personalized before sending it."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):lt("",!0)]),_:1},8,["modelValue","width"]))}}),Cl={ratio:[String,Number]};function pl(e,t){return S(()=>{const a=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}const ql=16/9;var St=re({name:"QImg",props:{...Cl,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ql},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:a}){const v=R(e.initialRatio),i=pl(e,v);let d=null,r=!1;const u=[R(null),R(w())],n=R(0),s=R(!1),o=R(!1),y=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),k=S(()=>({width:e.width,height:e.height})),P=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),x=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));z(()=>p(),O);function p(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function w(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function O(q){d!==null&&(clearTimeout(d),d=null),o.value=!1,q===null?(s.value=!1,u[n.value^1].value=w()):s.value=!0,u[n.value].value=q}function A({target:q}){r!==!0&&(d!==null&&(clearTimeout(d),d=null),v.value=q.naturalHeight===0?.5:q.naturalWidth/q.naturalHeight,L(q,1))}function L(q,Y){r===!0||Y===1e3||(q.complete===!0?U(q):d=setTimeout(()=>{d=null,L(q,Y+1)},50))}function U(q){r!==!0&&(n.value=n.value^1,u[n.value].value=null,s.value=!1,o.value=!1,a("load",q.currentSrc||q.src))}function B(q){d!==null&&(clearTimeout(d),d=null),s.value=!1,o.value=!0,u[n.value].value=null,u[n.value^1].value=w(),a("error",q)}function X(q){const Y=u[q].value,D={key:"img_"+q,class:P.value,style:x.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...Y};return n.value===q?(D.class+=" q-img__image--waiting",Object.assign(D,{onLoad:A,onError:B})):D.class+=" q-img__image--loaded",m("div",{class:"q-img__container absolute-full",key:"img"+q},m("img",D))}function pe(){return s.value!==!0?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},_e(t[o.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[m(Gt,{color:e.spinnerColor,size:e.spinnerSize})])}return O(p()),je(()=>{r=!0,d!==null&&(clearTimeout(d),d=null)}),()=>{const q=[];return i.value!==null&&q.push(m("div",{key:"filler",style:i.value})),o.value!==!0&&(u[0].value!==null&&q.push(X(0)),u[1].value!==null&&q.push(X(1))),q.push(m(Ht,{name:"q-transition--fade"},pe)),m("div",{class:y.value,style:k.value,role:"img","aria-label":e.alt},q)}}});const kl=J({__name:"UsersSearch",setup(e){const t=te();return(a,v)=>($(),j(M,{modelValue:f(t).searchTerm,"onUpdate:modelValue":v[1]||(v[1]=i=>f(t).searchTerm=i),type:"search",for:"search",placeholder:"Search\u2026",class:"q-ml-md",clearable:""},{append:g(()=>[f(t).searchTerm?($(),j(W,{key:0,name:"close",class:"cursor-pointer",onClick:v[0]||(v[0]=i=>f(t).searchTerm="")})):($(),j(W,{key:1,name:"search"}))]),_:1},8,["modelValue"]))}});const Pl=J({__name:"UsersList",setup(e){const t=te(),a=dt(),v=i=>{t.selectedUser=i,t.editMode=!1,t.createMode=!1,a.readActivity(Zt.value)};return(i,d)=>($(),j(Z,{style:{width:"20rem"}},{default:g(()=>[c(kl),c(yt,null,{default:g(()=>[($(!0),Qe(De,null,Wt(f(t).filterUsers,r=>($(),j(Ce,{key:r.userId,clickable:"",onClick:u=>v(r),class:"bg-grey-2 menu",active:f(t).selectedUser===r,"active-class":"menu-active"},{default:g(()=>[c(K,{avatar:""},{default:g(()=>[r.avatar?($(),j(he,{key:0},{default:g(()=>[c(St,{src:r.avatar,fit:"contain",ratio:1},null,8,["src"])]),_:2},1024)):($(),j(he,{key:1,style:{"background-color":"rgb(43, 189, 226)"}},{default:g(()=>{var u,n;return[N(Q((((u=r.givenName)==null?void 0:u.charAt(0))||"").toUpperCase())+Q((((n=r.surname)==null?void 0:n.charAt(0))||"").toUpperCase()),1)]}),_:2},1024))]),_:2},1024),c(K,null,{default:g(()=>[c(ee,{class:"text-h4"},{default:g(()=>[N(Q(r.givenName),1)]),_:2},1024),c(ee,{class:"text-h5"},{default:g(()=>[N(Q(r.surname),1)]),_:2},1024)]),_:2},1024),c(K,{side:"",top:""},{default:g(()=>[c(gl,{rounded:"",color:r.status==="Active"?"green":r.status==="Pending"?"orange":"grey"},null,8,["color"])]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1}))}});var xl=Kt(Pl,[["__scopeId","data-v-31219eaa"]]);const Vl=J({__name:"UserAvatar",setup(e){const t=te();return(a,v)=>f(t).selectedUser.avatar?($(),j(he,Jt(Xt({key:0},a.$attrs)),{default:g(()=>[Yt(a.$slots,"img"),c(St,{src:f(t).selectedUser.avatar,fit:"contain",ratio:1},null,8,["src"])]),_:3},16)):($(),j(he,{key:1,style:{"background-color":"rgb(43, 189, 226)"}},{default:g(()=>{var i,d;return[N(Q((((i=f(t).selectedUser.givenName)==null?void 0:i.charAt(0))||"").toUpperCase())+Q((((d=f(t).selectedUser.surname)==null?void 0:d.charAt(0))||"").toUpperCase()),1)]}),_:1}))}}),Ul=J({__name:"UserInfoCard",setup(e){const t=te(),a=we();return(v,i)=>($(),j(Z,{style:{width:"20rem"}},{default:g(()=>[c(E,{class:"row"},{default:g(()=>[c(Le),c(cl,{dark:"",size:"md",label:f(t).selectedUser.status,color:f(t).selectedUser.status==="Active"?"green":f(t).selectedUser.status==="Pending"?"orange":"grey"},null,8,["label","color"])]),_:1}),c(E,{class:"column items-center"},{default:g(()=>[c(Vl,{size:"120px"})]),_:1}),c(E,null,{default:g(()=>[c(ee,{class:"text-h3 text-center"},{default:g(()=>{var d;return[N(Q((d=f(t).selectedUser)==null?void 0:d.givenName),1)]}),_:1}),c(ee,{class:"text-h4 text-center"},{default:g(()=>{var d;return[N(Q((d=f(t).selectedUser)==null?void 0:d.surname),1)]}),_:1})]),_:1}),c(E,{class:"bg-blue-2"},{default:g(()=>[c(Ce,null,{default:g(()=>[c(K,{avatar:""},{default:g(()=>[c(ee,null,{default:g(()=>[N("Group")]),_:1}),c(ee,{class:"text-h4"},{default:g(()=>[N(Q(f(t).selectedUser.groupId?f(a).groups[f(t).selectedUser.groupId].name:"No Group"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var Tl=re({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:a}){const v=ie(),{proxy:{$q:i}}=v,d=r=>{a("click",r)};return()=>{if(e.props===void 0)return m("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:d},_e(t.default));let r,u;const n=v.vnode.key;if(n){if(r=e.props.colsMap[n],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const o=r.align==="right"?"unshift":"push";u=el(t.default,[]),u[o](m(W,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else u=_e(t.default);const s={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:o=>{r.sortable===!0&&e.props.sort(r),d(o)}};return m("th",s,u)}}});const Rl=["horizontal","vertical","cell","none"];var $l=re({name:"QMarkupTable",props:{...Ie,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Rl.includes(e)}},setup(e,{slots:t}){const a=ie(),v=ze(e,a.proxy.$q),i=S(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(v.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>m("div",{class:i.value},[m("table",{class:"q-table"},_e(t.default))])}});function _t(e,t){return m("div",e,[m("table",{class:"q-table"},t)])}const Bl={list:yt,table:$l},Nl=["list","table","__qtable"];var Ol=re({name:"QVirtualScroll",props:{...dl,type:{type:String,default:"list",validator:e=>Nl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:a}){let v;const i=R(null),d=S(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:u,padVirtualScroll:n,onVirtualScrollEvt:s}=vl({virtualScrollLength:d,getVirtualScrollTarget:x,getVirtualScrollEl:P}),o=S(()=>{if(d.value===0)return[];const A=(L,U)=>({index:r.value.from+U,item:L});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(A):e.itemsFn(r.value.from,r.value.to-r.value.from).map(A)}),y=S(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),k=S(()=>e.scrollTarget!==void 0?{}:{tabindex:0});z(d,()=>{u()}),z(()=>e.scrollTarget,()=>{w(),p()});function P(){return i.value.$el||i.value}function x(){return v}function p(){v=al(P(),e.scrollTarget),v.addEventListener("scroll",s,at.passive)}function w(){v!==void 0&&(v.removeEventListener("scroll",s,at.passive),v=void 0)}function O(){let A=n(e.type==="list"?"div":"tbody",o.value.map(t.default));return t.before!==void 0&&(A=t.before().concat(A)),ft(t.after,A)}return Ee(()=>{u()}),vt(()=>{p()}),tl(()=>{p()}),ll(()=>{w()}),je(()=>{w()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?_t({ref:i,class:"q-table__middle "+y.value},O()):m(Bl[e.type],{...a,ref:i,class:[a.class,y.value],...k.value},O)}}});const Ml={xs:2,sm:4,md:6,lg:10,xl:14};function st(e,t,a){return{transform:t===!0?`translateX(${a.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Al=re({name:"QLinearProgress",props:{...Ie,...nl,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:a}=ie(),v=ze(e,a.$q),i=rl(e,Ml),d=S(()=>e.indeterminate===!0||e.query===!0),r=S(()=>e.reverse!==e.query),u=S(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),n=S(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),s=S(()=>st(e.buffer!==void 0?e.buffer:1,r.value,a.$q)),o=S(()=>`with${e.instantFeedback===!0?"out":""}-transition`),y=S(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${o.value} q-linear-progress__track--${v.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),k=S(()=>st(d.value===!0?1:e.value,r.value,a.$q)),P=S(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${o.value} q-linear-progress__model--${d.value===!0?"in":""}determinate`),x=S(()=>({width:`${e.value*100}%`})),p=S(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${o.value}`);return()=>{const w=[m("div",{class:y.value,style:s.value}),m("div",{class:P.value,style:k.value})];return e.stripe===!0&&d.value===!1&&w.push(m("div",{class:p.value,style:x.value})),m("div",{class:n.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ft(t.default,w))}}});let se=0;const Ll={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Fl=["update:fullscreen","fullscreen"];function jl(){const e=ie(),{props:t,emit:a,proxy:v}=e;let i,d,r;const u=R(!1);ol(e)===!0&&z(()=>v.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&o()}),z(()=>t.fullscreen,y=>{u.value!==y&&n()}),z(u,y=>{a("update:fullscreen",y),a("fullscreen",y)});function n(){u.value===!0?o():s()}function s(){u.value!==!0&&(u.value=!0,r=v.$el.parentNode,r.replaceChild(d,v.$el),document.body.appendChild(v.$el),se++,se===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:o},nt.add(i))}function o(){u.value===!0&&(i!==void 0&&(nt.remove(i),i=void 0),r.replaceChild(v.$el,d),u.value=!1,se=Math.max(0,se-1),se===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),v.$el.scrollIntoView!==void 0&&setTimeout(()=>{v.$el.scrollIntoView()})))}return Ee(()=>{d=document.createElement("span")}),vt(()=>{t.fullscreen===!0&&s()}),je(o),Object.assign(v,{toggleFullscreen:n,setFullscreen:s,exitFullscreen:o}),{inFullscreen:u,toggleFullscreen:n}}function Ql(e,t){return new Date(e)-new Date(t)}const Dl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function El(e,t,a,v){const i=S(()=>{const{sortBy:u}=t.value;return u&&a.value.find(n=>n.name===u)||null}),d=S(()=>e.sortMethod!==void 0?e.sortMethod:(u,n,s)=>{const o=a.value.find(P=>P.name===n);if(o===void 0||o.field===void 0)return u;const y=s===!0?-1:1,k=typeof o.field=="function"?P=>o.field(P):P=>P[o.field];return u.sort((P,x)=>{let p=k(P),w=k(x);return o.rawSort!==void 0?o.rawSort(p,w,P,x)*y:p==null?-1*y:w==null?1*y:o.sort!==void 0?o.sort(p,w,P,x)*y:Me(p)===!0&&Me(w)===!0?(p-w)*y:rt(p)===!0&&rt(w)===!0?Ql(p,w)*y:typeof p=="boolean"&&typeof w=="boolean"?(p-w)*y:([p,w]=[p,w].map(O=>(O+"").toLocaleString().toLowerCase()),p<w?-1*y:p===w?0:y)})});function r(u){let n=e.columnSortOrder;if(sl(u)===!0)u.sortOrder&&(n=u.sortOrder),u=u.name;else{const y=a.value.find(k=>k.name===u);y!==void 0&&y.sortOrder&&(n=y.sortOrder)}let{sortBy:s,descending:o}=t.value;s!==u?(s=u,o=n==="da"):e.binaryStateSort===!0?o=!o:o===!0?n==="ad"?s=null:o=!1:n==="ad"?o=!0:s=null,v({sortBy:s,descending:o,page:1})}return{columnToSort:i,computedSortMethod:d,sort:r}}const Il={filter:[String,Object],filterMethod:Function};function zl(e,t){const a=S(()=>e.filterMethod!==void 0?e.filterMethod:(v,i,d,r)=>{const u=i?i.toLowerCase():"";return v.filter(n=>d.some(s=>{const o=r(s,n)+"";return(o==="undefined"||o==="null"?"":o.toLowerCase()).indexOf(u)!==-1}))});return z(()=>e.filter,()=>{mt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function Hl(e,t){for(const a in t)if(t[a]!==e[a])return!1;return!0}function it(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Gl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Wl(e,t){const{props:a,emit:v}=e,i=R(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length!==0?a.rowsPerPageOptions[0]:5},a.pagination)),d=S(()=>{const o=a["onUpdate:pagination"]!==void 0?{...i.value,...a.pagination}:i.value;return it(o)}),r=S(()=>d.value.rowsNumber!==void 0);function u(o){n({pagination:o,filter:a.filter})}function n(o={}){mt(()=>{v("request",{pagination:o.pagination||d.value,filter:o.filter||a.filter,getCellValue:t})})}function s(o,y){const k=it({...d.value,...o});if(Hl(d.value,k)===!0){r.value===!0&&y===!0&&u(k);return}if(r.value===!0){u(k);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?v("update:pagination",k):i.value=k}return{innerPagination:i,computedPagination:d,isServerSide:r,requestServerInteraction:n,setPagination:s}}function Kl(e,t,a,v,i,d){const{props:r,emit:u,proxy:{$q:n}}=e,s=S(()=>v.value===!0?a.value.rowsNumber||0:d.value),o=S(()=>{const{page:U,rowsPerPage:B}=a.value;return(U-1)*B}),y=S(()=>{const{page:U,rowsPerPage:B}=a.value;return U*B}),k=S(()=>a.value.page===1),P=S(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(s.value/a.value.rowsPerPage))),x=S(()=>y.value===0?!0:a.value.page>=P.value),p=S(()=>(r.rowsPerPageOptions.includes(t.value.rowsPerPage)?r.rowsPerPageOptions:[t.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(B=>({label:B===0?n.lang.table.allRows:""+B,value:B})));z(P,(U,B)=>{if(U===B)return;const X=a.value.page;U&&!X?i({page:1}):U<X&&i({page:U})});function w(){i({page:1})}function O(){const{page:U}=a.value;U>1&&i({page:U-1})}function A(){const{page:U,rowsPerPage:B}=a.value;y.value>0&&U*B<s.value&&i({page:U+1})}function L(){i({page:P.value})}return r["onUpdate:pagination"]!==void 0&&u("update:pagination",{...a.value}),{firstRowIndex:o,lastRowIndex:y,isFirstPage:k,isLastPage:x,pagesNumber:P,computedRowsPerPageOptions:p,computedRowsNumber:s,firstPage:w,prevPage:O,nextPage:A,lastPage:L}}const Zl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Jl=["update:selected","selection"];function Xl(e,t,a,v){const i=S(()=>{const x={};return e.selected.map(v.value).forEach(p=>{x[p]=!0}),x}),d=S(()=>e.selection!=="none"),r=S(()=>e.selection==="single"),u=S(()=>e.selection==="multiple"),n=S(()=>a.value.length!==0&&a.value.every(x=>i.value[v.value(x)]===!0)),s=S(()=>n.value!==!0&&a.value.some(x=>i.value[v.value(x)]===!0)),o=S(()=>e.selected.length);function y(x){return i.value[x]===!0}function k(){t("update:selected",[])}function P(x,p,w,O){t("selection",{rows:p,added:w,keys:x,evt:O});const A=r.value===!0?w===!0?p:[]:w===!0?e.selected.concat(p):e.selected.filter(L=>x.includes(v.value(L))===!1);t("update:selected",A)}return{hasSelectionMode:d,singleSelection:r,multipleSelection:u,allRowsSelected:n,someRowsSelected:s,rowsSelectedNumber:o,isRowSelected:y,clearSelection:k,updateSelection:P}}function ut(e){return Array.isArray(e)?e.slice():[]}const Yl={expanded:Array},ea=["update:expanded"];function ta(e,t){const a=R(ut(e.expanded));z(()=>e.expanded,r=>{a.value=ut(r)});function v(r){return a.value.includes(r)}function i(r){e.expanded!==void 0?t("update:expanded",r):a.value=r}function d(r,u){const n=a.value.slice(),s=n.indexOf(r);u===!0?s===-1&&(n.push(r),i(n)):s!==-1&&(n.splice(s,1),i(n))}return{isRowExpanded:v,setExpanded:i,updateExpanded:d}}const la={visibleColumns:Array};function aa(e,t,a){const v=S(()=>{if(e.columns!==void 0)return e.columns;const u=e.rows[0];return u!==void 0?Object.keys(u).map(n=>({name:n,label:n.toUpperCase(),field:n,align:Me(u[n])?"right":"left",sortable:!0})):[]}),i=S(()=>{const{sortBy:u,descending:n}=t.value;return(e.visibleColumns!==void 0?v.value.filter(o=>o.required===!0||e.visibleColumns.includes(o.name)===!0):v.value).map(o=>{const y=o.align||"right",k=`text-${y}`;return{...o,align:y,__iconClass:`q-table__sort-icon q-table__sort-icon--${y}`,__thClass:k+(o.headerClasses!==void 0?" "+o.headerClasses:"")+(o.sortable===!0?" sortable":"")+(o.name===u?` sorted ${n===!0?"sort-desc":""}`:""),__tdStyle:o.style!==void 0?typeof o.style!="function"?()=>o.style:o.style:()=>null,__tdClass:o.classes!==void 0?typeof o.classes!="function"?()=>k+" "+o.classes:P=>k+" "+o.classes(P):()=>k}})}),d=S(()=>{const u={};return i.value.forEach(n=>{u[n.name]=n}),u}),r=S(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(a.value===!0?1:0));return{colList:v,computedCols:i,computedColsMap:d,computedColspan:r}}const ye="q-table__bottom row items-center",ht={};bt.forEach(e=>{ht[e]={}});var na=re({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...ht,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ie,...Ll,...la,...Il,...Gl,...Yl,...Zl,...Dl},emits:["request","virtualScroll",...Fl,...ea,...Jl],setup(e,{slots:t,emit:a}){const v=ie(),{proxy:{$q:i}}=v,d=ze(e,i),{inFullscreen:r,toggleFullscreen:u}=jl(),n=S(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),s=R(null),o=R(null),y=S(()=>e.grid!==!0&&e.virtualScroll===!0),k=S(()=>" q-table__card"+(d.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),P=S(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":k.value)+(d.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),x=S(()=>P.value+(e.loading===!0?" q-table--loading":""));z(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+P.value,()=>{y.value===!0&&o.value!==null&&o.value.reset()});const{innerPagination:p,computedPagination:w,isServerSide:O,requestServerInteraction:A,setPagination:L}=Wl(v,ae),{computedFilterMethod:U}=zl(e,L),{isRowExpanded:B,setExpanded:X,updateExpanded:pe}=ta(e,a),q=S(()=>{let l=e.rows;if(O.value===!0||l.length===0)return l;const{sortBy:b,descending:_}=w.value;return e.filter&&(l=U.value(l,e.filter,H.value,ae)),kt.value!==null&&(l=Pt.value(e.rows===l?l.slice():l,b,_)),l}),Y=S(()=>q.value.length),D=S(()=>{let l=q.value;if(O.value===!0)return l;const{rowsPerPage:b}=w.value;return b!==0&&(ce.value===0&&e.rows!==l?l.length>de.value&&(l=l.slice(0,de.value)):l=l.slice(ce.value,de.value)),l}),{hasSelectionMode:le,singleSelection:wt,multipleSelection:He,allRowsSelected:Ct,someRowsSelected:Ge,rowsSelectedNumber:qe,isRowSelected:ke,clearSelection:pt,updateSelection:ue}=Xl(e,a,D,n),{colList:qt,computedCols:H,computedColsMap:We,computedColspan:Ke}=aa(e,w,le),{columnToSort:kt,computedSortMethod:Pt,sort:Pe}=El(e,w,qt,L),{firstRowIndex:ce,lastRowIndex:de,isFirstPage:xe,isLastPage:Ve,pagesNumber:ve,computedRowsPerPageOptions:xt,computedRowsNumber:fe,firstPage:Ue,prevPage:Te,nextPage:Re,lastPage:$e}=Kl(v,p,w,O,L,Y),Vt=S(()=>D.value.length===0),Ut=S(()=>{const l={};return bt.forEach(b=>{l[b]=e[b]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function Tt(){y.value===!0&&o.value.reset()}function Rt(){if(e.grid===!0)return Et();const l=e.hideHeader!==!0?et:null;if(y.value===!0){const _=t["top-row"],h=t["bottom-row"],C={default:T=>Je(T.item,t.body,T.index)};if(_!==void 0){const T=m("tbody",_({cols:H.value}));C.before=l===null?()=>T:()=>[l()].concat(T)}else l!==null&&(C.before=l);return h!==void 0&&(C.after=()=>m("tbody",h({cols:H.value}))),m(Ol,{ref:o,class:e.tableClass,style:e.tableStyle,...Ut.value,scrollTarget:e.virtualScrollTarget,items:D.value,type:"__qtable",tableColspan:Ke.value,onVirtualScroll:Bt},C)}const b=[Nt()];return l!==null&&b.unshift(l()),_t({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},b)}function $t(l,b){if(o.value!==null){o.value.scrollTo(l,b);return}l=parseInt(l,10);const _=s.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(_!==null){const h=s.value.querySelector(".q-table__middle.scroll"),C=_.offsetTop-e.virtualScrollStickySizeStart,T=C<h.scrollTop?"decrease":"increase";h.scrollTop=C,a("virtualScroll",{index:l,from:0,to:p.value.rowsPerPage-1,direction:T})}}function Bt(l){a("virtualScroll",l)}function Ze(){return[m(Al,{class:"q-table__linear-progress",color:e.color,dark:d.value,indeterminate:!0,trackColor:"transparent"})]}function Je(l,b,_){const h=n.value(l),C=ke(h);if(b!==void 0)return b(Xe({key:h,row:l,pageIndex:_,__trClass:C?"selected":""}));const T=t["body-cell"],V=H.value.map(F=>{const ge=t[`body-cell-${F.name}`],be=ge!==void 0?ge:T;return be!==void 0?be(Ot({key:h,row:l,pageIndex:_,col:F})):m("td",{class:F.__tdClass(l),style:F.__tdStyle(l)},ae(F,l))});if(le.value===!0){const F=t["body-selection"],ge=F!==void 0?F(Mt({key:h,row:l,pageIndex:_})):[m(Oe,{modelValue:C,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(be,It)=>{ue([h],[l],be,It)}})];V.unshift(m("td",{class:"q-table--col-auto-width"},ge))}const G={key:h,class:{selected:C}};return e.onRowClick!==void 0&&(G.class["cursor-pointer"]=!0,G.onClick=F=>{a("RowClick",F,l,_)}),e.onRowDblclick!==void 0&&(G.class["cursor-pointer"]=!0,G.onDblclick=F=>{a("RowDblclick",F,l,_)}),e.onRowContextmenu!==void 0&&(G.class["cursor-pointer"]=!0,G.onContextmenu=F=>{a("RowContextmenu",F,l,_)}),m("tr",G,V)}function Nt(){const l=t.body,b=t["top-row"],_=t["bottom-row"];let h=D.value.map((C,T)=>Je(C,l,T));return b!==void 0&&(h=b({cols:H.value}).concat(h)),_!==void 0&&(h=h.concat(_({cols:H.value}))),m("tbody",h)}function Xe(l){return Be(l),l.cols=l.cols.map(b=>oe({...b},"value",()=>ae(b,l.row))),l}function Ot(l){return Be(l),oe(l,"value",()=>ae(l.col,l.row)),l}function Mt(l){return Be(l),l}function Be(l){Object.assign(l,{cols:H.value,colsMap:We.value,sort:Pe,rowIndex:ce.value+l.pageIndex,color:e.color,dark:d.value,dense:e.dense}),le.value===!0&&oe(l,"selected",()=>ke(l.key),(b,_)=>{ue([l.key],[l.row],b,_)}),oe(l,"expand",()=>B(l.key),b=>{pe(l.key,b)})}function ae(l,b){const _=typeof l.field=="function"?l.field(b):b[l.field];return l.format!==void 0?l.format(_,b):_}const ne=S(()=>({pagination:w.value,pagesNumber:ve.value,isFirstPage:xe.value,isLastPage:Ve.value,firstPage:Ue,prevPage:Te,nextPage:Re,lastPage:$e,inFullscreen:r.value,toggleFullscreen:u}));function At(){const l=t.top,b=t["top-left"],_=t["top-right"],h=t["top-selection"],C=le.value===!0&&h!==void 0&&qe.value>0,T="q-table__top relative-position row items-center";if(l!==void 0)return m("div",{class:T},[l(ne.value)]);let V;if(C===!0?V=h(ne.value).slice():(V=[],b!==void 0?V.push(m("div",{class:"q-table__control"},[b(ne.value)])):e.title&&V.push(m("div",{class:"q-table__control"},[m("div",{class:["q-table__title",e.titleClass]},e.title)]))),_!==void 0&&(V.push(m("div",{class:"q-table__separator col"})),V.push(m("div",{class:"q-table__control"},[_(ne.value)]))),V.length!==0)return m("div",{class:T},V)}const Ye=S(()=>Ge.value===!0?null:Ct.value);function et(){const l=Lt();return e.loading===!0&&t.loading===void 0&&l.push(m("tr",{class:"q-table__progress"},[m("th",{class:"relative-position",colspan:Ke.value},Ze())])),m("thead",l)}function Lt(){const l=t.header,b=t["header-cell"];if(l!==void 0)return l(Ne({header:!0})).slice();const _=H.value.map(h=>{const C=t[`header-cell-${h.name}`],T=C!==void 0?C:b,V=Ne({col:h});return T!==void 0?T(V):m(Tl,{key:h.name,props:V},()=>h.label)});if(wt.value===!0&&e.grid!==!0)_.unshift(m("th",{class:"q-table--col-auto-width"}," "));else if(He.value===!0){const h=t["header-selection"],C=h!==void 0?h(Ne({})):[m(Oe,{color:e.color,modelValue:Ye.value,dark:d.value,dense:e.dense,"onUpdate:modelValue":tt})];_.unshift(m("th",{class:"q-table--col-auto-width"},C))}return[m("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},_)]}function Ne(l){return Object.assign(l,{cols:H.value,sort:Pe,colsMap:We.value,color:e.color,dark:d.value,dense:e.dense}),He.value===!0&&oe(l,"selected",()=>Ye.value,tt),l}function tt(l){Ge.value===!0&&(l=!1),ue(D.value.map(n.value),D.value,l)}const me=S(()=>{const l=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?l.reverse():l});function Ft(){if(e.hideBottom===!0)return;if(Vt.value===!0){if(e.hideNoData===!0)return;const _=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,h=t["no-data"],C=h!==void 0?[h({message:_,icon:i.iconSet.table.warning,filter:e.filter})]:[m(W,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),_];return m("div",{class:ye+" q-table__bottom--nodata"},C)}const l=t.bottom;if(l!==void 0)return m("div",{class:ye},[l(ne.value)]);const b=e.hideSelectedBanner!==!0&&le.value===!0&&qe.value>0?[m("div",{class:"q-table__control"},[m("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(qe.value)])])]:[];if(e.hidePagination!==!0)return m("div",{class:ye+" justify-end"},Qt(b));if(b.length!==0)return m("div",{class:ye},b)}function jt(l){L({page:1,rowsPerPage:l.value})}function Qt(l){let b;const{rowsPerPage:_}=w.value,h=e.paginationLabel||i.lang.table.pagination,C=t.pagination,T=e.rowsPerPageOptions.length>1;if(l.push(m("div",{class:"q-table__separator col"})),T===!0&&l.push(m("div",{class:"q-table__control"},[m("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),m(Ae,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:_,options:xt.value,displayValue:_===0?i.lang.table.allRows:_,dark:d.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":jt})])),C!==void 0)b=C(ne.value);else if(b=[m("span",_!==0?{class:"q-table__bottom-item"}:{},[_?h(ce.value+1,Math.min(de.value,fe.value),fe.value):h(1,Y.value,fe.value)])],_!==0&&ve.value>1){const V={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(V.size="sm"),ve.value>2&&b.push(m(I,{key:"pgFirst",...V,icon:me.value[0],disable:xe.value,onClick:Ue})),b.push(m(I,{key:"pgPrev",...V,icon:me.value[1],disable:xe.value,onClick:Te}),m(I,{key:"pgNext",...V,icon:me.value[2],disable:Ve.value,onClick:Re})),ve.value>2&&b.push(m(I,{key:"pgLast",...V,icon:me.value[3],disable:Ve.value,onClick:$e}))}return l.push(m("div",{class:"q-table__control"},b)),l}function Dt(){const l=e.gridHeader===!0?[m("table",{class:"q-table"},[et()])]:e.loading===!0&&t.loading===void 0?Ze():void 0;return m("div",{class:"q-table__middle"},l)}function Et(){const l=t.item!==void 0?t.item:b=>{const _=b.cols.map(C=>m("div",{class:"q-table__grid-item-row"},[m("div",{class:"q-table__grid-item-title"},[C.label]),m("div",{class:"q-table__grid-item-value"},[C.value])]));if(le.value===!0){const C=t["body-selection"],T=C!==void 0?C(b):[m(Oe,{modelValue:b.selected,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(V,G)=>{ue([b.key],[b.row],V,G)}})];_.unshift(m("div",{class:"q-table__grid-item-row"},T),m(fl,{dark:d.value}))}const h={class:["q-table__grid-item-card"+k.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=C=>{a("RowClick",C,b.row,b.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=C=>{a("RowDblclick",C,b.row,b.pageIndex)})),m("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(b.selected===!0?" q-table__grid-item--selected":"")},[m("div",h,_)])};return m("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},D.value.map((b,_)=>l(Xe({key:n.value(b),row:b,pageIndex:_}))))}return Object.assign(v.proxy,{requestServerInteraction:A,setPagination:L,firstPage:Ue,prevPage:Te,nextPage:Re,lastPage:$e,isRowSelected:ke,clearSelection:pt,isRowExpanded:B,setExpanded:X,sort:Pe,resetVirtualScroll:Tt,scrollTo:$t,getCellValue:ae}),il(v.proxy,{filteredSortedRows:()=>q.value,computedRows:()=>D.value,computedRowsNumber:()=>fe.value}),()=>{const l=[At()],b={ref:s,class:x.value};return e.grid===!0?l.push(Dt()):Object.assign(b,{class:[b.class,e.cardClass],style:e.cardStyle}),l.push(Rt(),Ft()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),m("div",b,l)}}});function ct(e){setTimeout(()=>{window.URL.revokeObjectURL(e.href)},1e4),e.remove()}function ra(e,t,a={}){const{mimeType:v,byteOrderMark:i,encoding:d}=typeof a=="string"?{mimeType:a}:a,r=d!==void 0?new TextEncoder(d).encode([t]):t,u=i!==void 0?[i,r]:[r],n=new Blob(u,{type:v||"application/octet-stream"}),s=document.createElement("a");s.href=window.URL.createObjectURL(n),s.setAttribute("download",e),typeof s.download=="undefined"&&s.setAttribute("target","_blank"),s.classList.add("hidden"),s.style.position="fixed",document.body.appendChild(s);try{return s.click(),ct(s),!0}catch(o){return ct(s),o}}const oa=J({__name:"UserActivityTable",setup(e){const t=()=>{const n=new Blob(["some content"],{type:"application/octet-stream"}),s=URL.createObjectURL(n);window.open(s,"_blank"),console.log(s)},a=dt(),v=["date","time","performerUserFullName","relatedUserFullName","action","description"],i=R(""),d=R("");function r(n,s,o){let y=s!==void 0?s(n,o):n;return y=y==null?"":String(y),y=y.split('"').join('""'),`"${y}"`}function u(){const n=[a.activityColumns.map(o=>r(o.label,void 0,void 0))].concat(a.activity.map(o=>a.activityColumns.map(y=>r(typeof y.field=="function"?y.field(o):o[y.field===void 0?y.name:y.field],y.format,o)).join(","))).join(`\r
`);ra("table-export.csv",n,"text/csv")!==!0&&ul({message:"Browser denied file download...",color:"negative",icon:"warning"})}return(n,s)=>($(),Qe(De,null,[c(Z,null,{default:g(()=>[c(na,{title:"Activity",rows:f(a).activity,columns:f(a).activityColumns,"row-key":"activityId","visible-columns":v,filter:f(a).searchTerm,"rows-per-page-options":[-1],"hide-pagination":"","virtual-scroll":"",dense:"",class:"header-table",style:{margin:"0.4rem"}},{top:g(()=>[c(Sl,{flat:""},{default:g(()=>[c(I,null,{default:g(()=>[c(M,{dense:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),label:"Date Start",type:"date"},null,8,["modelValue"])]),_:1}),c(I,{label:"doanload",onClick:t}),c(M,{dense:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o),label:"Date End",type:"date"},null,8,["modelValue"])]),_:1}),c(Le),c(I,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:u}),c(Le),c(M,{dense:"",debounce:"300",modelValue:f(a).searchTerm,"onUpdate:modelValue":s[2]||(s[2]=o=>f(a).searchTerm=o),clearable:""},{append:g(()=>[c(W,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter"])]),_:1}),Se("pre",null,"  activityStore.activity: "+Q(f(a).activity)+`
`,1)],64))}}),sa={class:"row"},ia={class:"col-9"},Sa=J({__name:"UsersPage",setup(e){const t=te(),a=we();return Ee(()=>{a.readSettings(),t.readAllUsers()}),(v,i)=>($(),Qe(De,null,[c(hl),c(wl),c(yl,{class:"row-container"},{default:g(()=>[c(bl,null,{default:g(()=>[c(zt,null,{default:g(()=>[c(Fe,null,{default:g(()=>[N("Users \xBB "+Q(f(t).selectedUser.givenName)+" "+Q(f(t).selectedUser.surname),1)]),_:1}),c(ml,null,{default:g(()=>[c(I,{icon:f(t).createMode?"close":"add",label:f(t).createMode?"Cancel Create":"Create User",onClick:i[0]||(i[0]=d=>{(f(t).createMode=!f(t).createMode)&&(f(t).editMode=!1)})},null,8,["icon","label"]),c(I,{icon:f(t).editMode?"close":"edit",label:f(t).editMode?"Cancel Edit":"Edit User",onClick:i[1]||(i[1]=d=>{(f(t).editMode=!f(t).editMode)&&(f(t).createMode=!1)})},null,8,["icon","label"])]),_:1})]),_:1})]),_:1}),Se("div",sa,[c(xl),Se("div",ia,[c(Ul),c(oa)])])]),_:1})],64))}});export{Sa as default};
