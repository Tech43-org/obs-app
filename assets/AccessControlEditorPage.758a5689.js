import{Q as L,a as ie}from"./QToolbar.18341d49.js";import{M as G,u as S,E as g,F as h,G as c,H as o,X as p,K as w,W as N,O as l,V as A,_ as P,Y as _,x as U,g as i,h as f,av as fe,aw as y,C as me,j as ve,ax as pe,k as _e,T as M,e as D,a0 as j,a3 as H,a6 as R,N as ge,Q as be,J as ye}from"./index.236a9108.js";import{Q as B,a as ke}from"./QBadge.cce6e533.js";import{Q as xe}from"./QPage.f330f5cc.js";import{Q as T,a as k,u as Ve,c as he}from"./QCard.2307763e.js";import{b as z,a as K,Q as $,c as J,d as Ce,u as Le}from"./QList.f4b6fb63.js";import{_ as Ge}from"./MainMenuList.3a188c69.js";import"./QResizeObserver.d6b87b2d.js";const Se=G({__name:"GroupListCard",setup(s){const t=S();return(e,u)=>(g(),h(T,{style:{width:"16rem"}},{default:c(()=>[o(k,null,{default:c(()=>[o(L,null,{default:c(()=>[p("Groups")]),_:1})]),_:1}),o(z,null,{default:c(()=>[(g(!0),w(A,null,N(l(t).groups,(a,n)=>{var d;return g(),h(K,{key:n,clickable:"",onClick:m=>{l(t).selectedGroup={...a,id:n},l(t).selectedLayout={id:"",name:""}},class:"bg-grey-2 menu",active:((d=l(t).selectedGroup)==null?void 0:d.id)===n,"active-class":"menu-active"},{default:c(()=>[o($,null,{default:c(()=>[o(J,{class:"text-h5"},{default:c(()=>[p(_(a.name),1)]),_:2},1024)]),_:2},1024),o($,{side:""},{default:c(()=>[o(B,{rounded:"",color:"green"},{default:c(()=>[p(_(l(t).groupSummary[n].hasAccessTrue),1)]),_:2},1024),o(B,{rounded:"",color:"red"},{default:c(()=>[p(_(l(t).groupSummary[n].hasAccessFalse),1)]),_:2},1024),o(B,{rounded:"",color:"grey"},{default:c(()=>[p(_(l(t).groupSummary[n].hasAccessNull),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"])}),128))]),_:1})]),_:1}))}});var Ie=P(Se,[["__scopeId","data-v-0e888d41"]]);const Qe=G({__name:"LayoutsListCard",setup(s){const t=S(),e=(u,a)=>{var d;t.selectedLayout.id=u,t.selectedLayout.name=a;const n=(d=t.selectedGroup)==null?void 0:d.layouts[u];t.selectedGroupLayout=n!=null?n:{hasAccess:null,create:!1,read:!1,update:!1,delete:!1,finance:!1}};return(u,a)=>(g(),h(T,{style:{width:"20rem"}},{default:c(()=>[o(k,null,{default:c(()=>[o(L,null,{default:c(()=>[p("Layouts")]),_:1})]),_:1}),o(z,null,{default:c(()=>{var n;return[(g(!0),w(A,null,N((n=l(t).selectedGroup)==null?void 0:n.layouts,(d,m)=>(g(),h(K,{key:m,class:"bg-grey-2 menu",clickable:"",onClick:I=>e(m,l(t).layouts&&l(t).layouts[m]?l(t).layouts[m].name:""),active:l(t).selectedLayout.id===m,"active-class":"menu-active"},{default:c(()=>[o($,null,{default:c(()=>[o(J,{class:"text-h5"},{default:c(()=>[p(_(l(t).layouts&&l(t).layouts[m]?l(t).layouts[m].name:""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]}),_:1})]),_:1}))}});var qe=P(Qe,[["__scopeId","data-v-306fe4a7"]]);function Be(s,t){const e=U(null),u=i(()=>s.disable===!0?null:f("span",{ref:e,class:"no-outline",tabindex:-1}));function a(n){const d=t.value;n!==void 0&&n.type.indexOf("key")===0?d!==null&&document.activeElement!==d&&d.contains(document.activeElement)===!0&&d.focus():e.value!==null&&(n===void 0||d!==null&&d.contains(n.target)===!0)&&e.value.focus()}return{refocusTargetEl:u,refocusTarget:a}}var $e={xs:30,sm:35,md:40,lg:50,xl:60};const W={...Le,...pe,...Ve,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:s=>s==="tf"||s==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},X=["update:modelValue"];function Y(s,t){const{props:e,slots:u,emit:a,proxy:n}=_e(),{$q:d}=n,m=Ce(e,d),I=U(null),{refocusTargetEl:E,refocusTarget:Z}=Be(e,I),ee=fe(e,$e),x=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),Q=i(()=>{const r=y(e.val);return x.value===!0?e.modelValue.findIndex(b=>y(b)===r):-1}),v=i(()=>x.value===!0?Q.value>-1:y(e.modelValue)===y(e.trueValue)),C=i(()=>x.value===!0?Q.value===-1:y(e.modelValue)===y(e.falseValue)),O=i(()=>v.value===!1&&C.value===!1),te=i(()=>e.disable===!0?-1:e.tabindex||0),le=i(()=>`q-${s} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(m.value===!0?` q-${s}--dark`:"")+(e.dense===!0?` q-${s}--dense`:"")+(e.leftLabel===!0?" reverse":"")),ae=i(()=>{const r=v.value===!0?"truthy":C.value===!0?"falsy":"indet",b=e.color!==void 0&&(e.keepColor===!0||(s==="toggle"?v.value===!0:C.value!==!0))?` text-${e.color}`:"";return`q-${s}__inner relative-position non-selectable q-${s}__inner--${r}${b}`}),oe=i(()=>{const r={type:"checkbox"};return e.name!==void 0&&Object.assign(r,{".checked":v.value,"^checked":v.value===!0?"checked":void 0,name:e.name,value:x.value===!0?e.val:e.trueValue}),r}),ue=he(oe),ne=i(()=>{const r={tabindex:te.value,role:s==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":O.value===!0?"mixed":v.value===!0?"true":"false"};return e.disable===!0&&(r["aria-disabled"]="true"),r});function q(r){r!==void 0&&(M(r),Z(r)),e.disable!==!0&&a("update:modelValue",se(),r)}function se(){if(x.value===!0){if(v.value===!0){const r=e.modelValue.slice();return r.splice(Q.value,1),r}return e.modelValue.concat([e.val])}if(v.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(C.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function re(r){(r.keyCode===13||r.keyCode===32)&&M(r)}function ce(r){(r.keyCode===13||r.keyCode===32)&&q(r)}const de=t(v,O);return Object.assign(n,{toggle:q}),()=>{const r=de();e.disable!==!0&&ue(r,"unshift",` q-${s}__native absolute q-ma-none q-pa-none`);const b=[f("div",{class:ae.value,style:ee.value,"aria-hidden":"true"},r)];E.value!==null&&b.push(E.value);const F=e.label!==void 0?me(u.default,[e.label]):ve(u.default);return F!==void 0&&b.push(f("div",{class:`q-${s}__label q-anchor--skip`},F)),f("div",{ref:I,class:le.value,...ne.value,onClick:q,onKeydown:re,onKeyup:ce},b)}}var we=D({name:"QToggle",props:{...W,icon:String,iconColor:String},emits:X,setup(s){function t(e,u){const a=i(()=>(e.value===!0?s.checkedIcon:u.value===!0?s.indeterminateIcon:s.uncheckedIcon)||s.icon),n=i(()=>e.value===!0?s.iconColor:null);return()=>[f("div",{class:"q-toggle__track"}),f("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[f(j,{name:a.value,color:n.value})]:void 0)]}return Y("toggle",t)}});const Ae=f("div",{key:"svg",class:"q-checkbox__bg absolute"},[f("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[f("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),f("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var V=D({name:"QCheckbox",props:W,emits:X,setup(s){function t(e,u){const a=i(()=>(e.value===!0?s.checkedIcon:u.value===!0?s.indeterminateIcon:s.uncheckedIcon)||null);return()=>a.value!==null?[f("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[f(j,{class:"q-checkbox__icon",name:a.value})])]:[Ae]}return Y("checkbox",t)}});const Te=G({__name:"GroupLayoutOptionsCard",setup(s){const t=S();return(e,u)=>H((g(),h(T,{style:{width:"20rem"}},{default:c(()=>[o(k,null,{default:c(()=>[o(L,null,{default:c(()=>[p("Group Layout Options")]),_:1})]),_:1}),o(k,null,{default:c(()=>[o(we,{modelValue:l(t).selectedGroupLayout.hasAccess,"onUpdate:modelValue":[u[0]||(u[0]=a=>l(t).selectedGroupLayout.hasAccess=a),u[1]||(u[1]=a=>{var n;return l(t).updateGroupMenu((n=l(t).selectedGroup)==null?void 0:n.id,l(t).selectedLayout.id,a,l(t).selectedLayout.name)})],label:"Has Access"},null,8,["modelValue"])]),_:1}),o(k,null,{default:c(()=>[o(V,{modelValue:l(t).selectedGroupLayout.create,"onUpdate:modelValue":u[2]||(u[2]=a=>l(t).selectedGroupLayout.create=a),label:"Create"},null,8,["modelValue"]),o(V,{modelValue:l(t).selectedGroupLayout.read,"onUpdate:modelValue":u[3]||(u[3]=a=>l(t).selectedGroupLayout.read=a),label:"Read"},null,8,["modelValue"]),o(V,{modelValue:l(t).selectedGroupLayout.update,"onUpdate:modelValue":u[4]||(u[4]=a=>l(t).selectedGroupLayout.update=a),label:"Update"},null,8,["modelValue"]),o(V,{modelValue:l(t).selectedGroupLayout.delete,"onUpdate:modelValue":u[5]||(u[5]=a=>l(t).selectedGroupLayout.delete=a),label:"Delete"},null,8,["modelValue"])]),_:1}),o(k,null,{default:c(()=>[o(V,{modelValue:l(t).selectedGroupLayout.finance,"onUpdate:modelValue":u[6]||(u[6]=a=>l(t).selectedGroupLayout.finance=a),label:"Finance"},null,8,["modelValue"])]),_:1})]),_:1},512)),[[R,l(t).selectedLayout.id!==""]])}}),je=G({__name:"AccessControlEditorPage",setup(s){const t=S();return ge(()=>{console.log("Access Control Editor \xBB onBeforeMount"),t.readSettings()}),(e,u)=>(g(),w(A,null,[o(ke,null,{default:c(()=>[o(ie,null,{default:c(()=>[o(L,null,{default:c(()=>{var a;return[p("Access Control Editor \xBB "+_((a=l(t).selectedGroup)==null?void 0:a.name)+" \xBB "+_(l(t).selectedLayout.name),1)]}),_:1}),o(be,{dense:"",icon:"save",label:"Save",onClick:u[0]||(u[0]=a=>l(t).saveGroup()),align:"right"})]),_:1})]),_:1}),o(xe,{class:"flex"},{default:c(()=>{var a,n;return[o(Ie),H(o(qe,null,null,512),[[R,((a=l(t).selectedGroup)==null?void 0:a.id)!==""]]),o(Te),o(Ge),ye("pre",null,"groupMenu: "+_((n=l(t).selectedGroup)==null?void 0:n.menu),1)]}),_:1})],64))}});export{je as default};
